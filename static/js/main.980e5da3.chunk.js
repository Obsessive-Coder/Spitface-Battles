(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{172:function(e,t,a){e.exports=a.p+"static/media/loading.c5590569.svg"},180:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAxoAAACyCAYAAADF57lMAAAACXBIWXMAABcRAAAXEQHKJvM/AAAcwElEQVR42u3d7XXayMOG8RuffId/BZAKzFaAUoGdCkwqCKkgpIKQCoIrCK4gooJABSsqeKACPR9mWGPHNiA0o5nR9TvHJ9mNATGSRnNrXtQpy1KoWafTkzQ84TdP/b2XDO3rm1TYnyryk36rLHMOKAAAgAibxK0MGp3OS4307IXfHNifl4w4fBq3k7R65d9WkrbP/t/2hd/fqixXFCUAAABBYx8WDnsDnvcMZIQCXGD5RjjJn4SZstxSXAAAALEEjcceh/2fAz32LBAaEHI4KezPPqDQYwIAAAgansPEPkgMbYjY/73LbkGCNjaArP77k/knAACAoFFbsLiVGdaUSepT/IDWMsOxcpXlguIAAAAEjdMDxtgGjBuKG3jTTtJC0pzeDgAAQNB4OVz0JE3sD0OhgPNtJE1VlnOKAgDg0VDSzPFnZBQzQaNqyJhImhIwgNoCx4RhVQAATzJJv123PynmdriqMWAM1emsJH0nZAC16Uv6pU4nV6czoDgAAEC7gkanM5X0R9I1RQo4MZK0snOeAAAAEg8anU5PnU4u6StFCTjXlfRTnc6cogAAAKF7d0HIGMiskEMvBuDXnT3/bgN+Mvn+YZsuFfaH74g2G+jxgbZ43f4hqgCCDxrmyd25mIsBNGUkKVenkwUaNm7lvqfzh8zKdk2Z2f3g0keCBo4Yi1EFp1iKlY4A784fOmXupBIygOZd27DRC3Dbcg+fMQwg7KVQjgAABBA0TINmQcgAggob80CDxi6Bhv5rMg+fsZQZ7gEAQAuCBnMygBDdqNOZBbhduYfPaKpXw8fn8uwUAEBLgoZZwnZEkQFB+qxO57aFQSNr6LtliZQfAAANBw0z+ZvJZkDY5oHN1/BxRz7VHo2NWCEHANCKoBHmGHAAT3UDO1cL22BOLWgMZJ7Y7lLO4QwASD9odDoTMS8DiMWNOp0soO1x3atxLffPsmgi3DA/AwCQeNAwwzCmFBMQlZDO2TyRhv+hLJFyAwCgwaBhHobFUrZAXEYB9Wr4aDD7/q6ug81aLGsLAGhJ0AAQn2kg27GVeR5EzA3/v4OcWwybAgAkHjQ6nbHozQBiNVKnMwhkW1w3nDOP34X5GQAAXBw0pFuKB4haKD2SueP378qsBOWD61CzE8vaAgCSDhpmEvgNxQNELZSbBSvbgHbJ1/Ap159DbwYAIPGgQW8GkIK+fdhmCFIZPuX6c3IOWwBA6kEjo2iAJIRyLrtuQPsIVD3xoD4AAAgaAII6l133aIwSKMu1zNPUAQBINGiYlWr6FA1A0KjR1jakXRpG/v45hysAIO2g4X9NegDudANa5tZ1QzqL/P2ZCA4AIGgAiEoWyHa4bki7rrtcDs/aiR4NAEBi3gXcKAFQj0Eg2+G6IT2M9L19lA3SNfdw/MwkXTt8/7XcP/dny6EChBE06NEA0pIFtC0PcveMnmuZlaG2EZYhQQNVFXK/iMDWw/tzDgAJejp0yozl7lIsQFJCunmQR/pdeVAfAAAXBY1whlgAqE9XnU4vkG2J9cF9mcNt3ohlbQEALQgaGUUCJCmUXo3CNqxj+p6uH9RHbwYAoBVBo0eRAAQNx3KH751F8p6+ygMAgGCCBhPBgTSFdBPB5R38ruofAsr8DAAAaggaA4oESFIW0Lbkjt9/GFHZPXBoAgDaEjT6FAmQpJB6NLaSlhGFKpcP6ss5NAEA6QeNTodhU0C6rgPbHpcN7GGg70XQAAC0NGgwERxIWzhL3Epu5yXU2QOROdzOjaQVByYAoA1Bgx4NIG0hneMrSbsIvqvLMss5JAEAbQka9GgA8Mllr0YMQYPVpgAArQkaA4oDSFoW2PbkgX/XntzObck5JAEABA0AiKuhPQzkPV6zlFl9CwCAVgQNAGkbBLY9haS1o/euoyciizRkAQAQXNAYURwAQcMzlw3urOHXv4X5GQCAVgUNhKLHvHy0RshBw9XQqZ1Y1hYA0ALvJIW2vj4mE2k4NH8WBeWBuoTYaxnqylNDSd0Iv3PVIJadEARzTiEAgRnKLNyx/3OvsD9btefGzkCnj1xYydM8wXc1XJDhws2N+fn2TZrNpC3zRpGsB0k3AQYNV3w32Ic2SAztReicwPn12X/ve2P2P7m9mAOAr/rs1tZp59RlS1tfzROoswa2HPZ1+0BSv+J7bWx55Af1eq3l845jNnBfv5qejclEms8pD1ym0+mpLENLrbmjoNG3FXCVSjNz+H199GjcHvzU2TPTtRf3wwv82l68Fw1fwHvyc9OsjqA4kPs5U226k+vjvN2r405wTMdqKMaSJqq+0Me+3vpqQ8fc/sQUsMa2Tu/X+L59+zN6Fj4WtnwurkPeHVR6CFW3K/38KY3H0nQq5Tllgksqq9AOoNzx9y0qvs6Ftdx1V/fshXhc84XomGtJ3+3PUtK0oWNsKOm3j7heU6Ppq+PtXCq8Z+e45mP/f6jh+I7pWA0hYExrrtP2oWMfXlaBf/9LAlbV8PHZ/mxs+VcOZVcEjYiMRtLv36ZnY8AuQzJWtjJz1fis0mB3Vam7aID37IWgsI3XfoP7cmQbUHkLG7kA6jOw9chPh3XayH7GONCAUdjvf93gdvTtNhQyvSmVgwZicncnrVamd4MVqpCG3NH7VmnsuhzSUPewqduDgNENaH/uA8dMTydoAsApjeyV/Cxg0rUN6VDCxtB+d5cBq2rg+GWv1WfV6QSNWHW7Zv7GaiXd3lIecNnw9sHVvIVRQGW0qzFQ9WS6sn8FFjCe+2wvmiw4AuAUM9vI9l2vhRA2JpL+qNkejFOuqcU5dfpV4I0PHM2YfenXLzNvY8i1HNHKHb73uSdGFvh37Nn3uoullhJDqQAcN5e5OdGUnw3WU3OZeW4x6No6/aRrKz0aqRiNpD9/zPwNhlMhPluZidIhBA1XiX1R03cpFPYdr9cuTL8V5lhoAGGEjLtAtqPX0u/uJGwQNFJzd2ce8jeZUBZ4Scgp1NXwqeyM3x3IXZd9XsO+WyjsoVLH/BTDqACE29DuyyyuQcioKWxcRdD4wNm7vit9/24CR5ZRHjgUciNvEcB3dnXC7B+KdEnIyBXW5MBLAteAUxGATC9naA3tz57qqFnEIeMwbMxPCRrXHOsJ6vfNcrh5znK4iMFKZsJ03a51+s2UUIdNzRKqp7vy89BCAGEb2rotRFPH73+rZuej1H2NnR4LGkjZaCT9+680mzF/A6HLHV7Qmgwal3yvW8V/1+usCxOAVpgp3KGgd3LXq7FfNTAlX18rL4JGm3z+bIZTjceUBULV9DyNUWDfK8UL0uGFifkaQDuN5ec5GZduowtTxT3X7jVzggbM/I2fP83zN5i/0UahV+y5o/cd1vQ7VTxc8NqQ7/jVYcYpCbTSNJIwVLeB0hky9VL7Ivs7aHQ63FFqo+trM39jsWD+BkJSyEycrltW0+/4DE8DpTdk6qQLE4Dk9SPZxrrbyNPE9+v476DBilPtdnNj5m9Mp8zfQChcDJ/q6vh429Amgk9bsr+nHPIAYmk4X2Cg9G8e/TW3haFTML5+NcOpmL+B5uWO3nd44b9XUXVZ2zZckPbo1QAQqtsa32vqcbs3kpYHP42VGUEDj/p9M38jz5m/gSY19TwNF8vHVg1NPp+4eS/po6T/SerYPz/a/+/LmMMewIGdbSB/sz9LuVn+/GjLSPWsPtWrObS8VmbfJL2325wd/HRsve4jdIwJGnjbaGTmb8znzN9IURzzslxUhlnFf2siNPloeO8k/WM/ayFpa///1v732P67j4v7nRjGC8Dcif9k64NMphdgav8+sA1p34GjjuvDrdwu7LGWuZk21eu96Av7XVzfRLo+DGfM0cAbl/47M5xqOqUs0hLDOe+iV2NY8d8ukQd4QdqHjEzmIYlvWdnf83Fhv+XUBFrtm22gzl/59+1B6PAZNuq4Priu38Y6fZjuWJethnhWOLsS65jjLd2umb9RFNIt7QB4k7s4mvV6F7iLenCpx16Ccy8Yrk1PCBmHYcPHNlHBAO31SafPYfBVJ9V1fehJunEc0FZnvsb18Nzbw6ABHNfvS79+mfkbQ7IpnFvJzTK3Q49Bo2qvTOa4bDc6//kVC7kf23sjetiBtoaMeYB10t6lz59yfRNlXuE1hdwOoRoSNFDxdBtJf/5IsxnL4cK13GPQCGUiuI9hU1Ufkjf3sM8zDnugVX5cULdMPW7nJTejXNZrS1Vb2XAf1lz5bxI9QQPVfP5shlNNJpQFYgoamaeLwE7nd2X7amgvPL+OoAHgJZsLw0IuNz3fL7nkzqrLHo28odeeHM4IGqiu25W+fzeBg+VwEU6D+GjFd8L/a2rbXZ9Ia1W/+7WV+6EKVCRAe0xVbR6b6+tEnXXTUG57qS8JC1t7TSBoIHD9vlkON89ZDjcOsUyycVEJdvX3nSkX5VGl8u/JzRCuui5Kdbz+mGtOT6AVNqpnOKavoFG1R8P19XbV8OsJGvBoNJL+/dcsh8v8jZDFtHNcNGyfV/wu0vGihu1qY9CQ6NUA2mBW0/vknrZ36Pl1p7q0R6hwuG2DfdAYcLyjVvvlcMdjygJNNNjPbciOan7/dcXK30cD+9KLysrDNrKsHUDdfm6d61qIPRp1DGV1WadfEzTgTrcr/fxpHvjH/A1Ul6v+BzMNHF8Eql5AfTSwL72obD1sI0EDSF8R6Hu92WiuYBT4fnBdp/cYOgXHp+a1mb+xWDB/A5eEjZiCRl7DdrlQ1+osrieEU1EAOMcq0O1yXZdtA3mPtwwJGvDj5sb0bjB/A80HjZHDC8Hugu11PRG6iGR/jzjkAQTUWP6v0RxY0FgF8h5voUcDHnW7Zv7GasX8DZzD5TK3WSChaBDR/vBx95C7EQBCqpOq1EsZu4YeDTSh3zfzN/JcGjIcG0cVqv+hTANHDfzFhdvjUl7T+zBPAwBwEoIGmjMaSX/+SPM5w6ngqgF/rCHbD6QxT8P6KSoEAKfy1aMxOPP3s0jKb+fwvRk6hQDc3ZnlcKdTygJ1N+DfumDUfRG45KnbMTWs6dEA0LY6qUrQIKgxdArB2M/fKArp9pbygI+gMQhoG2O6gK04HAHgeCM7suuiEwQNhKXfl379MvM3WA4Xj7aqd1nVkerv0bhkeBcHu98LNAC41qUICBoIVVFQBqizIf+Su5rfLw+8/PKI9jVzNACcY0kRhFmXv6MMEFZVsTRzNfKcskBMDeWHC18/YPcCQNCyM36XXlnjmqCBMOx20mRiVqACXraSWR0jxO7oS0NQn937BD0aAKjDEsDQKTTv2zczH4OQgeMWbFcrXFMEAEDQAKp7eJDevzdDpbZbygOnyAPcpo2qL2sLAECyGDoF/9ZrM0yKeRhII2hc2ptBFzsAIEn0aMCf3U768kUaDgkZqKqQeTBeSuGHSYMAAIIGUNmPH2YexmxGWaDphn3q2wMAbRPa+OuMXULQgA/LpZmHMZkwDwN1CWni9TLACxwAtM2KIgg3aBQUA2q32UgfP0pZxsP3ULec0NMKzF0BAIIGcGC3e1yudkEbDM48BLIdObvCGeauAEACQQOox/29CRjTKWURthSG+oTQwN+I7noAAAgacGi5lP75RxqPmYcRhxQaxyF0l+UcSgAAvI7naKC6zcb0XvBEb/hXyPQo9AkaAIAWqmt4qdP5cAQNnG+3M8vUzmb0YKBJuaS7Bj+fSUgAgKZ8j2EjGTqF89zfmwfuTaeEDDStyYb+WixrCwDAm+jRwInNqrV5FgZP9EY4mjwY6c0AAOCIK7FqCt6y20mfPpleDEIGwrKVeWAeQQMAgECDBt3/eNn+eRhM9k6xgZ6KJtLvTtygAQDgpKABPPXwIL1/zzyMVJVlSo3kJnoWcg4iAACOY44GHm025lkYDJFCPFYyPQzdxMMNAADRoUcDZh7Gly9mmBQhA/HJE/88AACiDRqMjWmzHz9MwJjNKAvEymcPw1rmYYEAAOCIdyrLlTodSqJtlkuzXO2KOa2IXp7oZwEAEDWGTrXNZiN9/ChlGSGjpREzwe9UyPQ0+MD8DAAACBp4Yrd7XK52QVsJycl9nEWiRwMAAIIGDtzfm4AxnVIWIGhURxcgAAAVgsaaokjQcil9+GCWrOV5GEgbBzgAAIF5x0U6QZuN6b3gid74G3flAQCI3zqG9jsP7EvJbmeWqZ3N6MHAazgwAACI30QRzBskaKTi4cEsV1sUlAUAAAAat5+jkVMUkVqvzTyM21tCBk5BjwZiwXUJACJHj0asdjvTg8E8DJyHORoAgNT0KIIwsbxtjPbPwyBkAAAADCmCsIMGdzljsFxK79+bFaWY7A0AABCinCIwWN42BpuNeRZGznGLC5UlB1F4uNEDAEgSQ6dCtttJX76YYVKEDCBV3OgBACRp36PBHbXQ3N+byd4MkQIAAEC0QaMst+p0KI1QTKeUAVxYUgTgWAWASrgpXwFDpwCgeTuKAAAqG3j4jHOGmBTskr+DBneQgLRR8YXLx52yAcUMIFF9rrdh4oF9AEED7RBT0GCIAgD4k8k8i+R53ZvXGTRWkkaUNQB4F9OqDwPKA0BAfD0V/NxG90Zue1oy1fe8jumJGWD9rH4u9PQm5vZZWFm9o2IHWiOnCIK1knRD0ACAs4X6VPBC4Q3putT1s/8+Fk4+XD0rEAAACMUAcBlu4OvpZHCCBpAyngoeMiaDA0A1vno0zr2GMteMoAEAQfBx56uuoOHjok4oBnCqXqDbtaUMD4NGWRI0gHSxfHXYYrrz5fqizjNFAJwj8/AZ6wDr9Tpv+ly7DxrGhuMVSBJjRcPfP64b2HVdlAYtD109DlcgKAMPn1HlGuq6LouiLnoeNAqOVyBJjBVlH3Vrep9+y4/VIYcqEFTw97GyU14xnMTQQ+u0TruiMQK0QkEREAZ1+RCDYcDlwPULvhq2CEfm6XOqjgpwWS/V9ey7gc+gQWMEIGgg3aBx6QUl5KDha3ggDc12o0ernUGjar2UR1Af0aMBIIpGLMLfR8OGX5/CsUpDs90ImmG5Dbx+jmFCuMs6LSdoAOnbqSyZDE7QqOOinDnevhhWR6vjopxxuEd7/NSx/8fsqloCWyY/8zM2qt5jmjvetiyQ93jV06BhGiMsLQjQgEWaDaW+qg+fGsjhEog1XZR9rJx4aUNzrPrGVsO/S/ddJumOYtQ0osB2yTV0q2pL457qtobXdx1t2/LvoEGjBEhRThGwr2q4OE8i+P6Fh23sXxA2hpJmHObO+Oq5rdq460lasJskSZ8vDAo+A1ve8Ovfcq3L5t65HHpWvBY0aJQAaeHmQTx8NEImOn/YQk/u7x7uarj++GpoVgldQ/v9uhzm0dd1VfZ/j/3/l58V65WepLnH7by0XnJdr08rvm7gOKytXgsaNEoALr5obl+5Hv7TrXBhmntoIC0iOtbvdF6vxi2NTC98Bc2RzhvXnsnc3b1mF70YNmY6/ebHPrD1PW3froZ6JZfbaQnn1ke+AlD+WtDIOe6BZOxUlgXFEBUfvRrnDFuYSbqJ5HsXnvfTsYv7wP7eL0KGt6Ae2v6fS/rN/j9aHxUyN0AGbwSMcQOBLa/xeHG9naeGjX2PkMty3OjVHg0zIXzDcQ8kgRsH8Zl7+pyf9uI3ONJI/uwlEMcXNPr2/JrJ3LHe35HNbINoIelfTyEN/oNGV9Ife76+tf+Z+H16eX61ZVYcnFsL+/f/s3WW78BWV0CYeyi/3Ia13pGwtvJwXP7X9uiUZfn3P3c6c04OIAlfVJZtmHyaydw1dGkpf8uSFvI3NGD/3VYyQ0969nv6vGv4Q/VNNi857Ws/XnO5XSmrzm31fe6ErBNwfRqL/6m+IXk+j8213e5CjzeTfK5292EfNt69keAIGkD8WOEkTlOZu3e+jNTskqt1huGlWD62zVYEDdTkQfXO+/FZr183EC72Njro0bh65Zdyji8gehvmZ0QdENvyTKN71TvkKbbr1wOHe+3nTmzHP9pxLLWlXp8e/sfLQcPM06DyA+I2pwiitVV7nrcwbXFDcyO369i3UUxBcyczZJB5sWHum7qvoW2o1zfPy+2KRgpA0ECwDfDUGyA/VP8E7lVE5bafl7LmcK9NEVF5TvU4jh5hmTl835Tr9enz//F60CjLBSkbiNYDw6aSME74u+1Uf2/GXgy9GsuD7eRcrdc8gm1cHzRm89Zdn8Kvm1wFja3qW/gixDptfnrQcJvoALjFuZuGXOmO4R7L3QPWQj/+d89CJA/VrD9o7CI4/g8bn22xsd895P0zc7xPFrZRnpLnddrJQWMuejWA2CxVljnFkIyJ0hta80Nuex0KhX3XdKynvRgFh3mttgq7V+vLs3DZpqCZ2/0zDrjB7ONGxa3Smhg+ea0eeztomEnhU+osICqcs+k1msYJXZSW8jN0INThCS+FLIKGm/0f4jlz/0JDtm1BQ/YcCLG3diw/PUxb+Xsuk4/gPH/tH6+Ovrws50qviwdI1Q96M5K0shel2MPGWv5WWSpsoz60RubkjcYX6m3IzQI8/ievbGtblrPOn4XBdWDnp8+esJWkT9G3OY6cZ1cnvtFEAEK3Eb0ZhI2wQ0Ymv+PRpwpn+O+93h4uwjBlN/t/Hcnx34ZejZ2e9t7t7+qvA9k/TbR15xGHjU+nlNlpQaMsVzJdIwDCNbbDHZF+2Ihtzsa9pKH8T3rdKoyx0MdChsTwKVdCCOenhOw2BI38lXO06TptI/83QZ6HjX8Uz02knaQPOnF1t6uT37YsZ+IJlkCovjFkqnVh40cE27qTues1DqC8do2dm6d9f85fd2Gzyf1/ashuw02i/I3vPmyoTmuip/W1emqg8KcqPNjtPLm+ujrzA1Jc/QSI3b3KckoxtK7xNJG5q7QO9rg0F6R5QOHMZ2NzY/fP9Ix9Crf73+e5spP08YyQ3Yageew7TmyZ+RpGuLTHRRFYKPZZBueU1QeZHuKz6qrzgoYZluH7ZAXw1slflmOKobVymTuBnwKql+8lvZe/1VvOaWwO5GfZ2292v+Rnbh/ch40fns6Bgc6bWFwkXv67E4/xhT13vjm8MbCTmQ6QBRrwF/b4+RRA4NgHjKxqGL46+xWEDSCkOwy3FANkeg2GMuN8fzRwcVrbC/c+YITaaNrP2fig+oco7GzZv5fpxTi3AUPQ8LP/Jw73/yUhO/WgkZ+5n6a2sf2txvpsv4+GiuOhtnNbBh/tdvvqkV3bcn9/ScDY65RlWfGVnZ798GvqLsC7e3oycMTQXiQy+/d+zReilb0G5BE3koa24ZlVLJ+dzN3HXGEMEcP5+39sw2fV/Z/bY2Ahhr/52FdZhXbnQ0L7KDv4GcVQn1cPGo9hYybpjnMA8OYbczJQQc9erPd/SuZu2eCN16wOLsz7v+eJls/AlsvzMnqpPFb2YkwvRLv2f3Hws2L/N97gfm0/qUXn6ODZj16o2wv9vazwYV3m1GVB4zFwTGS6uboc+4AzO0m3rC4FAABicFXLu5ilb4fiCeKAK2ZyISEDAAC0KmiYsFGoLDOFMUseSIVZ8aEseRgfAACISj1Dp158585YZjhVn2IGKgWMKT0YAACAoPF64Mj0uKoDcziA121kVsWYqyyZZAgAAAgaZ4aO/c+I4kfL7R9glEtaEC4AAABBo77gMdTfS8oRQJBqoCh0uCxiWRYUDQAAIGj4DSCHayNn9s99EBFhBIHZr7a2DxKPa1MzxwIAABA0Ytz6zvOHtWQHfx/o74eXMDEdb9no6UNtDh9WJh0+qIwAAQAAkHDQqDekvBRW9t56+mRP0jWHkldvPa/lpQDw8tMvCQsAAAAEjchDzeGwr2PO+d1jsgteW+ej6Qs97Sl4+3OZFA0AABC9/wcN76nYKnelcQAAAABJRU5ErkJggg=="},184:function(e,t,a){e.exports=a.p+"static/media/youtube_social_square_red.1f145247.png"},191:function(e,t,a){e.exports=a(365)},224:function(e,t,a){},225:function(e,t,a){},227:function(e,t,a){},250:function(e,t,a){},251:function(e,t,a){},252:function(e,t,a){},257:function(e,t){},259:function(e,t){},289:function(e,t){},290:function(e,t){},356:function(e,t){},359:function(e,t,a){},360:function(e,t,a){},362:function(e,t,a){},364:function(e,t,a){},365:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(35),l=a.n(s),i=a(10),o=a(11),c=a(13),d=a(12),u=a(14),m=a(412),p=a(414),h=a(17),f=a(3),g=Object(n.createContext)({user:{},notifications:[],methodData:{},setUser:function(){return null},addNotifications:function(){return null},clearNotifications:function(){return null},setData:function(){return null},setMethodData:function(){return null}}),b=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={user:{},notifications:[],methodData:{},setUser:a.setUser.bind(Object(f.a)(a)),addNotifications:a.addNotifications.bind(Object(f.a)(a)),clearNotifications:a.clearNotifications.bind(Object(f.a)(a)),setData:a.setData.bind(Object(f.a)(a)),setMethodData:a.setMethodData.bind(Object(f.a)(a))},a.setUser=a.setUser.bind(Object(f.a)(a)),a.addNotifications=a.addNotifications.bind(Object(f.a)(a)),a.clearNotifications=a.clearNotifications.bind(Object(f.a)(a)),a.setData=a.setData.bind(Object(f.a)(a)),a.setMethodData=a.setMethodData.bind(Object(f.a)(a)),a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"setUser",value:function(e){this.setState(function(){return{user:e}})}},{key:"addNotifications",value:function(e){this.setState(function(t){return{notifications:t.notifications.concat(e)}})}},{key:"setData",value:function(e){this.setState(function(t){return Object(h.a)({},t,e)})}},{key:"clearNotifications",value:function(){this.setState(function(){return{notifications:[]}})}},{key:"setMethodData",value:function(e){this.setState(function(t){var a=t.methodData;return{methodData:Object(h.a)({},a,e)}})}},{key:"render",value:function(){var e=this.props.children;return r.a.createElement(g.Provider,{value:this.state},e)}}]),t}(n.Component),v=g.Consumer,E=Object(n.createContext)({pageData:null,masterData:null,setPageData:function(){return null},setMasterData:function(){return null}}),x=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={pageData:{},masterData:{},setPageData:a.setPageData.bind(Object(f.a)(a)),setMasterData:a.setMasterData.bind(Object(f.a)(a))},a.setPageData=a.setPageData.bind(Object(f.a)(a)),a.setMasterData=a.setMasterData.bind(Object(f.a)(a)),a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"setPageData",value:function(e){this.setState(function(){return{pageData:Object(h.a)({},e)}})}},{key:"setMasterData",value:function(e){this.setState(function(){return{masterData:Object(h.a)({},e)}})}},{key:"render",value:function(){var e=this.props,t=this.state,a=this.context,n=e.children,s=Object(h.a)({},t,{userContext:Object(h.a)({},a)});return r.a.createElement(E.Provider,{value:s},n)}}]),t}(n.Component),y=E.Consumer;x.contextType=g;var N=a(175),C=a(383),O=a(379),A=a(373),k=a(172),S=a.n(k),I=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{style:{position:"absolute",display:"flex",justifyContent:"center",height:"100vh",width:"100vw",top:0,bottom:0,left:0,right:0,backgroundColor:"white"}},r.a.createElement("img",{src:S.a,alt:"loading"}))}}]),t}(n.Component),T=a(413),R=["handlePhotoDrop","handlePhotoUploadOpen","handleRemovePhoto","handleCloseModal"],j=["handleUpdateSocialLinks","handleRemoveSiteClick"],w={PAGE_NAMES:["updateProfileState","handleUpdateInfo","handleUpdateSocialSites","handleRemoveSocialSite","handleUploadPhoto","handleRemovePhoto","handleRelationshipButtonOnClick"],PROFILE_PHOTO_NAMES:R,SOCIAL_LINKS_NAMES:j,PROFILE_TOP_CONTENT_NAMES:["handleChangeVideo","handleAddVideo","handleRemoveVideos"],PROFILE_BOTTOM_CONTENT_NAMES:["handleSortBattleList","handleRelationshipOnClick"],VIDEO_LIST_NAMES:["handleAddVideoSubmit","handleRemoveVideoClick","handleVideoItemClick"],PROFILE_ACTION_HEADER_NAMES:["toggleIsMoreDropdownOpen","toggleisEditing"],EDIT_GROUP_NAMES:["handleInputKeyUp","handleCancel","toggleIsEditing","handleValueChange","handleUpdateInfo"]},B={PAGE_NAMES:["updateBattle","handleJoinLeaveBattle","handleAcceptBattleChallenge","handleRejectBattleChallenge","handleBattleRatingOnChange","handleReadyOnClick","handleFollowBattle","handleUnfollowBattle"]},U={PROFILE_METHOD_NAMES:w,BATTLE_STAGE_METHOD_NAMES:B},P="http://spitface-battles-dev.herokuapp.com/",_="spitface-battles-development.auth0.com",D="https://obsessive-coder.github.io/spitface-battles-public/",L=P+"api",M="http://www.spitfacebattles.com.s3.amazonaws.com/uploads/images/1576691928660_3f131171-269c-4562-bfb2-2b0fa751f9d8_blank-profile-picture-973461_1280.png",F="https://i.ytimg.com/vi/[videoId]/sddefault.jpg",V=["<",">","\\","`","{","|","}"],q=[{label:"None",value:-1},{label:"Battle Type",value:"Type"},{label:"Scoring Type",value:"ScoringType"},{label:"# of Rounds",value:"RoundCount"},{label:"Round Length",value:"RoundLength"}],G=[{text:"home",icon:"faHome"},{text:"battle",icon:"faMicrophone"},{text:"people",icon:"faUserFriends"},{text:"profile",icon:"faUser"},{text:"help",icon:"faInfo"},{text:"logout",icon:"faSignOutAlt"}],z=[{isAdvancedOption:!1,id:"types",text:"What type of battle?",description:"\n    STANDARD: A regular battle with regular rules and 3 judges.\n    COMING SOON: More battle types!\n  "},{isAdvancedOption:!1,id:"scoringTypes",text:"What type of scoring?",description:"\n    BASIC: Simple scorecard with a single score.\n    STANDARD: Detailed scorecard with many categories.\n  "},{isAdvancedOption:!1,id:"roundCounts",text:"How many rounds?",description:"The number of rounds long the battle is."},{isAdvancedOption:!0,id:"roundLengths",text:"How long are the rounds?",description:"\n    The amount of time a contestant has to prepare and submit a verse for a single round.\n    NOTE: This is not the length of the verse.\n  "},{isAdvancedOption:!0,id:"stagingRoundLengths",text:"How long is the staging round?",description:'\n    The amount of time the battle stays in the staging round before actually starting.\n    NOTE: For more information on the staging round, please see "Battle Progression" in the guides.\n  '},{isAdvancedOption:!0,id:"scoringRoundLengths",text:"How long is the scoring round?",description:'\n    The amount of time the battle stays in the scoring round after all rounds are complete.\n    NOTE: For more information on the scoring round, please see "Battle Progression" in the guides.\n  '},{isAdvancedOption:!0,id:"judgingTypes",text:"Who's scoring it?",description:'\n    * All battles are scored and influenced by the public.\n    Public: Everyone has an equal voice.\n    Judges: Up to 3 judges will score to decide the winner.\n    NOTE: For more information, please see "Judging and Scoring" in the guides.\n  '},{isAdvancedOption:!0,id:"verseLengths",text:"How long are the verses?",description:"\n    The amount of time a contestant raps during a round.\n    NOTE: The length of their video should not exceed this value.\n    NOTE: This is not the length of the round.\n  "}],H=[{labelText:"age",order:0},{labelText:"style",order:1},{labelText:"area",order:2}],W=[{category:"battle",icon:"faMicrophone"},{category:"message",icon:"faComments"},{category:"community",icon:"faUserFriends"}],J="You entered an invalid character. Please try again.",Q="\n   Do you really want to delete this?\n   This action cannot be undone and may impact other users.\n   WARNING: Actions that impact other users may result in reputation and/or popularity penalties.\n",Y=["jpeg","jpg","png"],X="It is important that we give you the best tools to ensure your safety wile using Spitface Battles.",Z="It is important that we give you the best experience while using Spitface Battles.",K="\nWARNING: This feature is currently being developed. Please be patient while we get it just right for you.",$={headingText:"No Videos",bodyText:"The user hasn't uploaded any profile videos."},ee={headingText:"Add Some Videos",bodyText:"Use the button below to add videos."},te=[{order:0,labelText:"Top 5"},{order:1,labelText:"Friends"},{order:2,labelText:"Rivals"}],ae={SERVER_URL:P,AUTH0_DOMAIN:_,AUTH0_CLIENT_ID:"Qk4XbC1YmmqXvxoyznJT7zizaavFiPl5",API_URL:L,AUTH0_CALLBACK_URL:D,AUTH0_BATTLE_SOCIAL_IDENTITY_PROVIDERS:["google-oauth2"],API_PROFILE_PHOTO_URL:"http://spitface-battles-dev.herokuapp.com/images/",DEFAULT_PROFILE_PHOTO_URL:M,YOUTUBE_THUMBNAIL_URL:F,INVALID_CHARACTERS:V,BATTLE_LIST_SORT_FIELDS:q,NAVIGATION_ITEMS:G,CREATE_BATTLE_REQUIRED_FIELDS:["types","scoringTypes","roundCounts"],CREATE_BATTLE_FORM_ITEMS:z,MESSAGE_INVALID_INPUT_CHARACTERS:J,MESSAGE_CONFIRM_DELETE:Q,APPROVED_IMAGE_TYPES:Y,PROFILE_INFO_ITEMS:H,PROFILE_BATTLE_ITEMS:[{labelText:"pending",order:0,stateProperty:"pendingBattles"},{labelText:"current",order:1,stateProperty:"currentBattles"},{labelText:"requests",order:2,stateProperty:"requestedBattles"},{labelText:"history",order:3,stateProperty:"historyBattles"}],NOTIFICATION_LIST_ITEMS:W,YOUTUBE_OPTIONS_PROFILE:{playerVars:{iv_load_policy:3,modestbranding:1,rel:0}},DEFAULT_PROFILE_YOUTUBE_ID:"3cYBfuphkuE",MESSAGE_INVALID_IMAGE_TYPE:"Unsupported image type.\nPlease upload a .jpeg, .jpg, or .png file.",MESSAGE_PROFILE_VIDEO_EXISTS:"That video is already in your list.",MESSAGE_REQUIRED_FIELD:"This field is required.",MESSAGE_UNAVAILABLE_USERNAME:"This username is already taken.",MESSAGE_UNAVAILABLE_EMAIL:"This email address is unavailable.",MESSAGE_UNCHANGED_EMAIL:"You haven't changed the email address",MESSAGE_VALID_USERNAME:"This username is available.",MESSAGE_VALID_EMAIL:"This email is available",MESSAGE_INVALID_EMAIL_FORMAT:"Invalid email format",MESSAGE_UNCHANGED_USERNAME:"You haven't changed your username,",MESSAGE_SAFETY_PENDING_FEATURE:X,MESSAGE_STANDARD_PENDING_FEATURE:Z,MESSAGE_ALL_PENDING_FEATURE:K,CLASS_METHOD_NAMES:U,DEFAULT_PROFILE_VIDEO_LIST_DATA:$,DEFAULT_PROFILE_OWNER_VIDEO_LIST_DATA:ee,PROFILE_RELATIONSHIP_NAV_ITEMS:te,MESSAGE_REMOVE_FRIEND:"Are you sure you want to remove this user from your friends?",MESSAGE_CANCEL_FRIEND_REQUEST:"Are you sure you want to cancel this friend request?"},ne={isTextValid:function(e){for(var t=0;t<V.length;t++)if(e.toString().includes(V[t]))return!1;return!0},isImageValid:function(e){var t=e.type.split("/").pop();return Y.includes(t)},isVideoInList:function(e,t){for(var a=0;a<e.length;a++){if(e[a].video_id===t)return!0}return!1},validateUsername:function(e){var t={};return e&&e.trim()||(t.isValid=!1,t.validationMessage="This field is required."),ne.isTextValid(e)||(t.isValid=!1,t.validationMessage=J),Object.keys(t).includes("isValid")||(t.isValid=!0,t.validationMessage="This username is available."),t},validateEmailFormat:function(e){var t={};if(e&&e.trim()||(t.isValid=!1,t.validationMessage="This field is required."),ne.isTextValid(e)||(t.isValid=!1,t.validationMessage=J),!Object.keys(t).includes("isValid")){var a=/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e);t.isValid=a,t.validationMessage=a?"This email is available":"Invalid email format"}return t},validatePassword:function(e){var t={};if(e&&e.trim()||(t.isValid=!1,t.validationMessage="This field is required."),e.trim().length<8&&(t.isValid=!1,t.validationMessage="Password is too short"),ne.isTextValid(e)||(t.isValid=!1,t.validationMessage=J),!Object.keys(t).includes("isValid")){var a="0,1,2,3,4,5,6,7,8,9".split(","),n="a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z".split(","),r=n.map(function(e){return e.toUpperCase()}),s="!,@,#,$,%,^,&,*".split(","),l=[],i=e.split("");l.push(i.filter(function(e){return a.includes(e)}).length>0),l.push(i.filter(function(e){return n.includes(e)}).length>0),l.push(i.filter(function(e){return r.includes(e)}).length>0),l.push(i.filter(function(e){return s.includes(e)}).length>0),l.filter(function(e){return!0===e}).length<3&&(t.isValid=!1,t.validationMessage="Password does not meet requirements"),Object.keys(t).includes("isValid")||(t.isValid=!0,t.validationMessage="Password is valid")}return t},getWinRatio:function(e,t,a){var n=0;return n=0===e?0:a?(t+.5*a)/e:t/e,Number(Math.round(n+"e2")+"e-2").toFixed(2)},getPopularityColor:function(e){var t="chartreuse";return e<20?t="red":e<40?t="orangered":e>=90?t="darkgoldenrod":e>=70&&(t="green"),t},getProfileSocialSiteUrl:function(e){var t=e.username,a=e.SocialSite,n=a.definition,r=a.additional_url,s="https://www.";return s+="".concat(n,".com/"),s+=r?"".concat(r,"/"):"","".concat(s).concat(t)},getSocialSiteUsername:function(e,t,a){var n=e.replace("https:","");return(n=(n=(n=(n=(n=n.replace("www.","")).replace(t,"")).replace(".com","")).replace(a,"")).split("").includes("?")?n.slice(0,n.split("").indexOf("?")):n).replace(/\//gi,"")},sortBattles:function(e,t){return e.sort(function(e,a){var n=e[t],r=a[t];return n.definition>r.definition?1:-1})},getPhotoFileData:function(e,t){var a=t.split("."),n=a[a.length-1];return{fileName:"".concat("uploads/images/").concat(Date.now(),"_").concat(e,"_").concat(t),fileType:n}}},re=ne,se=2,le=3,ie=["contestant","judge"],oe={getAllParticipants:function(e,t){return{contestants:this.getParticipants(e,t,"contestant"),judges:this.getParticipants(e,t,"judge")}},getParticipants:function(e,t,a){if(ce(a)){var n=function(e){for(var t="contestant"===e?se:le,a=[],n=0;n<t;n++)a.push({});return a}(a);return e.forEach(function(e){if(e.Role.definition===a){var r=e.participant_number-1,s=e;if("contestant"===a){var l,i;s.verses=[];for(var o=0;o<t.length;o++){l=t[o].Verses;for(var c=0;c<l.length;c++)(i=l[c]).user_id===s.user_id&&(s.verses[o]=i)}}n[r]=s}}),n}},isUserParticipant:function(e,t){return e.map(function(e){return e?e.user_id:-1}).includes(t)},isSeatAvailable:function(e,t){if(ce(t)){var a="contestant"===t?se:le;return(e=e.filter(function(e){return void 0!==e.User})).length<a}},getSeatNumber:function(e){var t;return e.forEach(function(e,a){t||function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}(e)&&(t=a+1)}),t},getUserBattleRating:function(e,t){return e.filter(function(e){return e.user_id===t})[0]},getAverageBattleRating:function(e){if(!e||!e.length)return 0;var t=e.map(function(e){return e.rating}),a=t.reduce(function(e,t){return e+t},0)/t.length;return isNaN(a)?0:Math.round(100*a)/100},getBattleRolesObject:function(e){return e.reduce(function(e,t){return e[t.definition]=t,e},{})},getBattleCardKey:function(e,t){if(!e||!e.length)return t;for(var a="",n=0;n<e.length;n++){a+=e[n].id}return a},getRoundInfoText:function(e,t){var a=e>24?e/24:e,n=e>24?"day":"hour";return a>1&&(n+="s"),"".concat(t," ").concat(t>1?"rounds":"round"," @ ").concat(a," ").concat(n)},getBattleFormChoiceText:function(e,t){var a=t.toLowerCase(),n=a.includes("roundlengths"),r=a.includes("verselengths"),s=parseInt(e,10),l=n&&1===s?"hour":"hours";return n&&s>24?(s/=24)>=7&&(l="days"):r&&(l="seconds",s>90&&(s/=60,l="minutes")),"".concat(n||r?s:e," ").concat(n||r?l:"")},getBattleListData:function(e){for(var t=[],a=[],n=[],r=0;r<e.length;r++){var s=e[r],l=s.Status.definition,i=t;"staging"===l?i=a:"closed"===l&&(i=n),i.push(s)}return{currentBattles:t,pendingBattles:a,historyBattles:n}},getBattleInfo:function(e){return Object.keys(e).reduce(function(t,a){var n=e[a],r=a.includes("RoundType");if(n&&!r&&n.hasOwnProperty("definition")){var s=e[a].definition,l="RoundLength"===a||"StagingRound"===a||"ScoringRound"===a;s+=l?" hour":"",s+=l&&parseInt(s,10)>1?"s":"",s+="VerseLength"===a?" seconds":"",t[a.replace(/([A-Z])/g," $1").trim()]=s}return t},{})}};function ce(e){return!!ie.includes(e)}var de={getUserReactions:function(e,t,a){return e.filter(function(e){return e.user_id===a&&e.Type.definition===t})},getUserScores:function(e,t){return e.filter(function(e){return e.user_id===t})[0]},getYouTubeId:function(e){var t="",a=e.replace(/(>|<)/gi,"").split(/(vi\/|v=|\/v\/|youtu\.be\/|\/embed\/)/);return"string"===typeof(t=void 0!==a[2]?(t=a[2].split(/[^0-9a-z_\\-]/i))[0]:a)?t:t[0]}};function ue(e,t,a){this.isExact=e,this.path=t,this.component=a}var me=a(39),pe=a.n(me),he={domain:_,clientId:"Qk4XbC1YmmqXvxoyznJT7zizaavFiPl5",callbackUrl:D,apiUrl:L},fe=a(173),ge=function(){function e(){Object(i.a)(this,e),this.accessToken=void 0,this.idToken=void 0,this.expiresAt=void 0,this.userProfile=void 0,this.scopes=void 0,this.tokenRenewalTimeout=void 0,this.requestedScopes="openid profile email",this.auth0=new fe.a.WebAuth({domain:he.domain,clientID:he.clientId,redirectUri:he.callbackUrl,audience:he.apiUrl,responseType:"token id_token",scope:this.requestedScopes,leeway:120}),this.login=this.login.bind(this),this.logout=this.logout.bind(this),this.handleAuthentication=this.handleAuthentication.bind(this),this.isAuthenticated=this.isAuthenticated.bind(this),this.userHasScopes=this.userHasScopes.bind(this),this.getAccessToken=this.getAccessToken.bind(this),this.getIdToken=this.getIdToken.bind(this),this.renewSession=this.renewSession.bind(this),this.getProfile=this.getProfile.bind(this),this.scheduleRenewal()}return Object(o.a)(e,[{key:"login",value:function(){this.auth0.authorize()}},{key:"handleAuthentication",value:function(){var e=this;this.auth0.parseHash(function(t,a){a&&a.accessToken&&a.idToken?e.setSession(a):t&&(ve.replace("/welcome"),console.log("Error: ",t))})}},{key:"getAccessToken",value:function(){return this.accessToken}},{key:"getIdToken",value:function(){return this.idToken}},{key:"setSession",value:function(e){localStorage.setItem("isLoggedIn","true");var t=1e3*e.expiresIn+(new Date).getTime();this.accessToken=e.accessToken,this.idToken=e.idToken,this.expiresAt=t,this.scopes=e.scope||this.requestedScopes||"",this.scheduleRenewal();var a=ve.location.pathname,n="/callback"===a?"/battles/find/":a;ve.replace(n)}},{key:"renewSession",value:function(e){var t=this;this.auth0.checkSession({},function(a,n){n&&n.accessToken&&n.idToken?t.setSession(n,e):a&&t.logout()})}},{key:"getProfile",value:function(e){var t=this;this.auth0.client.userInfo(this.accessToken,function(a,n){n&&(t.userProfile=n),e(a,n)})}},{key:"logout",value:function(e){if(this.accessToken=null,this.idToken=null,this.expiresAt=0,this.scopes=null,this.userProfile=null,localStorage.removeItem("isLoggedIn"),clearTimeout(this.tokenRenewalTimeout),e)return e()}},{key:"isAuthenticated",value:function(){var e=this.expiresAt;return(new Date).getTime()<e}},{key:"userHasScopes",value:function(e){var t=this.scopes.split(" ");return e.every(function(e){return t.includes(e)})}},{key:"scheduleRenewal",value:function(){var e=this,t=this.expiresAt-Date.now();t>0&&(this.tokenRenewalTimeout=setTimeout(function(){e.renewSession()},t))}},{key:"getExpiryDate",value:function(){return JSON.stringify(new Date(this.expiresAt))}}]),e}(),be=a(77),ve=Object(be.a)(),Ee="/v1/membership",xe={search:function(e,t,a){return Pe.get("".concat(Ee,"/").concat(e,"/search/").concat(t),a)},find:function(e,t){return Pe.get("".concat(Ee,"/").concat(e),t)},create:function(e,t){return Pe.post(Ee,e,t)},update:function(e,t){return Pe.put("".concat(Ee,"/").concat(e.user_id),e,t)},delete:function(e,t){return Pe.delete("".concat(Ee,"/").concat(e),t)},isUsernameAvailable:function(e,t,a){return Pe.get("".concat(Ee,"/").concat(e,"/check-username-availability/").concat(t),a)},isEmailAvailable:function(e,t,a){return Pe.get("".concat(Ee,"/").concat(e,"/check-email-availability/").concat(t),a)}},ye={getApprovedSocialSites:function(e){return Pe.get("".concat("/v1/profiles","/approved-sites"),e)},getUserProfile:function(e,t){return Pe.get("".concat("/v1/profiles","/").concat(e),t)},createUserProfile:function(e,t){return Pe.post("/v1/profiles",e,t)},updateUserProfile:function(e,t,a){return Pe.put("".concat("/v1/profiles","/").concat(e),t,a)},deleteUserProfile:function(e,t){return Pe.delete("".concat("/v1/profiles","/").concat(e),t)},getProfileVideos:function(e,t){return Pe.get("".concat("/v1/profiles","/").concat(e,"/videos"),t)},createProfileVideo:function(e,t){return Pe.post("".concat("/v1/profiles","/").concat(e.profile_id,"/videos"),e,t)},deleteProfileVideos:function(e,t){return Pe.delete("".concat("/v1/profiles","/").concat(e,"/videos"),t)},createProfileSocialSites:function(e,t,a){return Pe.post("".concat("/v1/profiles","/").concat(e,"/sites"),{profileSites:t},a)},updateProfileSocialSites:function(e,t,a){return Pe.put("".concat("/v1/profiles","/").concat(e,"/sites"),{updatedSites:t},a)},deleteProfileSocialSites:function(e,t){return Pe.delete("".concat("/v1/profiles","/").concat(e,"/sites"),t)},getSignedRequest:function(e,t,a){return Pe.post("".concat("/v1/profiles","/").concat(e,"/profile-photo"),t,a)},uploadProfilePhoto:function(e,t,a){return Pe.put(e,t,a)},removeProfilePhoto:function(e,t,a){return Pe.delete("".concat("/v1/profiles","/").concat(e,"/profile-photo/").concat(t),a)}},Ne=a(16),Ce={getBattles:function(e){return Pe.get("/v1/battles",e)},getFeaturedBattles:function(e){return Pe.get("".concat("/v1/battles","/featured"),e)},getOneBattle:function(e,t){return Pe.get("".concat("/v1/battles","/").concat(e),t)},deleteBattle:function(e,t){var a=Object(Ne.a)(e,1)[0];return Pe.delete("".concat("/v1/battles","/").concat(a),t)},createBattle:function(e,t){return Pe.post("/v1/battles",e,t)},joinBattle:function(e,t){var a=Object(Ne.a)(e,2),n=a[0],r=a[1];return Pe.post("".concat("/v1/battles","/").concat(n,"/participants"),r,t)},leaveBattle:function(e,t){var a=Object(Ne.a)(e,2),n=a[0],r=a[1];return Pe.delete("".concat("/v1/battles","/").concat(n,"/participants/").concat(r),t)},getBattleResults:function(e,t){return Pe.get("".concat("/v1/battles","/").concat(e,"/result"),t)},getBattleCommentsCount:function(e,t){return Pe.get("".concat("/v1/battles","/").concat(e,"/comments/count"),t)},getBattleComments:function(e,t){return Pe.get("".concat("/v1/battles","/").concat(e,"/comments"),t)},getBattleComment:function(e,t,a){return Pe.get("".concat("/v1/battles","/").concat(e,"/comments/").concat(t),a)},createBattleComment:function(e,t,a){return Pe.post("".concat("/v1/battles","/").concat(e,"/comments"),t,a)},updateBattleComment:function(e,t,a,n){return Pe.put("".concat("/v1/battles","/").concat(e,"/comments/").concat(t),a,n)},deleteBattleComment:function(e,t,a){return Pe.delete("".concat("/v1/battles","/").concat(e,"/comments/").concat(t),a)},createCommentReaction:function(e,t,a){var n=t.comment_id;return Pe.post("".concat("/v1/battles","/").concat(e,"/comments/").concat(n,"/reactions"),t,a)},updateCommentReaction:function(e,t,a){var n=t.comment_id,r=t.user_id;return Pe.put("".concat("/v1/battles","/").concat(e,"/comments/").concat(n,"/reactions/").concat(r),t,a)},deleteCommentReaction:function(e,t,a){var n=t.comment_id,r=t.user_id;return Pe.delete("".concat("/v1/battles","/").concat(e,"/comments/").concat(n,"/reactions/").concat(r),a)},updateBattleChallenge:function(e,t,a){return Pe.put("".concat("/v1/battles","/").concat(e,"/challenge"),{newStatusDefinition:t},a)}},Oe={getAllRound:function(e,t){return Pe.get("".concat("/v1/verses","/rounds/").concat(e),t)},getOneUser:function(e,t,a){return Pe.get("".concat("/v1/verses","/rounds/").concat(e,"/users/").concat(t),a)},createVerse:function(e,t){return Pe.post("/v1/verses",e,t)},deleteVerse:function(e,t){return Pe.delete("".concat("/v1/verses","/").concat(e),t)}},Ae={getAllVerseScoreCards:function(e,t,a){var n="advanced"===t?"scorecards":"basicscorecards";return Pe.get("".concat("/v1/verses","/").concat(e,"/").concat(n),a)},getOne:function(e,t,a){var n="".concat("/v1/verses","/").concat(e,"/scorecards/").concat(t);return Pe.get(n,a)},create:function(e){var t=e.scoreCard,a=e.scoringType,n=e.axiosOptions,r="advanced"===a?"scorecards":"basicscorecards",s="".concat("/v1/verses","/").concat(t.verse_id,"/").concat(r);return Pe.post(s,t,n)},update:function(e){var t=e.scoreCard,a=e.scoringType,n=e.userId,r=e.axiosOptions,s="advanced"===a?"scorecards":"basicscorecards",l="".concat("/v1/verses","/").concat(t.verse_id,"/").concat(s,"/").concat(n);return Pe.put(l,t,r)},delete:function(e,t,a,n){var r="advanced"===t?"scorecards":"basicscorecards",s="".concat("/v1/verses","/").concat(e,"/").concat(r,"/").concat(a);return Pe.delete(s,n)},getStandardScorecardFields:function(e){return Pe.get("/v1/standard-scorecard-fields",e)}},ke={getTypes:function(e){return Pe.get("/v1/reactions",e)},getAllUserBattle:function(e,t,a){return Pe.get("/v1/battles/".concat(e,"/verse-reactions/").concat(t),a)},getAllVerseReactions:function(e,t){return Pe.get("".concat("/v1/verses","/").concat(e,"/reactions"),t)},create:function(e,t){return Pe.post("".concat("/v1/verses","/").concat(e.verseId,"/reactions"),e,t)},update:function(e,t){return Pe.put("".concat("/v1/verses","/").concat(e.verseId,"/reactions/").concat(e.userId),{typeId:e.typeId},t)},delete:function(e,t){return Pe.delete("".concat("/v1/verses","/").concat(e.verseId,"/reactions/").concat(e.userId),t)}},Se={getAll:function(e){return Pe.get("/v1/battle-options",e)},getRoleId:function(e,t){return Pe.get("".concat("/v1/battle-options","/BattleRole/").concat(e),t)}},Ie={validateId:function(e,t){return Pe.get("".concat("/v1/youtube-utility","/validate/").concat(e),t)}},Te={getAllUser:function(e,t){return Pe.get("".concat("v1/notifications","/").concat(e),t)},setAllSeen:function(e,t,a){return Pe.put("".concat("v1/notifications","/").concat(e),{notificationType:t},a)},update:function(e,t,a,n){return Pe.put("".concat("v1/notifications","/").concat(e,"/").concat(t),a,n)},create:function(e,t,a){return Pe.post("".concat("v1/notifications","/").concat(e),t,a)}},Re={getAllUser:function(e,t,a){return Pe.get("".concat("v1/relationships","/").concat(e,"/").concat(t),a)},getOneType:function(e,t,a,n){return Pe.get("".concat("v1/relationships","/").concat(e,"/").concat(t,"/").concat(a),n)},create:function(e,t){var a=Object(Ne.a)(e,3),n=a[0],r=a[1],s=a[2];return Pe.post("".concat("v1/relationships","/").concat(n,"/").concat(r),{relationship:s},t)},update:function(e,t){var a=Object(Ne.a)(e,2),n=a[0],r=a[1];return Pe.put("".concat("v1/relationships","/").concat(n,"/").concat(r),{},t)},delete:function(e,t){var a=Object(Ne.a)(e,2),n=a[0],r=a[1];return Pe.delete("".concat("v1/relationships","/").concat(n,"/").concat(r),t)}},je={getAllUser:function(e,t){return Pe.get("".concat("v1/favorite-rappers","/").concat(e),t)},getOne:function(e,t,a){return Pe.get("".concat("v1/favorite-rappers","/").concat(e,"/").concat(t),a)},create:function(e,t){var a=Object(Ne.a)(e,2),n=a[0],r=a[1];return Pe.post("".concat("v1/favorite-rappers","/").concat(n),r,t)},update:function(e,t,a){return Pe.put("".concat("v1/favorite-rappers","/").concat(e),t,a)},delete:function(e,t){var a=Object(Ne.a)(e,2),n=a[0],r=a[1];return Pe.delete("".concat("v1/favorite-rappers","/").concat(n,"/").concat(r),t)}},we={getAll:function(e){return Pe.get("".concat("/v1/battle-requests"),e)},getAllUser:function(e,t){return Pe.get("".concat("/v1/battle-requests","/").concat(e),t)},getOne:function(e,t,a){return Pe.get("".concat("/v1/battle-requests","/").concat(e,"/").concat(t),a)},create:function(e,t){var a=Object(Ne.a)(e,2),n=a[0],r=a[1];return Pe.post("".concat("/v1/battle-requests","/").concat(n),r,t)},update:function(e,t,a,n){return Pe.put("".concat("/v1/battle-requests","/").concat(e,"/").concat(t),a,n)},updateRequestedStatus:function(e,t){var a=Object(Ne.a)(e,4),n=a[0],r=a[1],s=a[2],l=a[3];return Pe.put("".concat("/v1/battle-requests","/").concat(r,"/requested-contestants/").concat(n,"/").concat(s),l,t)},delete:function(e,t){var a=Object(Ne.a)(e,2),n=a[0],r=a[1];return Pe.delete("".concat("/v1/battle-requests","/").concat(n,"/").concat(r),t)}},Be={getAll:function(e){return Pe.get("/v1/tournaments",e)},getOne:function(e,t){return Pe.get("".concat("/v1/tournaments","/").concat(e),t)},createContestant:function(e,t,a){return Pe.post("".concat("/v1/tournaments","/").concat(e,"/contestants"),t,a)}},Ue={USER_UTILS:xe,PROFILE_UTILS:ye,BATTLE_UTILS:Ce,VERSE_UTILS:Oe,SCORE_CARD_UTILS:Ae,VERSE_REACTION_UTILS:ke,BATTLE_ROLE_UTILS:{getAll:function(e){return Pe.get("/v1/battle-roles",e)},getOne:function(e,t){return Pe.get("".concat("/v1/battle-roles","/").concat(e),t)}},BATTLE_OPTION_UTILS:Se,BATTLE_RATING_UTILS:{getAll:function(e,t){return Pe.get("".concat("/v1/battles","/").concat(e,"/ratings"),t)},getOne:function(e,t,a){return Pe.get("".concat("/v1/battles","/").concat(e,"/ratings/").concat(t),a)},create:function(e,t){return Pe.post("".concat("/v1/battles","/").concat(e.battle_id,"/ratings"),e,t)},update:function(e,t){return Pe.put("".concat("/v1/battles","/").concat(e.battle_id,"/ratings/").concat(e.user_id),e,t)},delete:function(e,t,a){return Pe.delete("".concat("/v1/battles","/").concat(e,"/ratings/").concat(t),a)}},YOUTUBE_UTILS:Ie,PARTICIPANT_UTILS:{getAllBattle:function(e,t){return Pe.get("".concat("v1/battles","/").concat(e,"/participants"),t)},getAllUser:function(e,t){return Pe.get("v1/user-battles/".concat(e),t)},updateParticipant:function(e,t){var a=e.battle_id,n=e.user_id;return Pe.put("".concat("v1/battles","/").concat(a,"/participants/").concat(n),e,t)}},SUBSCRIPTION_UTILS:{getAllUser:function(e,t){return Pe.get("".concat("v1/subscriptions","/").concat(e),t)},create:function(e,t,a){return Pe.post("".concat("v1/subscriptions","/").concat(e),{subscriptions:t},a)},delete:function(e,t,a){return Pe.delete("".concat("v1/subscriptions","/").concat(e,"/").concat(t),a)}},NOTIFICATION_UTILS:Te,AUDIENCE_UTILS:{findAllBattle:function(e,t){return Pe.get("".concat("/v1/battles","/").concat(e,"/audience"),t)},findAllBattleFollowersCount:function(e,t){return Pe.get("".concat("/v1/battles","/").concat(e,"/followers-count"),t)}},RELATIONSHIP_UTILS:Re,FAVORITE_RAPPERS:je,BATTLE_REQUEST_UTILS:we,BATTLE_CHALLENGE_UTILS:{getAllRequests:function(e,t){return Pe.get("".concat("/v1/battle-challenges","/").concat(e,"/requests"),t)},getOneRequest:function(e,t,a){return Pe.get("".concat("/v1/battle-challenges","/").concat(t,"/requests/").concat(e),a)},createRequest:function(e,t,a){return Pe.post("".concat("/v1/battle-challenges","/").concat(e,"/requests"),t,a)},updateRequest:function(e,t,a,n){return Pe.put("".concat("/v1/battle-challenges","/").concat(t,"/requests/").concat(e),a,n)},deleteRequest:function(e,t,a){return Pe.delete("".concat("/v1/battle-challenges","/").concat(t,"/requests/").concat(e),a)}},TOURNAMENT_UTILS:Be},Pe=pe.a.create({baseURL:L});var _e={BATTLE_HELPER:oe,VERSE_HELPER:de,MAIN_HELPER:re,ROUTE_BUILDER:ue,HANDLE_ASYNC_ERROR:function(e){if(pe.a.isCancel(e))return{message:"Request canceled",data:e.message};if(e.response&&401===e.response.status)return ve.push("/welcome");var t=e.response;if(t){var a=t.status,n=t.data;switch(a){case 401:return ve.push("/welcome");case 404:"Video not found"===n&&(n+=".\nPlease submit a video that exists.");break;default:console.log(t.data)}console.log("Error: ".concat(e))}}};function De(e){var t=e.history,a=e.isNicknameSet,n=e.handleLogout,s=[new ue(!0,"/battles/create",Xr),new ue(!0,"/battles/find",bs),new ue(!0,"/battles/:id",gs),new ue(!0,"/people/:id",Zr),new ue(!0,"/profile/:id",rs),new ue(!0,"/tournaments/:id",Es),new ue(!1,"/help",ss),new ue(!1,"/",zr)];return r.a.createElement(m.a,{history:t},r.a.createElement(T.a,null,a?s.map(function(e){var t=e.path,a=e.isExact,n=e.component;return r.a.createElement(p.a,{key:t,exact:a,path:t,render:function(e){return r.a.createElement(n,Object.assign({key:e.location.pathname},e))}})}):r.a.createElement(p.a,{exact:!1,path:"/",render:function(){return r.a.createElement(vs,{handleLogout:n})}})))}var Le=a(415),Me=a(368),Fe=a(369),Ve=a(5),qe=a(7);function Ge(e){var t=e.message,a=e.isConfirmModal,n=e.confirmButtonProps,s=e.handleConfirmOnClick,l=e.handleCloseOnClick;return r.a.createElement(Le.a,{backdrop:!0,isOpen:!0,style:{top:"10vh"},contentClassName:"bg-darker rounded-0"},r.a.createElement("div",{className:"d-flex justify-content-between p-2 border-bottom-0 rounded-0 bg-darkest modal-header"},r.a.createElement("h3",{className:"flex-fill m-0"},"ALERT"),r.a.createElement(N.a,{close:!0,onClick:l,className:"p-0 m-1 text-danger close"},r.a.createElement(qe.a,{icon:Ve.z}))),r.a.createElement(Me.a,{className:"d-flex flex-column justify-content-around p-3 bg-darker alert-body"},"string"===typeof t?t.split("\n").map(function(e,t){return r.a.createElement("p",{key:e+t,className:"m-0 ".concat(e.includes("WARNING")?"text-sm text-danger":"")},e)}):JSON.stringify(t)),r.a.createElement(Fe.a,{className:"p-0 border-top-0"},r.a.createElement(N.a,{outline:!0,size:"md",id:"close",onClick:l,className:"m-0 px-5 rounded-0 ".concat(a?"btn-outline-secondary":"btn-outline-primary")},a?"Cancel":"Close"),a&&r.a.createElement(N.a,Object.assign({outline:!0,size:"md",id:"confirm"},n,{onClick:function(e){return s(e)},className:"btn-outline-primary m-0 px-5 rounded-0"}),"Confirm")))}var ze=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={isOpen:!1},a.toggle=a.toggle.bind(Object(f.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(f.a)(a)),a.handleClose=a.handleClose.bind(Object(f.a)(a)),a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"toggle",value:function(){var e=this;this.setState(function(e){return{isOpen:!e.isOpen}},function(){var t=e.props.setIsEditing;t&&t()})}},{key:"handleSubmit",value:function(e){var t=this.props.handleSubmit;t&&t(e),this.toggle()}},{key:"handleClose",value:function(){var e=this.props.handleClose;e&&e(),this.toggle()}},{key:"render",value:function(){var e=this.state.isOpen,t=this.props,a=t.headerText,s=t.toggleButtonContent,l=t.toggleButtonProps,i=t.toggleIconProps,o=t.isSubmitDisabled,c=t.submitForm,d=t.bodyClassName,u=t.submitButtonText,m=t.closeButtonText,p=t.closeButtonClassName,h=t.children;return r.a.createElement(n.Fragment,null,r.a.createElement(N.a,Object.assign({},l,{onClick:this.toggle}),s||r.a.createElement(qe.a,i)),r.a.createElement(Le.a,{backdrop:!0,isOpen:e,toggle:this.toggle,style:{top:"10vh"},contentClassName:"bg-darker rounded-0"},r.a.createElement("div",{className:"d-flex justify-content-between p-2 border-bottom-0 rounded-0 bg-darkest modal-header"},r.a.createElement("h3",{className:"flex-fill m-0"},a),r.a.createElement(N.a,{close:!0,onClick:this.handleClose,className:"p-0 m-1 text-danger close"},r.a.createElement(qe.a,{icon:Ve.z}))),r.a.createElement(Me.a,{style:{minHeight:"25vh"},className:"p-3 bg-darker ".concat(d||"")},h),r.a.createElement(Fe.a,{className:"flex-nowrap p-0 border-top-0"},r.a.createElement(N.a,{outline:!0,block:!0,size:"lg",onClick:this.handleSubmit,disabled:o,form:c,className:"btn-outline-primary m-0 rounded-0 text-capitalize"},u||"confirm"),r.a.createElement(N.a,{outline:!0,size:"lg",id:"cancel",onClick:this.handleClose,className:"btn-outline-secondary m-0 px-5 border-left-0 rounded-0 ".concat(p)},m||"close"))))}}]),t}(n.Component),He=a(370),We=a(371),Je=a(372),Qe=a(176);function Ye(e){var t=e.titleText,a=e.subheadingText,s=e.isContentCollapsible,l=e.navbarProps,i=e.children,o=window.screen.width<576,c=Object(n.useState)(!o),d=Object(Ne.a)(c,2),u=d[0],m=d[1];return r.a.createElement(He.a,Object.assign({},l,{className:"d-flex align-items-stretch w-100 z-index-300 py-0 px-2 pr-xl-5 border-bottom border-primary bg-darkest navbar-expand-sm ".concat(o&&u?"pb-2":"")}),r.a.createElement("div",{className:"d-flex align-items-center"},r.a.createElement(We.a,{tag:"div",className:"d-flex align-items-center p-0"},r.a.createElement("p",{className:"mx-0 my-2 rotated-text ".concat(o?"text-sm":"text-xl")},"SFB"),r.a.createElement("div",{className:"mx-2 text-left"},r.a.createElement("h1",{className:"m-0 text-capitalize ".concat(o?"text-xl":"")},t),a&&r.a.createElement("div",{className:"d-flex justify-content-around"},a.map(function(e){return r.a.createElement("p",{key:e,className:"m-0 font-italic ".concat(o?"text-sm":"")},e)})))),s&&r.a.createElement(Je.a,{onClick:function(){return m(!u)},className:"border-0 ml-auto text-primary outline-none"},r.a.createElement(qe.a,{fixedWidth:!0,icon:u?Ve.h:Ve.f}))),s?r.a.createElement(Qe.a,{navbar:!0,isOpen:u,className:"flex-fill px-2 px-sm-0"},i):i)}var Xe=a(378),Ze=a(374),Ke=a(375),$e=a(376),et=a(377);function tt(e){var t=e.option;return r.a.createElement(A.a,{sm:6},r.a.createElement(Ze.a,{className:"form-group-lg text-left mx-3 mx-lg-5"},r.a.createElement(Ke.a,{for:t.id,className:"d-flex justify-content-between align-items-center mb-0"},t.text,r.a.createElement(qe.a,{id:"".concat(t.id,"-info"),icon:Ve.p,className:"text-info"})),r.a.createElement($e.a,{required:!0,type:"select",name:t.id,id:t.id,className:"rounded-0 border-0 bg-darker-50 text-secondary text-capitalize"},!t.isAdvancedOption&&r.a.createElement("option",{value:"0",className:"bg-darker"},"-- Choose One --"),t.choices.map(function(e){var a=oe.getBattleFormChoiceText(e.definition,t.id);return r.a.createElement("option",{key:e.id,value:e.id,className:"text-capitalize bg-darker"},a)})),r.a.createElement(et.a,null,"This is a required field."),r.a.createElement(Hn,{targetId:"".concat(t.id,"-info"),placement:"left"},t.description.split("\n").map(function(e,t){return r.a.createElement("span",{key:e+t,className:"d-block text-left"},e)}))))}function at(e){var t=e.userId,a=e.options,n=e.isAdvancedOptionsOpen,s=e.handleCreateBattle,l=e.setChallengerUserId,i=e.toggleAdvancedOptionsIsOpen,o=z.map(function(e){var t=e.id,n=e.isAdvancedOption,r=a[t];return n&&r.sort(function(e,t){return e.definition-t.definition}),Object(h.a)({},e,{choices:r})}),c=function(e){return e.map(function(e,t){return r.a.createElement(tt,{key:t,option:e})})},d=o.filter(function(e){return!e.isAdvancedOption}),u=o.filter(function(e){return e.isAdvancedOption}),m=c(d),p=c(u);return m.splice(1,0,r.a.createElement(A.a,{key:-1,sm:6},r.a.createElement(Yn,{userId:t,labelText:"Call 'Em Out",placeholderText:"Challenge another rapper",isOptional:!0,isTooltipShown:!0,setChallengerUserId:l,requestedRappers:[],inputClassName:"bg-darker-50"}))),r.a.createElement(Xe.a,{id:"create-battle-form",onSubmit:s,className:"mx-sm-5 py-3 px-md-4 bg-darkest create-battle-form"},r.a.createElement(O.a,{form:!0},m),r.a.createElement(O.a,{form:!0,className:"text-left"},r.a.createElement(A.a,null,r.a.createElement(N.a,{color:"link",onClick:i,className:"px-3 text-secondary text-left text-xl text-decoration-none"},r.a.createElement(qe.a,{fixedWidth:!0,size:"lg",icon:n?Ve.c:Ve.d}),r.a.createElement("span",null,"More Options")))),r.a.createElement(Qe.a,{isOpen:n},r.a.createElement(O.a,{form:!0},p)),r.a.createElement(N.a,{outline:!0,type:"submit",className:"btn btn-lg btn-outline-primary d-block ml-auto mr-3 rounded-0"},"Create It"))}var nt=a(382),rt=a(22),st=a(380),lt=a(381),it=a(40);function ot(e){var t=e.emptyStarIcon,a=e.fullStarIcon,s=e.gavelIcon,l=e.microphoneIcon,i=Object(n.useContext)(g).user,o=i.profile,c=i.user_id,d=i.nickname,u=o.popularity,m=o.battle_count,p=o.win_count,h=o.loss_count,f=o.draw_count,b=o.follower_count,v=o.battle_rating,E=o.battle_reputation,x=o.judge_reputation,y=re.getWinRatio(m,p,f),N=re.getPopularityColor(u);return r.a.createElement("div",{className:"px-2 pb-md-1"},r.a.createElement(st.a,{to:"/profile/".concat(c),className:"d-block text-secondary text-decoration-none"},r.a.createElement("h1",{style:{letterSpacing:"3px"},className:"mb-0 w-100 text-truncate ".concat(d&&d.length<=13?"text-xxl":"text-xl")},d)),r.a.createElement("div",{className:"d-flex"},r.a.createElement("div",{className:"d-flex"},r.a.createElement("div",{className:"flex-fill py-1"},r.a.createElement(it.a,{readonly:!0,className:"sidebar-rating",emptySymbol:t,fullSymbol:a,placeholderSymbol:a,placeholderRating:4.5,initialRating:E,direction:"rtl"}),l),r.a.createElement("div",{className:"flex-fill py-1"},r.a.createElement(it.a,{readonly:!0,className:"sidebar-rating",emptySymbol:t,fullSymbol:a,placeholderSymbol:a,placeholderRating:4.5,initialRating:x,direction:"rtl"}),s)),r.a.createElement("div",{className:"d-flex flex-column flex-grow-2 flex-fill px-4 px-sm-2 px-md-4"},r.a.createElement(Ke.a,{style:{letterSpacing:"10px",lineHeight:"1em"},className:"d-block text-xxl mb-0"},v),r.a.createElement("div",{className:"mt-2"},r.a.createElement("div",{className:"d-flex mb-1"},r.a.createElement("div",{className:"flex-fill"},r.a.createElement(Ke.a,{style:{lineHeight:"0.75em"},className:"d-block mb-0 font-weight-bold text-md"},"W/L"),r.a.createElement(Ke.a,{className:"d-block mb-0 text-sm"},"".concat(p," / ").concat(h))),r.a.createElement("div",{className:"flex-fill"},r.a.createElement(Ke.a,{style:{lineHeight:"0.75em"},className:"d-block mb-0 font-weight-bold text-md"},"Ratio"),r.a.createElement(Ke.a,{className:"d-block mb-0 text-sm"},y))),r.a.createElement(Ke.a,{style:{lineHeight:"1em"},className:"d-block text-sm my-1"},r.a.createElement("span",null,m),"\xa0battles"),r.a.createElement(Ke.a,{style:{lineHeight:"1em"},className:"d-block text-sm my-1"},r.a.createElement("span",null,b),"\xa0followers")),r.a.createElement("div",{className:"position-relative my-auto mx-sm-3 mx-md-0"},r.a.createElement(lt.a,{value:u,className:"rounded-0 bg-darker popularity-progress ".concat(N)},r.a.createElement(Ke.a,{className:"m-auto"}))))))}a(224);var ct={faMicrophone:Ve.q,faUserFriends:Ve.E,faComments:Ve.k};function dt(e){var t=e.handleSetNotificationsAsSeen;return r.a.createElement(v,null,function(e){var a=e.notifications,n=e.methodData.updateUser,s=e.user.user_id;return r.a.createElement("div",{id:"sidebarMenuCollapse",className:"d-flex flex-column flex-sm-row flex-md-column py-1 border-bottom border-primary bg-darkest sidebar-collapse"},r.a.createElement(ot,{fullStarIcon:r.a.createElement(qe.a,{fixedWidth:!0,icon:Ve.w,size:"xs"}),emptyStarIcon:r.a.createElement(qe.a,{fixedWidth:!0,icon:rt.c,size:"xs"}),gavelIcon:r.a.createElement(qe.a,{fixedWidth:!0,icon:Ve.m,size:"lg",className:"d-block mx-auto"}),microphoneIcon:r.a.createElement(qe.a,{fixedWidth:!0,icon:Ve.q,size:"lg",className:"d-block mx-auto"})}),r.a.createElement(nt.a,{divider:!0,className:"my-0 d-sm-none d-md-block"}),r.a.createElement("div",{id:"notification-buttons",className:"flex-fill border-left border-primary"},r.a.createElement("div",{className:"d-flex justify-content-around py-1 border-bottom border-dark"},W.map(function(e){var l=e.category,i=e.icon,o=a.filter(function(e){return e.Notification.category.includes(l)});return r.a.createElement(Vn,{key:l,type:l,icon:ct[i],notifications:o,userId:s,updateUser:n,handleSetNotificationsAsSeen:t})})),r.a.createElement(er,{activeTab:1,isUserProfileOwner:!0,profileUserId:s})))})}var ut=a(72);function mt(e){var t=e.value,a=e.isEditing,n=e.toggleIsEditing,s=e.handleUpdateInfo,l=[{order:0,buttonProps:{onClick:n,disabled:!1},iconProps:{icon:a?Ve.z:Ve.s,className:"no-pointer-events ".concat(a?"text-warning":"text-info")}},{order:1,buttonProps:{onClick:s,disabled:!t},iconProps:{icon:Ve.e,className:"text-success no-pointer-events"}},{order:2,buttonProps:{disabled:!t,"data-is-delete":!0,onClick:s},iconProps:{icon:Ve.A,className:"text-danger no-pointer-events"}}];return r.a.createElement("div",{className:"d-flex justify-content-between my-1 ".concat(a?"isEditing":"")},l.map(function(e){var t=e.order,a=e.buttonProps,n=e.iconProps;return r.a.createElement(N.a,Object.assign({key:t},a,{className:"mx-1 p-0 bg-transparent rounded-0 border-0 edit-button order-".concat(t)}),r.a.createElement(qe.a,n))}))}var pt=ae.MESSAGE_INVALID_INPUT_CHARACTERS,ht=ae.CLASS_METHOD_NAMES.PROFILE_METHOD_NAMES.EDIT_GROUP_NAMES,ft=_e.MAIN_HELPER,gt=function(e){function t(e){var a;Object(i.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={value:e.value,isEditing:!1};for(var n=0;n<ht.length;n++){var r=ht[n];a[r]=a[r].bind(Object(f.a)(a))}return a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"handleInputKeyUp",value:function(e){var t,a=e.keyCode;13===a?t=this.handleUpdateInfo:27===a&&(t=this.handleCancel),t&&t(e)}},{key:"handleCancel",value:function(){for(var e=document.querySelectorAll(":hover"),t=!1,a=0;a<e.length;a++)if(e[a].classList.contains("edit-button")){t=!0;break}if(!t){var n=this.props.value;this.setState(function(){return{value:n,isEditing:!1}})}}},{key:"toggleIsEditing",value:function(){var e=this.props,t=e.isUserProfileOwner,a=e.value;t&&this.setState(function(e){return{value:a,isEditing:!e.isEditing}})}},{key:"handleValueChange",value:function(e){var t=e.target.value;this.setState(function(e){return t!==e.value?{value:t}:null})}},{key:"handleUpdateInfo",value:function(e){var t=e.target,a=this.state.value,n=this.props,r=n.text,s=n.handleUpdateInfo;if(!ft.isTextValid(a))return(0,this.context.masterData.handleOpenAlert)(pt,!1);var l=t.getAttribute("data-is-delete")?null:a;this.setState(function(){return{value:l,isEditing:!1}}),s(Object(ut.a)({},r,l))}},{key:"render",value:function(){var e=this.state,t=e.isEditing,a=e.value,n=this.props,s=n.text,l=n.isUserProfileOwner;return r.a.createElement(C.a,{fluid:!0,className:"d-flex flex-column position-relative px-md-1 border-0 rounded-0 bg-transparent edit-group"},r.a.createElement(Ke.a,{for:s,onClick:l?this.toggleIsEditing:null,style:{letterSpacing:"0.25em"},className:"position-relative mb-0 font-weight-bolder text-sm text-uppercase edit-button"},r.a.createElement("span",null,s),l&&r.a.createElement(qe.a,{size:"sm",icon:Ve.s,className:"position-absolute mx-2 mx-md-0 text-info edit-group-icon ".concat(t?"editing":"")})),l&&t?r.a.createElement("div",{style:{top:20},className:"position-absolute overlay bg-darkest"},r.a.createElement($e.a,{id:s,"data-field":s,type:"text",bsSize:"sm",placeholder:a||"edit",value:a||"",readOnly:t?"":"readonly",onBlur:this.handleCancel,onClick:t?null:this.toggleIsEditing,onChange:this.handleValueChange,onKeyUp:this.handleInputKeyUp,className:"h-50 rounded-0 border-0 bg-darker"}),r.a.createElement(mt,{value:a,isEditing:t,toggleIsEditing:this.toggleIsEditing,handleUpdateInfo:this.handleUpdateInfo})):r.a.createElement(Ke.a,{id:s,onClick:l?this.toggleIsEditing:null,style:{letterSpacing:"0.15em"},className:"mb-0 rounded-0 text-sm text-truncate edit-button"},a||"N/A"))}}]),t}(n.Component);gt.contextType=E;var bt=a(388),vt=a(389),Et=a(390);function xt(e){var t=e.onClick,a=e.children;return r.a.createElement(N.a,{outline:!0,"aria-expanded":"false","aria-controls":"sidebarMenuCollapse",onClick:t,className:"flex-fill d-flex justify-content-around align-items-center btn btn-outline-primary py-0 px-2 py-sm-2 rounded-0"},a)}var yt=a(384),Nt=(a(385),a(386));var Ct=a(387);function Ot(e){var t=e.text,a=e.userId,n=e.handleClick,s=e.children,l="".concat("battle"===t?"battles/find":t,"/").concat(["help","logout","battle"].includes(t)?"":a);return r.a.createElement(Ct.a,{onClick:function(){return n(l)},className:"d-flex flex-column flex-md-row justify-content-between flex-fill btn btn-outline-secondary btn-block p-2  pb-sm-0 px-sm-0 p-md-0 rounded-0 border-top-0 nav-list-item"},r.a.createElement("span",{className:"d-none d-sm-inline-block order-1 order-md-0 text-xs nav-item-text"},t),s)}a(225);var At={faHome:Ve.n,faMicrophone:Ve.q,faUserFriends:Ve.E,faUser:Ve.C,faInfo:Ve.o,faSignOutAlt:Ve.v};function kt(e){var t=e.goTo,a=e.toggleMenu,n=e.handleLogout;return r.a.createElement(v,null,function(e){var s=e.notifications,l=e.user.user_id,i=s.filter(function(e){return!e.is_seen}).length,o=i>0,c=o?"text-primary":"text-dark";return r.a.createElement(bt.a,{className:"d-flex flex-md-column flex-nowrap bg-darkest sidebar"},r.a.createElement(vt.a,{className:"d-flex flex-column"},r.a.createElement(xt,{onClick:a},r.a.createElement(qe.a,{icon:Ve.a,className:"mx-1 text-dark nav-item-collapse-icon"}),r.a.createElement("div",{className:"flex-fill d-flex flex-column align-items-center"},r.a.createElement(qe.a,{fixedWidth:!0,icon:Ve.b,className:c}),r.a.createElement(Et.a,{className:"px-0 pb-0 bg-transparent rounded-0 ".concat(c)},o&&i)))),G.map(function(e,a){var s=e.icon,i=e.text;return r.a.createElement(vt.a,{key:a,className:"d-flex flex-column flex-fill"},r.a.createElement(Ot,{text:i,userId:l,handleClick:"logout"===i?n:t},r.a.createElement(qe.a,{fixedWidth:!0,icon:At[s],className:"align-self-center ml-md-2 mr-md-3 nav-item-icon"})))}))})}var St=a(177),It=a(394),Tt=a(395),Rt=a(391),jt=a(392),wt=a(393),Bt=a(74);function Ut(e){var t=e.userId,a=e.battleStatus,n=e.battleCloseDate,s=e.contestants,l=e.resultCards,i=e.updateBattle,o=0,c=0,d=0,u=0;if(l){var m=l.contestant1,p=l.contestant2,h=m.finalScore,f=m.judgeTotal,g=m.judgeScores,b=p.finalScore,v=p.judgeTotal,E=p.judgeScores;o=parseFloat(h),c=parseFloat(b);var x=parseFloat(f/g.length),y=parseFloat(v/E.length);d=Number(Math.round(o-x+"e2")+"e-2").toFixed(3),u=Number(Math.round(c-y+"e2")+"e-2").toFixed(3)}var N=s.map(function(e,a){var n=e.participant_number,s=1===n?o:c,l=1===n?c:o,i=s>l,m=s===l,p=1===n?d:u,h=p<0;return r.a.createElement(A.a,{key:e.user_id,xs:"12",sm:"6",md:"5",className:"p-sm-0 ".concat(0===a?"order-2 order-md-1 inner":"order-3 inner-other")},r.a.createElement(Rt.a,{className:"mb-5 mb-sm-0 bg-darkest-75 rounded-0 border-left-0 border-top-0 border-right-0 review-card contestant-win-status ".concat(1===n?"left":"right"," ").concat(m||i?"":"border-danger"," ").concat(i?"border-success":"")},r.a.createElement(jt.a,{tag:"h3",className:"py-1 text-truncate bg-darkest border-bottom ".concat(m?"text-info":""," ").concat(!m&&i?"border-success":""," ").concat(m||i?"":"border-danger")},r.a.createElement(tr,{id:"contestant-seat-overview-".concat(e.participant_number),userId:t,labelText:e.User.nickname,profile:e.User.Profile,userProfileUrl:"/profile/".concat(e.user_id)})),r.a.createElement(wt.a,{className:"d-flex flex-column justify-content-between p-0"},r.a.createElement("p",{className:"my-auto font-weight-bold contestant-score"},1===n?Number(Math.round(o+"e2")+"e-2").toFixed(1):Number(Math.round(c+"e2")+"e-2").toFixed(1)),r.a.createElement("div",{className:"d-flex justify-content-center align-items-center px-5 mb-5"},r.a.createElement("p",{className:"d-flex flex-column m-0 text-sm"},r.a.createElement("span",null,"Audience"),r.a.createElement("span",null,"Influence")),r.a.createElement("div",{className:"d-flex align-items-center mx-3 ".concat(h?"text-warning":"text-info")},r.a.createElement(qe.a,{fixedWidth:!0,icon:h?Ve.r:Ve.u}),r.a.createElement("span",{className:"flex-fill text-xxl"},Math.abs(p)||0))))))});return r.a.createElement(C.a,{fluid:!0,className:"p-3 p-md-4 round-wrapper"},r.a.createElement(O.a,null,N,r.a.createElement(A.a,{xs:"12",md:"2",className:"d-flex flex-column flex-sm-row flex-md-column order-1 order-md-2 p-0"},r.a.createElement("div",{className:"flex-fill"},r.a.createElement("h3",{className:"mb-0 text-capitalize"},"overview"),r.a.createElement("p",{className:"text-capitalize mb-0"},"closed"===a?"Battle Closed":a),"scoring"===a&&r.a.createElement(Bt.a,{key:a,date:n,renderer:function(e){var t=e.days,n=e.hours,s=e.minutes,l=e.seconds,i=e.completed;return"closed"===a?r.a.createElement("p",{className:"flex-fill"},"Battle Closed"):i?r.a.createElement("p",{className:"flex-fill"},"Round Over"):t>=1?r.a.createElement("p",null,r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:"text-xxl"},t,r.a.createElement("span",{className:"text-sm"},"d"),"\xa0"),n>0&&r.a.createElement("span",{className:"text-xl"},n,r.a.createElement("span",{className:"text-sm"},"hr")))):r.a.createElement("p",null,r.a.createElement(r.a.Fragment,null,n>0&&r.a.createElement("span",{className:"text-xxl"},n,r.a.createElement("span",{className:"text-sm"},"hr"),"\xa0"),r.a.createElement("span",{className:"".concat(n>0?"text-xl":"text-xxl")},s,r.a.createElement("span",{className:"text-sm"},"min"),"\xa0"),n>0||r.a.createElement("span",{className:"text-xl"},l,r.a.createElement("span",{className:"text-sm"},"sec"))))},onComplete:i})),r.a.createElement("div",{className:"d-none d-md-block flex-fill"},r.a.createElement("p",{className:"m-0 font-weight-bold"},"COMING SOON"),r.a.createElement("ul",{className:"list-group list-group-flush flex-row flex-md-column font-italic"},r.a.createElement("li",{className:"list-group-item flex-fill p-0 rounded-0 bg-transparent"},"Live Scores"),r.a.createElement("li",{className:"list-group-item flex-fill p-0 rounded-0 bg-transparent"},"Judge Scores"),r.a.createElement("li",{className:"list-group-item flex-fill p-0 rounded-0 bg-transparent"},"Round Scores"))))))}a(227);var Pt=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={activeIndex:0},a.goToIndex=a.goToIndex.bind(Object(f.a)(a)),a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"goToIndex",value:function(e){this.setState({activeIndex:e})}},{key:"componentDidMount",value:function(){var e=this.props.battle,t=e.Status.definition,a=e.Rounds.length,n="closed"===t?a:a-1;this.setState({activeIndex:n})}},{key:"render",value:function(){var e=this.state.activeIndex,t=this.props,a=t.userId,n=t.battle,s=t.participants,l=t.isUserContestant,i=t.isUserJudge,o=t.reactionTypes,c=t.standardScorecardFields,d=t.resultCards,u=t.updateBattle,m=t.handleJoinLeaveBattle,p=t.handleReadyOnClick,h=t.userNickname,f=n.Status,g=n.closes_at,b=n.BattleChallenge,v=f.definition,E=n.ScoringType.definition,x=n.Rounds,y=!1;if(b){var N=b.BattleChallengeStatus.definition;y="pending"===N}for(var C=0,O=0;O<x.length;O++){var A=x[O].number;C=A>C?A:C}var k=x.map(function(e){return r.a.createElement(St.a,{key:e.id,onExiting:function(){return null},onExited:function(){return null}},r.a.createElement(Lt,{userId:a,userNickname:h,round:e,isPendingInvite:y,battleChallenge:b,currentRoundNumber:C,battleStatus:v,scoringType:E,contestants:s.contestants,isUserContestant:l,isUserJudge:i,reactionTypes:o,standardScorecardFields:c,handleJoinLeaveBattle:m,updateBattle:u,handleReadyOnClick:p}))});return"closed"!==v&&"scoring"!==v||k.push(r.a.createElement(St.a,{key:n.Status.id,onExiting:function(){return null},onExited:function(){return null}},r.a.createElement(Ut,{userId:a,battleStatus:v,battleCloseDate:g,contestants:s.contestants,resultCards:d,updateBattle:u}))),r.a.createElement(It.a,{interval:!1,keyboard:!1,pause:!1,activeIndex:e,next:function(){return null},previous:function(){return null}},r.a.createElement(Tt.a,{items:k,activeIndex:e,onClickHandler:this.goToIndex,className:"mb-md-5 pt-1 pt-sm-4 rounded-pill"}),k)}}]),t}(n.Component),_t=a(37),Dt=a.n(_t);function Lt(e){var t=e.userId,a=e.round,n=e.currentRoundNumber,s=e.battleStatus,l=e.scoringType,i=e.contestants,o=e.isUserContestant,c=e.isUserJudge,d=e.userNickname,u=e.reactionTypes,m=e.standardScorecardFields,p=e.updateBattle,h=e.handleJoinLeaveBattle,f=e.handleReadyOnClick,g=e.isPendingInvite,b=e.battleChallenge,v=Dt()(a.ends_at).utc().diff(Dt()().utc()),E="staging"===s,x="closed"===s,y=v<=0,N=i.map(function(e,i){return r.a.createElement(A.a,{key:e.id?e.user_id+e.verses.length:i,xs:"12",sm:"6",md:"5",className:"p-sm-0 ".concat(0===i?"order-2 order-md-1 inner":"order-3 inner-other")},r.a.createElement(ta,{userId:t,userNickname:d,roundId:a.id,isPendingInvite:g,battleChallenge:b,currentRoundNumber:n,roundNumber:a.number,battleId:a.battle_id,battleStatus:s,contestant:e,seatNumber:i+1,scoringType:l,isUserContestant:o,isUserJudge:c,isStagingPhase:E,isRoundEnded:y,isBattleClosed:x,reactionTypes:u,standardScorecardFields:m,handleJoinLeaveBattle:h,handleReadyOnClick:f}))});return r.a.createElement(C.a,{fluid:!0,className:"p-3 p-md-4 round-wrapper"},r.a.createElement(O.a,null,N,r.a.createElement(A.a,{xs:"12",md:"2",className:"d-flex flex-column order-1 mb-3 order-md-2 p-0"},r.a.createElement("h3",{className:"mb-0 text-capitalize"},"staging"===s?s:"round ".concat(a.number)),r.a.createElement(Bt.a,{key:a.id,date:a.ends_at,renderer:function(e){var t=e.days,a=e.hours,n=e.minutes,l=e.seconds,i=e.completed;return"closed"===s?r.a.createElement("p",{className:"flex-fill"},"Battle Closed"):i?r.a.createElement("p",{className:"flex-fill"},"Round Over"):t>=1?r.a.createElement("p",null,r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:"text-xxl"},t,r.a.createElement("span",{className:"text-sm"},"d"),"\xa0"),a>0&&r.a.createElement("span",{className:"text-xl"},a,r.a.createElement("span",{className:"text-sm"},"hr")))):r.a.createElement("p",null,r.a.createElement(r.a.Fragment,null,a>0&&r.a.createElement("span",{className:"text-xxl"},a,r.a.createElement("span",{className:"text-sm"},"hr"),"\xa0"),r.a.createElement("span",{className:"".concat(a>0?"text-xl":"text-xxl")},n,r.a.createElement("span",{className:"text-sm"},"min"),"\xa0"),a>0||r.a.createElement("span",{className:"text-xl"},l,r.a.createElement("span",{className:"text-sm"},"sec"))))},onComplete:p}),r.a.createElement("div",{className:"d-none d-md-block flex-fill"},r.a.createElement("p",{className:"m-0 font-weight-bold"},"COMING SOON"),r.a.createElement("ul",{className:"list-group list-group-flush flex-row flex-md-column font-italic"},r.a.createElement("li",{className:"list-group-item flex-fill p-0 rounded-0 bg-transparent"},"Live Scores"),r.a.createElement("li",{className:"list-group-item flex-fill p-0 rounded-0 bg-transparent"},"Judge Scores"),r.a.createElement("li",{className:"list-group-item flex-fill p-0 rounded-0 bg-transparent"},"Round Scores"))))))}var Mt=a(396),Ft=a(416),Vt=a(75),qt=a(180),Gt=a.n(qt);function zt(e){var t=function(){var t=document.getElementById("video-id").value.trim();e.handleVerseSubmit(t)},a=e.videoId,n=e.isUserThisContestant,s=e.isStagingPhase,l=e.isRoundEnded,i=e.isContestantReady,o=e.dapsCount,c=e.seatNumber,d=e.dissesCount,u=e.scorecardsCount,m=e.handleReadyOnClick,p=n?"Use the controls below to submit a verse for this round.":"Waiting for a verse to be submitted for this round.";n&&s&&(p="You must wait until the battle starts to submit a verse."),!n&&s&&(p="This contestant is ".concat(i?"":"not"," ready to start the battle.")),l&&(p="There was no verse submitted for this round.");var h=e.isPlayerShown,f=e.handleShowPlayer,g=h?r.a.createElement(Vt.a,{videoId:a,opts:{playerVars:{iv_load_policy:3,enablejsapi:1,modestbranding:1,rel:0,autoplay:1,origin:"www.spitfacebattles.com"}},className:"w-100 h-100",containerClassName:"h-100"}):r.a.createElement("div",{className:"h-100"},r.a.createElement(N.a,{onClick:f,className:"p-0 w-100 h-100 border-0"},r.a.createElement("img",{src:F.replace("[videoId]",a),alt:"user",className:"w-100 h-100"})));return r.a.createElement(C.a,{fluid:!0,className:"d-flex flex-column h-100 p-0 verse-card-content"},a?g:r.a.createElement("div",{className:"flex-fill px-3"},r.a.createElement("p",{className:s||!n?"my-3 text-xl":"text-lg"},p),s&&n&&r.a.createElement("div",{className:""},r.a.createElement(N.a,{outline:!0,onClick:m,className:"btn-outline-primary rounded-0"},i?"Unready":"Ready Up!")),!s&&!l&&n&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Mt.a,null,r.a.createElement($e.a,{id:"video-id",onKeyUp:function(e){var a=e.keyCode,n=e.target;return 13===a?t():27===a?n.value="":void 0},placeholder:"Youtube video ID or URL",className:"form-control rounded-0 border-0"}),r.a.createElement(Ft.a,{addonType:"append"},r.a.createElement(N.a,{outline:!0,className:"btn-outline-primary rounded-0",onClick:t},"Spit It!"))),r.a.createElement("small",{className:"d-flex justify-content-center align-items-baseline my-2 text-muted font-italic"},r.a.createElement("img",{src:Gt.a,alt:"Youtube branding",className:"w-25 h-25"}),"\xa0video required"))),r.a.createElement("div",{className:"d-flex justify-content-around border-bottom border-darkest"},r.a.createElement(ea,{type:"daps",iconName:"faThumbsUp",value:o,seatNumber:c}),r.a.createElement(ea,{type:"disses",iconName:"faThumbsDown",value:d,seatNumber:c}),r.a.createElement(ea,{type:"scorecards",iconName:"faStar",value:u,seatNumber:c})))}function Ht(e){var t=e.contestantUserId,a=e.isVerseSubmitted,n=e.seatNumber,s=e.scoringType,l=e.isUserDapped,i=e.isUserDissed,o=e.isUserScored,c=e.userScoreCard,d=e.isUserThisContestant,u=e.isUserContestant,m=e.standardScorecardFields,p=e.handleVerseReaction,h=e.handleScoreCardSubmit,f=e.handleScorecardRemove,g=e.handleJoinBattleClick,b=e.handleLeaveBattleClick,v=e.handleRemoveVerse,E=e.isBattleClosed,x=a&&!d,y=a&&!u,O=y||x?"":"flex-fill";return r.a.createElement(C.a,{fluid:!0,id:"verse-sidebar",className:"d-flex flex-column h-100 p-0"},y&&r.a.createElement(N.a,{outline:!0,block:!0,"data-is-reacted":i,"data-is-other-reacted":l,"data-type-definition":"dis",className:"btn-outline-primary m-0 border-top-0 rounded-0 flex-fill reaction-button",onClick:p},r.a.createElement(qe.a,{size:"lg",icon:i?Ve.x:rt.d,className:"align-self-center mx-auto"})),x&&r.a.createElement(N.a,{outline:!0,block:!0,"data-is-reacted":l,"data-is-other-reacted":i,"data-type-definition":"dap",className:"btn-outline-primary m-0 border-top-0 rounded-0 flex-fill reaction-button",onClick:p},r.a.createElement(qe.a,{size:"lg",icon:l?Ve.y:rt.e,className:"align-self-center mx-auto"})),y&&r.a.createElement(sa,{key:o,isScored:o,userScoreCard:c,scoringType:s,isBattleClosed:E,standardScorecardFields:m,handleScoreCardSubmit:h,handleScorecardRemove:f,toggleIcon:o?Ve.w:rt.c},r.a.createElement(qe.a,{size:"lg",icon:o?Ve.w:rt.c,className:"align-self-center mx-auto"})),r.a.createElement(Yt,{contestantUserId:t,isUserThisContestant:d,isUserContestant:u,isVerseSubmitted:a,direction:1===n?"right":"left",handleJoinBattleClick:g,handleLeaveBattleClick:b,handleRemoveVerse:v,className:O},r.a.createElement(qe.a,{size:"lg",icon:Ve.l,className:"align-self-center mx-auto"})))}var Wt=a(397),Jt=a(417),Qt=a(398);function Yt(e){var t=e.contestantUserId,a=e.isUserThisContestant,n=e.isVerseSubmitted,s=e.direction,l=e.handleLeaveBattleClick,i=e.handleJoinBattleClick,o=e.handleRemoveVerse,c=e.children,d=e.className,u=void 0!==t;return r.a.createElement(Wt.a,{className:"d-flex flex-column p-0 ".concat(d),direction:s},r.a.createElement(Jt.a,{outline:!0,block:!0,className:"btn-outline-primary m-0 px-0 py-2 border-top-0 rounded-0 flex-fill"},c),r.a.createElement(Qt.a,{flip:!1,className:"w-25 p-0 bg-darkest-90 border-0 rounded-0 text-center verse-menu ".concat(s," ").concat(""===d?"move-up":"")},r.a.createElement(nt.a,{header:!0,className:"border-0 bg-darkest-90"},"Options"),!u&&r.a.createElement(nt.a,{tag:"div",className:"text-wrap text-left text-secondary"},r.a.createElement("p",{className:"mb-1"},"No Contestant"),r.a.createElement("p",null,"Join this battle!"),r.a.createElement(N.a,{outline:!0,block:!0,"data-role":"contestant",onClick:i,className:"btn-outline-primary mt-4 rounded-0"},"Join It!")),u&&r.a.createElement(nt.a,{tag:"div"},r.a.createElement(st.a,{to:"/profile/".concat(t),className:"w-100 text-secondary text-decoration-none"},"Profile")),u&&!a&&r.a.createElement(nt.a,{disabled:!0,className:"d-none text-left text-black-50"},"Follow (coming soon)"),a&&n&&r.a.createElement(nt.a,{onClick:o,className:"text-left text-secondary"},"Remove Verse"),a&&r.a.createElement(nt.a,{"data-role":"contestant",onClick:l,className:"text-left text-secondary"},"Leave Battle")))}var Xt=a(183),Zt=a.n(Xt),Kt={faStar:rt.c,faEye:rt.b,faThumbsDown:rt.d,faThumbsUp:rt.e},$t={commafy:!1,shortFormat:!0,shortFormatMinValue:1e3,shortFormatPrecision:1};function ea(e){var t=e.type,a=e.iconName,n=e.value,s=e.seatNumber;return r.a.createElement("div",{id:"".concat(a,"-").concat(s,"-info")},r.a.createElement("div",{id:"".concat(a,"-").concat(s,"-tooltip")},r.a.createElement(qe.a,{fixedWidth:!0,icon:Kt[a],size:"sm",className:"text-success"}),r.a.createElement(Et.a,{className:"bg-transparent text-secondary"},r.a.createElement(Zt.a,{params:$t},n))),r.a.createElement(Hn,{targetId:"".concat(a,"-").concat(s,"-tooltip"),placement:"top",boundariesElement:"".concat(a,"-").concat(s,"-tooltip"),container:"verse-card-".concat(s)},"".concat(t,": ").concat(n)))}a(250);var ta=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={verse:null,contestant:null,daps:[],disses:[],scoreCards:[],isUserDapped:null,isUserDissed:null,userScoreCard:null,isPlayerShown:!1},a.handleRemoveVerseConfirmOnClick=a.handleRemoveVerseConfirmOnClick.bind(Object(f.a)(a)),a.handleRemoveVerse=a.handleRemoveVerse.bind(Object(f.a)(a)),a.handleJoinBattle=a.handleJoinBattle.bind(Object(f.a)(a)),a.handleLeaveBattle=a.handleLeaveBattle.bind(Object(f.a)(a)),a.handleVerseReaction=a.handleVerseReaction.bind(Object(f.a)(a)),a.handleScoreCardSubmit=a.handleScoreCardSubmit.bind(Object(f.a)(a)),a.handleVerseSubmit=a.handleVerseSubmit.bind(Object(f.a)(a)),a.handleScorecardRemove=a.handleScorecardRemove.bind(Object(f.a)(a)),a.handleShowPlayer=a.handleShowPlayer.bind(Object(f.a)(a)),a.handleHidePlayer=a.handleHidePlayer.bind(Object(f.a)(a)),a.updateVerse=a.updateVerse.bind(Object(f.a)(a)),a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"handleRemoveVerseConfirmOnClick",value:function(){var e=this.props,t=e.battleStatus,a=e.currentRoundNumber,n=e.roundNumber,r=this.context.masterData.handleOpenAlert;return"round"!==t||a!==n?r("This round is over.\nWARNING: You can not remove a verse after its round ends.",!1):r("Are you sure you want to remove this verse?\nWARNING: This action cannot be undone.",!0,{},this.handleRemoveVerse)}},{key:"handleRemoveVerse",value:function(){var e=this,t=this.state.verse.id;(0,this.context.masterData.handleCloseAlert)();var a=this.context.masterData,n=a.getAxiosOptions,r=a.handleAsyncError,s=n();Oe.deleteVerse(t,s).then(function(){return e.setState(function(){return{verse:null}})}).catch(r)}},{key:"handleJoinBattle",value:function(e){var t=this.props,a=t.battleStatus,n=t.contestant,r=t.isUserContestant,s=t.isUserJudge,l=t.userId,i=t.handleJoinLeaveBattle,o=t.isPendingInvite,c=t.battleChallenge;if(!n.User){var d=this.context.masterData.handleOpenAlert;if(o){var u=c.ChallengerUser,m=c.ChallengedUser,p=u.user_id,h=m.user_id,f=m.nickname;if(l!==p&&l!==h)return d("Follow this battle to be notified when ".concat(f," accpets the challenge.\nWARNING: You cannot join a battle where someone else is challenged."),!1)}if(r||s)return d("You are already a ".concat(r?"contestant":"judge"," in this battle. You need to leave that role before can join another one.\nWARNING: Leaving a battle after it has started will result in a penalty."));if("staging"!==a){return d("This battle has ended.\nWARNING: You cannot join a battle that is closed",!1)}i(e)}}},{key:"handleLeaveBattle",value:function(e){var t=this.props,a=t.battleStatus,n=t.contestant,r=t.handleJoinLeaveBattle,s=n.Role.definition,l=this.context.masterData.handleOpenAlert;return"scoring"===a||"closed"===a?l("This battle has ended.\nWARNING: You cannot leave a battle that is over.",!1):"contestant"===s&&"staging"!==a?l("You can not leave a battle after it has started. To leave this battle you will have to concede to your opponent.\nWARNING: Conceding will cause you to lose this battle, and you will receive battle reputation and battle score penalties.",!1):void l("Are you sure you want to leave this battle?\nWARNING: Leaving a battle after it has started will result in a penalty.",!0,{"data-role":e.target.getAttribute("data-role")},r)}},{key:"handleVerseReaction",value:function(e){var t=this,a=this.props,n=a.userId,r=a.reactionTypes,s=e.target;s.blur();var l=this.state.verse.id,i=s.getAttribute("data-type-definition"),o=r[i].id,c={userId:n,verseId:l,typeId:o},d=function(){var e="true"===s.getAttribute("data-is-reacted"),t="true"===s.getAttribute("data-is-other-reacted");return e?"delete":t?"update":"create"}(),u=this.context.masterData,m=u.getAxiosOptions,p=u.handleAsyncError,h=m(),f="dap"===i&&"delete"!==d,g="dis"===i&&"delete"!==d;this.setState(function(){return{isUserDissed:g,isUserDapped:f}},function(){ke[d](c,h).then(function(){return ke.getAllVerseReactions(l,h)}).then(function(e){var a=e.data,n=a.filter(function(e){return"dap"===e.Type.definition}),r=a.filter(function(e){return"dis"===e.Type.definition});t.setState(function(){return{daps:n,disses:r}})}).catch(p)})}},{key:"handleScoreCardSubmit",value:function(e){var t=this,a=this.state,n=a.verse,r=a.scoreCards,s=a.userScoreCard,l=this.props,i=l.battleStatus,o=l.userId,c=l.scoringType;if("closed"===i){return(0,this.context.masterData.handleOpenAlert)("This battle has ended.\nWARNING: You can not add or edit a scorecard for a closed battle.",!1)}var d=e.reduce(function(e,t){return e[t.definition.toLowerCase()]=t.value,e},{user_id:o,verse_id:n.id}),u=r.filter(function(e){return e.user_id!==d.user_id});u.push(d),this.setState(function(){return{updatedScorecards:u,userScoreCard:d}},function(){var e=t.context.masterData,a=e.getAxiosOptions,n=e.handleAsyncError,r=a(),l={scoreCard:d,scoringType:c,axiosOptions:r,userId:o};Ae[s?"update":"create"](l).catch(n)})}},{key:"handleScorecardRemove",value:function(){var e=this,t=this.state.userScoreCard,a=this.props,n=a.battleStatus,r=a.userId,s=a.scoringType;if(t){var l=this.context.masterData,i=l.handleOpenAlert,o=l.handleCloseAlert;if("closed"===n){return i("This battle has ended.\nWARNING: You can not remove a scorecard for a closed battle.",!1)}var c=t.verse_id;if(t.user_id===r){i("Are you sure that you want to delete your scorecard?\nWARNING: If you are a judge for this battle and do not submit a scorecard for this verse then you will receive a reputation penalty.",!0,null,function(){o();var t=e.context.masterData,a=t.getAxiosOptions,n=t.handleAsyncError,l=a();Ae.delete(c,s,r,l).then(e.updateVerse).catch(n)})}}}},{key:"handleVerseSubmit",value:function(e){var t=this,a=this.context.masterData.handleOpenAlert;if(!re.isTextValid(e))return a(J);var n=this.props,r=n.userId,s=n.roundId,l=r,i=s,o=de.getYouTubeId(e),c=(0,this.context.masterData.getAxiosOptions)();Ie.validateId(o,c).then(function(){return Oe.createVerse({video_url:o,round_id:i,user_id:l},c)}).then(function(e){return t.setState(function(){return{verse:e.data}})}).catch(function(e){a(e,!1,void 0,void 0)})}},{key:"handleShowPlayer",value:function(){this.setState(function(){return{isPlayerShown:!0}})}},{key:"handleHidePlayer",value:function(){this.setState(function(){return{isPlayerShown:!1}})}},{key:"updateVerse",value:function(){var e=this,t=this.props,a=t.userId,n=t.contestant,r=t.roundId,s=t.scoringType,l=this.context.masterData,i=l.getAxiosOptions,o=l.handleAsyncError,c=i();Oe.getOneUser(r,n.user_id,c).then(function(t){var n=t.data;if(!n)return e.setState(function(){return{verse:n}});var r=[ke.getAllVerseReactions(n.id,c),Ae.getAllVerseScoreCards(n.id,s,c)];pe.a.all(r,c).then(function(t){var r=Object(Ne.a)(t,2),s=r[0],l=r[1],i=s.data,o=l.data,c=i.filter(function(e){return"dap"===e.Type.definition}),d=i.filter(function(e){return"dis"===e.Type.definition}),u=o.filter(function(e){return e.verse_id===n.id&&e.user_id===a})[0],m=i.filter(function(e){return e.verse_id===n.id&&e.user_id===a})[0],p=!1,h=!1;m&&(p="dap"===m.Type.definition,h=!p),e.setState(function(){return{verse:n,daps:c,disses:d,scoreCards:o,isUserDapped:p,isUserDissed:h,userScoreCard:u}})})}).catch(o)}},{key:"componentDidMount",value:function(){this.updateVerse();var e=this.props,t=e.seatNumber,a=e.roundId,n={userId:e.userId,nickname:e.nickname,isBattleAudience:!1},r=this.context.masterData.ioSocket;r.emit("joinRoom","battle-verse-".concat(a,"-").concat(t),n),r.on("update",this.updateVerse)}},{key:"componentWillUnmount",value:function(){var e=this.props,t=e.roundId,a=e.seatNumber,n=this.context.masterData.ioSocket;n.emit("leaveRoom","battle-verse-".concat(t,"-").concat(a),{isBattleAudience:!1}),n.close()}},{key:"render",value:function(){var e=this.state,t=e.verse,a=e.daps,n=e.disses,s=e.scoreCards,l=e.isUserDapped,i=e.isUserDissed,o=e.userScoreCard,c=e.isPlayerShown,d=this.props,u=d.contestant,m=d.seatNumber,p=d.scoringType,h=d.isUserContestant,f=d.userId,g=d.standardScorecardFields,b=d.isStagingPhase,v=d.isRoundEnded,E=d.isBattleClosed,x=d.handleReadyOnClick,y=d.isPendingInvite,k=d.battleChallenge,S=t&&t.video_url,I=u.user_id===f,T=a.length,R=n.length,j=s.length,w=y?"Pending Challenge":"Join It!",B=!1;k&&(B=f===k.challenged_user_id);return y&&B&&(w="Accept Challenge"),u.User&&(w=u.User.nickname),r.a.createElement(Rt.a,{id:"verse-card-".concat(m),className:"mb-5 mb-sm-0 bg-darkest-75 rounded-0 verse-card ".concat(1===m?"left":"right")},r.a.createElement(jt.a,{tag:"div",className:"p-0 bg-darkest"},u.User?r.a.createElement(tr,{id:"contestant-seat-".concat(m),userId:f,labelText:w,profile:u.User.Profile,userProfileUrl:"/profile/".concat(u.User.user_id)}):r.a.createElement(N.a,{color:"link","data-role":"contestant","data-seat-number":m,onClick:this.handleJoinBattle,className:"d-inline-block p-0 text-truncate text-xxl text-decoration-none text-secondary"},w)),r.a.createElement(wt.a,{className:"p-0"},r.a.createElement(C.a,{fluid:!0,className:"h-100"},r.a.createElement(O.a,{className:"h-100"},r.a.createElement(A.a,{xs:"2",className:"p-0 "+(2===m&&"order-2")},r.a.createElement(Ht,{verse:t,contestantUserId:u.user_id,isVerseSubmitted:!!t,seatNumber:m,scoringType:p,isUserDapped:l,isUserDissed:i,isUserScored:!!o,isBattleClosed:E,userScoreCard:o,isUserThisContestant:I,isUserContestant:h,standardScorecardFields:g,handleVerseReaction:this.handleVerseReaction,handleScoreCardSubmit:this.handleScoreCardSubmit,handleScorecardRemove:this.handleScorecardRemove,handleJoinBattleClick:this.handleJoinBattle,handleLeaveBattleClick:this.handleLeaveBattle,handleRemoveVerse:this.handleRemoveVerseConfirmOnClick})),r.a.createElement(A.a,{xs:"10",className:"p-0 h-100"},r.a.createElement(zt,{key:S,videoId:S,seatNumber:m,isPlayerShown:c,isUserThisContestant:I,isContestantReady:u.is_ready,isStagingPhase:b,isRoundEnded:v,dapsCount:T,dissesCount:R,scorecardsCount:j,handleVerseSubmit:this.handleVerseSubmit,handleReadyOnClick:x,handleShowPlayer:this.handleShowPlayer}))))))}}]),t}(n.Component);function aa(e){var t=e.scores,a=e.isScored,n=e.isBattleClosed,s=e.handleScoreSliderChange,l="Use the sliders below to provide scores for the verse.";a&&(l="Thank you for scoring this verse.");var i=t.map(function(e,t){return r.a.createElement(A.a,{key:t,xs:"12",sm:"6",className:"px-4 mx-auto"},r.a.createElement(Ze.a,null,r.a.createElement(ra,{text:e.definition,minScore:0,maxScore:10,value:e.value,isBattleClosed:n,order:Math.abs(t)%2===1?"order-1":"",handleChange:s})))});return r.a.createElement(Xe.a,{id:"score-card-form",className:"flex-fill"},r.a.createElement("p",{className:"mx-5"},l),r.a.createElement(O.a,null,i))}ta.contextType=E;var na=a(418);function ra(e){var t=e.text,a=e.minScore,n=e.maxScore,s=e.value,l=e.isBattleClosed,i=e.order,o=e.handleChange;return r.a.createElement("div",{className:"d-flex justify-content-md-around align-items-end"},r.a.createElement("div",{className:"w-100 mb-1 slider ".concat(i)},r.a.createElement(Ke.a,{id:"score-type-label",for:"".concat(t,"-score-range"),className:"mb-0"},t),r.a.createElement(na.a,{id:"".concat(t,"-score-range"),type:"range",min:a,max:n,value:s,"data-category":t,onChange:o,disabled:l,className:"rounded bg-dark score-slider"})),r.a.createElement("div",{className:"slider-number"},r.a.createElement(Ke.a,{for:"slider-value",className:"sr-only"},t," Value"),r.a.createElement($e.a,{id:"".concat(t,"-slider-value"),type:"number",min:a,max:n,value:s,"data-category":t,onChange:o,disabled:l,className:"h-100 p-0 bg-darker text-secondary text-center"})))}a(251);var sa=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={scores:[]},a.getScores=a.getScores.bind(Object(f.a)(a)),a.getScorecardCategories=a.getScorecardCategories.bind(Object(f.a)(a)),a.handleScoreSliderChange=a.handleScoreSliderChange.bind(Object(f.a)(a)),a.handleScoreCardSubmit=a.handleScoreCardSubmit.bind(Object(f.a)(a)),a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"getScores",value:function(){var e=this.props.userScoreCard;if(!e)return this.getEmptyScores();var t=[],a=this.getScorecardCategories();for(var n in e)a.includes(n)&&t.push({definition:n,value:e[n]});return t}},{key:"getEmptyScores",value:function(){return this.getScorecardCategories().map(function(e){return{definition:e,value:0}})}},{key:"getScorecardCategories",value:function(){var e=this.props,t=e.scoringType,a=e.standardScorecardFields;return"advanced"===t?a:["score"]}},{key:"handleScoreSliderChange",value:function(e){var t=this.state.scores,a=e.target,n=a.valueAsNumber,r=a.getAttribute("data-category"),s=a.getAttribute("min"),l=a.getAttribute("max");n=(n=n<s?s:n)>l?l:n;var i=t.map(function(e){return e.definition===r&&(e.value=n),e});this.setState(function(){return{scores:i}})}},{key:"handleScoreCardSubmit",value:function(e){e.preventDefault();var t=this.props,a=t.isBattleClosed,n=t.handleScoreCardSubmit;a||n(this.state.scores)}},{key:"componentDidMount",value:function(){var e=this.getScores();this.setState(function(){return{scores:e}})}},{key:"render",value:function(){var e=this.state.scores,t=this.props,a=t.isScored,n=t.toggleIcon,s=t.isBattleClosed,l=t.handleScorecardRemove;return r.a.createElement(ze,{headerText:"Verse Score Card",toggleButtonProps:{color:"link",className:"btn-outline-primary m-0 px-0 py-2 border-top-0 rounded-0 flex-fill"},toggleIconProps:{icon:n,size:"lg",className:"align-self-center mx-auto"},isSubmitDisabled:!!s,handleSubmit:this.handleScoreCardSubmit},r.a.createElement("div",{className:"d-flex"},r.a.createElement(aa,{scores:e,isScored:a,isBattleClosed:s,handleScoreSliderChange:this.handleScoreSliderChange}),r.a.createElement(N.a,{outline:!0,color:"transparent",disabled:!a,onClick:l,className:"align-self-start rounded-circle border-0 text-darkest remove-button"},r.a.createElement(qe.a,{fixedWidth:!0,icon:Ve.A,className:"no-pointer-events"}))))}}]),t}(r.a.Component);a(252);function la(e){var t=e.userId,a=e.rounds,s=e.audienceCount,l=e.commentsCount,i=e.battleType,o=e.roundCount,c=e.roundLength,d=e.judges,u=e.isUserContestant,m=e.isUserJudge,p=e.userBattleRatingValue,h=e.battleRatingCount,f=e.isUserFollowing,g=e.averageBattleRating,b=e.handleJoinLeaveBattle,v=e.handleBattleRatingOnChange,x=e.handleFollowBattle,y=e.handleUnfollowBattle,C=e.followersCount,O=e.resultCards,A=e.judgingType,k=e.battleStatus,S=e.battleChallenge,I=Object(n.useContext)(E).masterData.handleOpenAlert,T=c>24?c/24:c,R=c>24?"day":"hour";T>1&&(R+="s");var j="".concat(o," ").concat(o>1?"rounds":"round"," @ ").concat(T," ").concat(R),w=function(e){var t="text-success";return e>0&&e<2&&(t="text-danger"),e>=2&&e<3&&(t="text-warning"),t},B=function(e){var a,n=e.target.getAttribute("data-role"),r=e.target.getAttribute("data-seat-number"),s=!1;S&&(s="pending"===S.BattleChallengeStatus.definition);if(s){var l=S.ChallengerUser,i=S.ChallengedUser,o=l.user_id,c=l.nickname,d=i.user_id,p=i.nickname;if("judge"===n&&t===d)return a="".concat(c," challenged you to a battle.\nWARNING: You can not judge a battle you were challenged in."),I(a,!1);if("judge"===n&&t===o)return a="You challenged ".concat(p," to a battle.\nWARNING: You can not judge a battle you challenged someone in."),I(a,!1);if("contestant"===n&&t!==o&&t!==d)return a="Follow this battle to be notified when ".concat(p," accepts the challenge.\nWARNING: You cannot join a battle where someone else is challenged."),I(a,!1)}return u||m?"judge"===n&&u||"contestant"===n&&m?(a="You are already a ".concat(u?"contestant":"judge"," in this battle. You need to leave that role before can join another one.\nWARNING: Leaving a battle after it has started will result in a penalty."),I(a)):"scoring"===k||"closed"===k?I(a="This battle has ended.\nWARNING: You cannot leave a battle that is over.",!1):u&&"round"===k?I(a="You can not leave a battle after it has started. To leave this battle you will have to concede to your opponent.\nWARNING: Conceding will cause you to lose this battle, and you will receive battle reputation and battle score penalties.",!1):I(a="Are you sure you want to leave this battle?\nWARNING: Leaving a battle after it has started will result in a penalty.",!0,{"data-role":n,"data-seat-number":r},b):"closed"===k?I(a="This battle has ended.\nWARNING: You cannot join a batttle that is over.",!1):"contestant"===n&&"staging"!==k?I(a="This battle has already started or has ended\nWARNING: You can only join a battle as a contestant during the staging round.",!1):void b(e)},U=d.map(function(e,a){return r.a.createElement(yt.a,{key:e.id?e.id:a,className:"py-0 px-2 rounded-0 bg-darkest list-group-item-darker judge-panel-item same-flex-width ".concat(1===a?"border-bottom-0 border-top-0 border-left border-right border-darker":"border-0")},e.id?r.a.createElement(tr,{id:"judge-seat-".concat(e.participant_number),userId:t,labelText:e.User.nickname,profile:e.User.Profile,userProfileUrl:"/profile/".concat(e.user_id),buttonClassName:"w-100 h-100 text-secondary text-truncate text-sm"}):r.a.createElement(N.a,{color:"link",tag:"button","data-role":"judge","data-seat-number":a+1,onClick:B,className:"w-100 h-100 text-secondary text-truncate text-sm text-decoration-none"},"JUDGE IT!"))}),P=Object(n.useState)(!1),_=Object(Ne.a)(P,2),D=_[0],L=_[1];return r.a.createElement("div",null,r.a.createElement(Ye,{titleText:i,subheadingText:[j],isContentCollapsible:!0},r.a.createElement("div",{className:"flex-fill d-flex align-items-end"},r.a.createElement("div",{className:"flex-fill"},r.a.createElement(it.a,{fractions:2,emptySymbol:r.a.createElement(qe.a,{fixedWidth:!0,icon:rt.c,size:"lg"}),fullSymbol:r.a.createElement(qe.a,{fixedWidth:!0,icon:Ve.w,size:"lg"}),placeholderSymbol:r.a.createElement(qe.a,{fixedWidth:!0,icon:rt.c,size:"lg"}),initialRating:p,onChange:v,className:"d-flex justify-content-center ".concat(w(p))}),r.a.createElement("p",{className:"d-block mb-0"},h?1===h&&p>0?r.a.createElement("span",null,"You rated first!"):r.a.createElement("span",null,h,"\xa0people rated\xa0",r.a.createElement("span",{className:w(g)},g)):r.a.createElement("span",null,"Be the first to rate!"))),r.a.createElement(Ir,{judgingType:A,isUserJudge:m,isUserContestant:u,isUserFollowing:f,handleJoinLeaveOnClick:B,handleFollowOnClick:x,handleUnfollowOnClick:y}),r.a.createElement("div",{className:"d-none d-sm-block"},r.a.createElement("p",{id:"comments-count",className:"d-flex justify-content-around m-0"},r.a.createElement("span",{className:"mx-1 text-sm"},l),r.a.createElement(qe.a,{fixedWidth:!0,icon:Ve.k}),r.a.createElement(Hn,{targetId:"comments-count"},"".concat(l," comment(s)"))),r.a.createElement("p",{id:"audience-count",className:"d-flex justify-content-around m-0"},r.a.createElement("span",{className:"mx-1 text-sm"},s),r.a.createElement(qe.a,{fixedWidth:!0,icon:Ve.H}),r.a.createElement(Hn,{targetId:"audience-count"},"".concat(s," audience member(s)"))),r.a.createElement("p",{id:"followers-count",className:"d-flex justify-content-around m-0"},r.a.createElement("span",{className:"mx-1 text-sm"},"".concat(C)),r.a.createElement(qe.a,{fixedWidth:!0,icon:Ve.D}),r.a.createElement(Hn,{targetId:"followers-count"},"".concat(C," follower(s)")))))),"judges"===A&&r.a.createElement("div",{className:"d-flex bg-darkest-90"},r.a.createElement(N.a,{outline:!0,onClick:function(){return L(!D)},className:"btn-outline-primary p-1 border-0 rounded-0 text-primary outline-none"},window.screen.width>=576?r.a.createElement("span",{className:D?"vertical-text":""},"Judges"):r.a.createElement(qe.a,{fixedWidth:!0,icon:D?Ve.f:Ve.g})),r.a.createElement("div",{className:"flex-fill d-flex flex-sm-column border-left border-primary"},!D&&r.a.createElement(Nt.a,{className:"list-group-horizontal justify-content-around justify-content-sm-start ".concat(D?"":"flex-fill")},U),r.a.createElement(Qe.a,{isOpen:D,className:"flex-fill"},r.a.createElement(Qn,{roundCount:o,rounds:a,resultCards:O,judges:d,isJudgePanelOpen:D,judgesListGroup:r.a.createElement(Nt.a,{className:"list-group-horizontal-sm justify-content-around justify-content-sm-start ".concat(D?"":"flex-fill")},U)})))))}var ia=a(401),oa=a(399),ca=a(402);function da(e){var t=e.videoId,a=e.title,s=e.handleVideoItemClick;return r.a.createElement(yt.a,{"data-video-id":t,onClick:s,className:"d-flex bg-darkest-75 px-1 py-0 profile-video-item"},r.a.createElement(oa.a,{className:"flex-fill mb-0 text-truncate no-pointer-events text-left"},a),r.a.createElement(n.Fragment,null,r.a.createElement(N.a,{outline:!0,size:"sm",onClick:null,className:"rounded-0 btn-darkest no-pointer-events profile-play-button"},r.a.createElement(qe.a,{icon:Ve.t,className:"no-pointer-events"}))))}var ua=a(400);function ma(e){var t=e.youtubeIcon,a=e.handleAddVideoSubmit;return r.a.createElement(ua.a,{id:"add-video-dropdown",direction:"up",className:"flex-fill"},r.a.createElement(Jt.a,{outline:!0,block:!0,size:"sm",className:"btn-outline-primary py-1 rounded-0"},r.a.createElement(qe.a,{icon:Ve.u,size:"lg",className:"no-pointer-events"})),r.a.createElement(Qt.a,{flip:!1,className:"rounded-0 bg-darkest w-100 text-center p-0 border-bottom-0 profile-add-video-menu"},r.a.createElement(nt.a,{header:!0,tag:"h4",className:"d-flex justify-content-between align-items-center font-weight-bolder p-0"},r.a.createElement(oa.a,{className:"flex-fill mb-0 text-capitalize"},"add video"),r.a.createElement("img",{style:{width:"32px",height:"32px"},src:t,alt:"Youtube branding"})),r.a.createElement(Mt.a,null,r.a.createElement($e.a,{bsSize:"sm",id:"video-id",placeholder:"Youtube\u2122 video ID or URL",className:"form-control bg-dark-75 rounded-0 border-0 font-italic"}),r.a.createElement(Ft.a,{tag:"button",addonType:"append",onClick:a,className:"btn-outline-primary btn-sm bg-transparent rounded-0"},r.a.createElement(qe.a,{icon:Ve.e,className:"no-pointer-events"})))))}var pa=a(184),ha=a.n(pa),fa=U.PROFILE_METHOD_NAMES.VIDEO_LIST_NAMES,ga=function(e){function t(e){var a;Object(i.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={isBeingEdited:!1,markedRemoveVideos:[]};for(var n=0;n<fa.length;n++){var r=fa[n];a[r]=a[r].bind(Object(f.a)(a))}return a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"handleAddVideoSubmit",value:function(){var e=document.getElementById("video-id").value.trim();e&&this.props.handleAddVideo(e)}},{key:"handleRemoveVideoClick",value:function(){var e=this.state,t=e.isBeingEdited,a=e.markedRemoveVideos,n=this.props.handleRemoveVideos;t&&n(a),this.setState(function(e){return{isBeingEdited:!e.isBeingEdited,markedRemoveVideos:[]}})}},{key:"handleVideoItemClick",value:function(e){var t=e.target,a=this.state,n=a.isBeingEdited,r=a.markedRemoveVideos,s=this.props.handleChangeVideo,l=t.getAttribute("data-video-id");if(!n)return s(l);var i=r.indexOf(l);i>=0?r.splice(i,1):r.push(l),t.classList.toggle("mark-video-remove"),this.setState(function(){return{markedRemoveVideos:r}})}},{key:"render",value:function(){var e=this,t=this.state.isBeingEdited,a=this.props,n=a.videos,s=a.defaultVideoId,l=a.isUserProfileOwner,i=l?ee:$,o=n.map(function(t){var a=t.id,n=t.video_id,s=t.title;return r.a.createElement(da,{key:a,videoId:n,title:s,handleVideoItemClick:e.handleVideoItemClick})});return r.a.createElement(C.a,{fluid:!0,className:"order-1 order-md-0 border-right p-0 border-darker bg-darkest-75 video-list overflow-auto scroll-box ".concat(t?"edit":"border-darker")},r.a.createElement(Nt.a,{flush:!0,className:"h-100 video-list-group"},!n.length&&r.a.createElement(yt.a,{key:0,"data-video-id":s,onClick:this.handleVideoItemClick,className:"flex-fill bg-darkest-75 mb-0 profile-video-item"},r.a.createElement(ia.a,null,i.headingText),r.a.createElement(oa.a,null,i.bodyText)),o,l&&r.a.createElement(yt.a,{style:{zIndex:1029},className:"mt-auto bg-darkest-90 p-0"},r.a.createElement(ca.a,{className:"w-100"},r.a.createElement(ma,{youtubeIcon:ha.a,handleAddVideoSubmit:this.handleAddVideoSubmit}),r.a.createElement(N.a,{outline:!0,size:"sm",color:"dark",onClick:this.handleRemoveVideoClick,className:"flex-grow-0 px-5 px-md-3 bg-transparent border-0 rounded-0 remove-button"},r.a.createElement(qe.a,{icon:Ve.A,className:"no-pointer-events"}))))))}}]),t}(n.Component),ba=Ue.PROFILE_UTILS,va=Ue.YOUTUBE_UTILS,Ea=_e.MAIN_HELPER,xa=_e.VERSE_HELPER,ya=ae.YOUTUBE_OPTIONS_PROFILE,Na=ae.DEFAULT_PROFILE_YOUTUBE_ID,Ca=ae.MESSAGE_PROFILE_VIDEO_EXISTS,Oa=ae.MESSAGE_INVALID_INPUT_CHARACTERS,Aa=ae.CLASS_METHOD_NAMES.PROFILE_METHOD_NAMES.PROFILE_TOP_CONTENT_NAMES,ka=function(e){function t(e){var a;Object(i.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={defaultVideoId:Na,videoId:void 0,videos:[]};for(var n=0;n<Aa.length;n++){var r=Aa[n];a[r]=a[r].bind(Object(f.a)(a))}return a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"handleChangeVideo",value:function(e){this.setState(function(t){return e!==t.videoId?{videoId:e}:null})}},{key:"handleAddVideo",value:function(e){var t=this,a=this.state,n=a.videos,r=a.videoId,s=this.props,l=s.profileId,i=s.getAxiosOptions,o=xa.getYouTubeId(e),c=Ea.isTextValid(e),d=Ea.isVideoInList(n,o),u=this.context.masterData.handleOpenAlert;if(!c||d)return u(c?Ca:Oa,!1);var m=i();va.validateId(o,m).then(function(e){var t={title:e.data.title,video_id:o,profile_id:l};return ba.createProfileVideo(t,m)}).then(function(e){var a=e.data,s=n.concat([a]),l=s.length?s[0].video_id:r;t.setState(function(){return{videos:s,videoId:l}})}).catch(function(e){var t=e.response;return u(t.data,!1)})}},{key:"handleRemoveVideos",value:function(e){var t=this,a=this.props,n=a.profileId,r=a.handleAsyncError,s=(0,a.getAxiosOptions)();s.data={videoIds:e},ba.deleteProfileVideos(n,s).then(function(){var a=t.state,n=a.videos,r=a.defaultVideoId,s=n.filter(function(t){var a=t.video_id;return!e.includes(a)}),l=s[0],i=l?l.video_id:r;t.setState(function(){return{videos:s,videoId:i}})}).catch(r)}},{key:"componentDidMount",value:function(){var e=this,t=this.props,a=t.profileId,n=t.handleAsyncError,r=(0,t.getAxiosOptions)();ba.getProfileVideos(a,r).then(function(t){var a=t.data,n=Object(Ne.a)(a,1)[0],r=a.length?n.video_id:void 0;e.setState(function(){return{videos:a,videoId:r}})}).catch(n)}},{key:"render",value:function(){var e=this.state,t=e.defaultVideoId,a=e.videoId,n=e.videos,s=this.props.isUserProfileOwner;return r.a.createElement(C.a,{fluid:!0,className:"d-flex flex-column flex-md-row p-0 my-5 my-md-0"},r.a.createElement(ga,{videos:n,defaultVideoId:t,isUserProfileOwner:s,handleChangeVideo:this.handleChangeVideo,handleAddVideo:this.handleAddVideo,handleRemoveVideos:this.handleRemoveVideos}),r.a.createElement(Vt.a,{videoId:a||t,opts:ya,onReady:function(e){return e.target.pauseVideo()},className:"w-100 h-100 youtube-player",containerClassName:"flex-fill order-0 order-md-1 youtube-container"}))}}]),t}(n.Component);ka.contextType=E;var Sa=Ue.PARTICIPANT_UTILS,Ia=Ue.BATTLE_REQUEST_UTILS,Ta=ae.PROFILE_BATTLE_ITEMS,Ra=ae.MESSAGE_REMOVE_FRIEND,ja=ae.MESSAGE_CANCEL_FRIEND_REQUEST,wa=ae.CLASS_METHOD_NAMES.PROFILE_METHOD_NAMES.PROFILE_BOTTOM_CONTENT_NAMES,Ba=_e.BATTLE_HELPER,Ua=_e.MAIN_HELPER,Pa=function(e){function t(e){var a;Object(i.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={currentBattles:[],pendingBattles:[],requestedBattles:[],historyBattles:[],selectedBattleId:void 0};for(var n=0;n<wa.length;n++){var r=wa[n];a[r]=a[r].bind(Object(f.a)(a))}return a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"handleSortBattleList",value:function(e){if(-1!==e){var t=this.state.currentBattles,a=Ua.sortBattles(t,e);this.setState(function(){return{currentBattles:a}})}}},{key:"handleRelationshipOnClick",value:function(){var e=this.props,t=e.handleRelationshipOnClick,a=e.relationshipData,n=a.isUserFriend,r=a.isPendingFriendRequest,s=a.isUserFriendRequestor;if(n||r&&s){var l=r?ja:Ra,i=this.context.masterData,o=i.handleOpenAlert,c=i.handleCloseAlert;return o(l,!0,null,function(){c(),t()})}t()}},{key:"componentDidMount",value:function(){var e=this,t=this.props,a=t.profileUserId,n=t.getAxiosOptions,r=t.handleAsyncError,s=n(),l=[Sa.getAllUser(a,s),Ia.getAllUser(a,s)];Promise.all(l).then(function(t){var a=Object(Ne.a)(t,2),n=a[0].data,r=a[1].data,s=n.filter(function(e){return"contestant"===e.Role.definition}).map(function(e){return e.Battle}),l=Ba.getBattleListData(s);e.setState(function(){return Object(h.a)({},l,{requestedBattles:r})})}).catch(r)}},{key:"render",value:function(){var e=this,t=this.state.selectedBattleId,a=this.props,n=a.profileUserId,s=a.isUserProfileOwner,l=a.relationshipData,i=Ta.map(function(t){return Object(h.a)({},t,{battles:e.state[t.stateProperty]})});return r.a.createElement(C.a,{fluid:!0,className:"d-flex flex-column flex-sm-row p-0 border-top border-primary mh-400-px"},r.a.createElement("div",{className:"bg-darkest border-right border-primary community-panel"},r.a.createElement(er,{activeTab:0,isUserProfileOwner:s,profileUserId:n})),r.a.createElement("div",{className:"flex-fill position-relative"},r.a.createElement(cr,{isUserProfileOwner:s,relationshipData:l,handleRelationshipOnClick:this.handleRelationshipOnClick}),r.a.createElement("div",{className:"position-absolute w-100 overflow-auto profile-battle-list"},r.a.createElement(br,{battlesData:i,selectedBattleId:t,handleSortBattleList:this.handleSortBattleList,handleBattleItemOnClick:this.handleBattleItemOnClick}))))}}]),t}(n.Component);Pa.contextType=E;var _a=a(190);a(253);function Da(e){var t=e.isDeleteButtonDisabled,a=e.handlePhotoUploadOpen,n=e.handleRemovePhoto;return r.a.createElement("div",{className:"pb-2 text-right"},r.a.createElement(N.a,{outline:!0,color:"success",size:"sm",onClick:a,className:"rounded-pill text-capitalize"},"add photo"),r.a.createElement(N.a,{outline:!0,color:"transparent",disabled:t,onClick:n,className:"rounded-circle border-0 text-darkest remove-button"},r.a.createElement(qe.a,{fixedWidth:!0,icon:Ve.A,className:"no-pointer-events"})))}function La(e){var t=e.thumbnailUrl,a=e.isThumbnailDefault,n=e.isDelete,s=e.rootProps,l=e.inputProps,i=e.handleRemovePhoto;return r.a.createElement("div",Object.assign({},s,{className:"dropzone DropZone flex-fill d-flex justify-content-around align-items-center py-2 border-darkest overflow-hidden",style:{height:"250px"}}),r.a.createElement("input",l),a||n?r.a.createElement("p",{className:"m-0 text-xxl"},"Click Or Drag-N-Drop"):r.a.createElement("div",{className:"position-relative"},r.a.createElement("img",{src:t,alt:"selected profile",style:{maxHeight:"200px"},className:"d-block img-fluid"}),r.a.createElement(N.a,{close:!0,onClick:i,style:{top:"-5px",right:"-25px"},className:"position-absolute text-danger close"},r.a.createElement(qe.a,{icon:Ve.z}))))}var Ma=function(e){function t(e){var a;Object(i.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={files:[],isDelete:!1},a.dropzoneRef=Object(n.createRef)();for(var r=0;r<R.length;r++){var s=R[r];a[s]=a[s].bind(Object(f.a)(a))}return a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"handlePhotoUploadOpen",value:function(){var e=this.dropzoneRef.current;e&&e.open()}},{key:"handlePhotoDrop",value:function(e){var t=e.map(function(e){return Object.assign(e,{preview:URL.createObjectURL(e)})});this.setState(function(){return{files:t}})}},{key:"handleRemovePhoto",value:function(e){e.stopPropagation();var t=this.props.profilePhoto;this.setState(function(){return{files:[],isDelete:t!==M}})}},{key:"handleCloseModal",value:function(){this.setState(function(){return{isDelete:!1}})}},{key:"render",value:function(){var e=this,t=this.state,a=t.files,n=t.isDelete,s=this.props,l=s.profilePhoto,i=s.isUserProfileOwner,o=s.handleUploadPhoto,c=s.handleRemovePhoto,d=l===M,u=a[0]?a[0].preview:l,m=n?c:function(){return null},p=r.a.createElement("img",{src:l,alt:"user",className:"w-100 h-100"});return r.a.createElement(C.a,{className:"flex-fill px-0 profile-photo-container"},i?r.a.createElement(ze,{headerText:"Profile Photo",isSubmitDisabled:!1,closeButtonText:"Cancel",toggleButtonContent:p,toggleButtonProps:{className:"img-fluid w-100 h-100 border-0 rounded-0 p-0"},handleSubmit:function(e){return a.length?o(a[0]):m(e)},handleClose:this.handleCloseModal,bodyClassName:"d-flex flex-column flex-fill"},r.a.createElement(Da,{isDeleteButtonDisabled:!(!d||a.length),handlePhotoUploadOpen:this.handlePhotoUploadOpen,handleRemovePhoto:this.handleRemovePhoto}),r.a.createElement(_a.a,{noKeyboard:!0,accept:["image/jpeg","image/png"],multiple:!1,maxSize:8e6,ref:this.dropzoneRef,onDrop:this.handlePhotoDrop},function(t){var a=t.getRootProps,s=t.getInputProps;return r.a.createElement(La,{thumbnailUrl:u,isThumbnailDefault:u===M,isDelete:n,rootProps:a(),inputProps:s(),handleRemovePhoto:e.handleRemovePhoto})})):p)}}]),t}(n.Component),Fa=a(186);function Va(e){var t=e.approvedSocialSites,a=e.profileSocialSites,n=e.icons,s=e.handleRemoveSiteClick,l=e.handleUpdateSocialLinks,i=r.a.createElement(qa,{isLabelDisplayed:!a.length});return r.a.createElement(ze,{headerText:"Profile Social Links",toggleButtonProps:{color:"link",block:!1,className:"p-0 border-0 rounded-0"},isSubmitDisabled:!1,toggleButtonContent:i,handleSubmit:l,bodyClassName:"d-flex flex-column"},r.a.createElement("div",{className:"d-flex flex-column"},t.map(function(e,t){var l=a.filter(function(t){return t.SocialSite.definition===e.definition})[0],i=!!l,o=i?l.username:void 0,c=e.definition,d=e.additional_url,u="https://www.".concat(c,".com/").concat(d?d+"/":""),m=i?u+o:"";return r.a.createElement(Mt.a,{key:e.id,className:"my-3 align-items-center profile-site-group order-".concat(e.display_order)},r.a.createElement(Ft.a,{addonType:"prepend",className:"mr-2"},r.a.createElement(qe.a,{fixedWidth:!0,size:"2x",icon:n[e.icon],style:{color:"#".concat(e.color)},className:"no-pointer-events"})),r.a.createElement($e.a,{id:e.id,bsSize:"sm","data-site-username":o,"data-site-index":t,defaultValue:m,placeholder:u,className:"rounded-pill site-url-input ".concat(i?"border border-success":"border-0")}),r.a.createElement(Ft.a,{addonType:"append"},r.a.createElement(N.a,{outline:!0,color:"transparent",size:"sm",disabled:!i,tabIndex:-1,"data-site-index":t,onClick:s,className:"rounded-circle border-0 text-darkest remove-button"},r.a.createElement(qe.a,{fixedWidth:!0,icon:Ve.A,className:"no-pointer-events"}))))})))}function qa(e){var t=e.isLabelDisplayed;return r.a.createElement(n.Fragment,null,r.a.createElement(qe.a,{icon:Ve.u,size:"lg",className:"mb-2 mb-sm-0 text-success no-pointer-events"}),t&&r.a.createElement(Ke.a,{className:"m-0 ml-sm-3 text-sm text-success cursor-pointer"},"Add Socials"))}var Ga=ae.MESSAGE_INVALID_INPUT_CHARACTERS,za=_e.MAIN_HELPER,Ha=Object(h.a)({},Fa.a,{faStar:Ve.w}),Wa=function(e){function t(e){var a;Object(i.a)(this,t),a=Object(c.a)(this,Object(d.a)(t).call(this,e));for(var n=0;n<j.length;n++){var r=j[n];a[r]=a[r].bind(Object(f.a)(a))}return a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"handleUpdateSocialLinks",value:function(){for(var e=this.props,t=e.profileId,a=e.handleUpdateSocialSites,n=this.context.pageData.approvedSocialSites,r=document.querySelectorAll(".site-url-input"),s=[],l=[],i=0;i<r.length;i++){var o=r[i],c=n[o.getAttribute("data-site-index")],d=o.getAttribute("data-site-username"),u=za.getSocialSiteUsername(o.value,c.definition,c.additional_url);if(u&&u!==d){if(!za.isTextValid(u))return(0,this.context.masterData.handleOpenAlert)(Ga,!1);var m={username:u,profile_id:t,social_site_id:c.id};d?l.push(m):s.push(m)}}a(s,l)}},{key:"handleRemoveSiteClick",value:function(e){var t=this.props.handleRemoveSocialSite,a=e.target.getAttribute("data-site-index"),n=this.context.pageData.approvedSocialSites[a].id;t(n),document.getElementById(n).value=null}},{key:"render",value:function(){var e=this,t=this.props.isUserProfileOwner;return r.a.createElement(y,null,function(a){var n=a.pageData,s=n.approvedSocialSites,l=n.profile.ProfileSocialSites;return r.a.createElement(Nt.a,{className:"flex-wrap list-group-horizontal-sm justify-content-sm-around align-items-center bg-darkest-75"},l.map(function(e){return r.a.createElement(yt.a,{key:e.id,tag:"a",href:za.getProfileSocialSiteUrl(e),target:"_blank",rel:"noopener noreferrer",className:"p-2 p-md-1 bg-transparent border-0 social-link order-".concat(e.SocialSite.display_order)},r.a.createElement(qe.a,{icon:Ha[e.SocialSite.icon],size:"lg",style:{color:"#".concat(e.SocialSite.color)},className:"no-pointer-events"}))}),t&&r.a.createElement(yt.a,{className:"p-2 p-md-1 bg-transparent border-0 order-6 ".concat(l.length?"":"flex-grow-1")},r.a.createElement("div",{className:"d-flex flex-column flex-sm-row justify-content-center align-items-center"},r.a.createElement(Va,{approvedSocialSites:s,profileSocialSites:l,icons:Ha,handleRemoveSiteClick:e.handleRemoveSiteClick,handleUpdateSocialLinks:e.handleUpdateSocialLinks}))))})}}]),t}(n.Component);function Ja(e){var t=e.profile,a=e.isUserProfileOwner,n=e.handleUpdateInfo;return r.a.createElement(Nt.a,{flush:!0,className:"flex-wrap flex-sm-nowrap flex-md-wrap list-group-horizontal p-1"},H.map(function(e){var s=e.labelText,l=e.order;return r.a.createElement(yt.a,{key:"".concat(s,"-").concat(l),className:"flex-fill m-0 p-0 bg-transparent border-0 rounded-0 order-".concat(l)},r.a.createElement(gt,{text:s,value:t[s]||"N/A",isUserProfileOwner:a,handleUpdateInfo:n}))}))}function Qa(e){var t=e.profile,a=t.battle_count,n=t.draw_count,s=t.quit_count,l=t.win_count,i=t.loss_count,o=t.battle_reputation,c=t.judge_reputation,d=t.battle_rating,u={battles:a,draws:n,quits:s},m={wins:{value:l,className:"border-0 text-success"},losses:{value:i,className:"text-danger border-top-0 border-bottom-0 border-left border-right border-darkest"},ratio:{value:re.getWinRatio(a,l,n),className:"border-0 text-info"}},p=[{icon:Ve.q,value:o},{icon:Ve.m,value:c}];return r.a.createElement(C.a,{fluid:!0,className:"d-flex flex-column px-0"},r.a.createElement("div",{className:"d-flex flex-wrap justify-content-around flex-sm-nowrap flex-md-wrap border-bottom border-darkest p-1 text-sm"},r.a.createElement(Nt.a,{flush:!0,style:{letterSpacing:"0.3em"},className:"my-1 px-2 px-md-1 text-left"},Object.keys(u).map(function(e){return r.a.createElement(yt.a,{key:e,tag:"label",className:"mb-0 p-0 bg-transparent border-darkest"},r.a.createElement("span",{className:"font-weight-bolder text-lg"},u[e]),"\xa0",r.a.createElement("span",{className:"text-uppercase text-xs"},e))})),r.a.createElement("div",{className:"d-flex align-items-center my-1 px-2 px-md-1 border-left border-darkest"},r.a.createElement(Ke.a,{className:"m-0 font-weight-bolder text-right text-xl vertical-text"},"BR"),r.a.createElement(Ke.a,{className:"m-0 text-warning text-xxl"},d))),r.a.createElement(Nt.a,{flush:!0,style:{letterSpacing:"0.4em"},className:"flex-wrap list-group-horizontal border-bottom border-darkest py-1"},Object.keys(m).map(function(e){return r.a.createElement(yt.a,{key:e,tag:"label",className:"flex-fill m-0 py-0 px-auto px-md-0 bg-transparent rounded-0 ".concat(m[e].className)},r.a.createElement("span",{className:"d-md-block font-weight-bolder text-xl"},m[e].value),r.a.createElement("span",{className:"d-md-block text-xs text-uppercase font-italic"},e))})),r.a.createElement("div",{className:"d-flex align-items-center flex-wrap flex-sm-nowrap py-1 px-2"},r.a.createElement("div",{className:"flex-fill order-sm-1 mx-auto text-success text-xxl"},((o+c)/2).toFixed(1)),r.a.createElement("div",{className:"d-flex flex-sm-column flex-wrap justify-content-around flex-fill"},p.map(function(e,t){var a=e.icon,n=e.value;return r.a.createElement("div",{key:"".concat(n,"-").concat(t),className:"d-flex align-items-center flex-fill py-1 px-3 px-sm-0"},r.a.createElement(qe.a,{size:"lg",fixedWidth:!0,icon:a,className:"mx-1"}),r.a.createElement(it.a,{readonly:!0,className:"d-flex justify-content-around flex-fill flex-wrap flex-sm-nowrap",emptySymbol:r.a.createElement(qe.a,{icon:rt.c}),fullSymbol:r.a.createElement(qe.a,{icon:Ve.w}),placeholderSymbol:r.a.createElement(qe.a,{icon:Ve.w}),placeholderRating:3.5,initialRating:n}))}))))}Wa.contextType=E;var Ya=a(52),Xa=a(105),Za=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={isOptionsMenuOpen:!1,isEditing:!1,isRepliesCollapseOpen:!1,isReplyInputOpen:!1},a.handleToggleOptionsMenuOnClick=a.handleToggleOptionsMenuOnClick.bind(Object(f.a)(a)),a.hanldeEditCommentOnClick=a.hanldeEditCommentOnClick.bind(Object(f.a)(a)),a.handleCancelComment=a.handleCancelComment.bind(Object(f.a)(a)),a.handleToggleRepliesCollapseOnClick=a.handleToggleRepliesCollapseOnClick.bind(Object(f.a)(a)),a.handleToggleReplyInputOnClick=a.handleToggleReplyInputOnClick.bind(Object(f.a)(a)),a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"handleToggleOptionsMenuOnClick",value:function(){this.setState(function(e){return{isOptionsMenuOpen:!e.isOptionsMenuOpen}})}},{key:"hanldeEditCommentOnClick",value:function(){this.setState(function(){return{isEditing:!0}})}},{key:"handleCancelComment",value:function(){this.setState(function(){return{isEditing:!1,isReplyInputOpen:!1}})}},{key:"handleToggleRepliesCollapseOnClick",value:function(){this.setState(function(e){return{isRepliesCollapseOpen:!e.isRepliesCollapseOpen}})}},{key:"handleToggleReplyInputOnClick",value:function(){this.setState(function(e){return{isReplyInputOpen:!e.isReplyInputOpen}})}},{key:"render",value:function(){var e=this.state,a=e.isOptionsMenuOpen,s=e.isEditing,l=e.isRepliesCollapseOpen,i=e.isReplyInputOpen,o=this.props,c=o.userId,d=o.userPhoto,u=o.comment,m=o.commentUser,p=o.replies,h=o.isUserOwner,f=o.parentCommentId,g=o.contestants,b=o.rounds,v=o.handleCreateComment,E=o.handleDeleteComment,x=o.handleUpdateComment,y=o.handleCommentReaction,C=this.context.masterData.handleOpenAlert;if(!c||!u.id)return null;var O=u.message,A=u.createdAt,k=u.id,S=u.battle_id,I=u.discussion_id,T=u.CommentReactions,R=u.Contestant,j=u.Round,w=m.Profile,B=m.nickname,U=m.user_id,P=w.photo,_=Dt()(A).utc().fromNow(),D=T.filter(function(e){return"dap"===e.Type.definition}),L=D.filter(function(e){return e.user_id===c}).length>0,F=T.filter(function(e){return"dis"===e.Type.definition}),V=F.filter(function(e){return e.user_id===c}).length>0,q=(T.filter(function(e){return"flip off"===e.Type.definition}).filter(function(e){return e.user_id===c}).length,p.map(function(e){var a=e.User,n=e.Replies,s=Object(Ya.a)(e,["User","Replies"]);return r.a.createElement(t,{key:e.id,userId:c,userPhoto:d,comment:s,parentCommentId:f,commentUser:a,replies:n||[],isUserOwner:c===a.user_id,handleCreateComment:v,handleUpdateComment:x,handleDeleteComment:E,handleCommentReaction:y})})),G={"data-comment-id":k};return s?r.a.createElement(tn,{existingMessage:O,existingRoundId:u.Round?u.Round.id:void 0,existingContestantId:u.Contestant?u.Contestant.user_id:void 0,commentId:k,discussionId:S||I,foreignKeyField:S?"battle_id":"discussion_id",userPhoto:d,contestants:g||[],rounds:b||[],handleCancelComment:this.handleCancelComment,handleSubmitComment:x}):r.a.createElement("div",{className:"d-flex flex-column flex-sm-row align-items-start my-3 border border-darker text-sm"},r.a.createElement("div",null,r.a.createElement(st.a,{to:"/profile/".concat(U),className:"d-inline-block text-decoration-none text-secondary"},r.a.createElement("img",{src:P||M,alt:"user profile",className:I?"comment-image":"comment-image-lg"}))),r.a.createElement("div",{className:"d-flex flex-column w-100 mw-100 bg-darkest-75"},r.a.createElement("div",{className:"d-flex justify-content-between"},r.a.createElement("div",{className:"d-flex flex-fill align-items-baseline ".concat(S?"mt-1":"")},r.a.createElement(tr,{id:"comment-".concat(U,"-").concat(I),userId:c,labelText:B,profile:w,userProfileUrl:"/profile/".concat(U),buttonClassName:"ml-2 text-md font-weight-bold"}),S&&r.a.createElement("div",{className:"flex-fill"},j&&r.a.createElement("span",{className:"mx-3 font-weight-bold"},"Round ".concat(j.number)),R&&r.a.createElement(st.a,{to:"/profile/".concat(U),className:"d-inline-block mx-3 font-weight-bold text-decoration-none text-secondary"},"".concat(R.nickname)))),r.a.createElement(Xa.a,{isOpen:a,direction:"left",toggle:this.handleToggleOptionsMenuOnClick},r.a.createElement(Jt.a,{outline:!0,color:"link",onClick:null,className:"p-0 mx-2 text-secondary"},r.a.createElement(qe.a,{icon:Ve.l})),r.a.createElement(Qt.a,{className:"rounded-0 bg-darkest-90 comment-menu"},h&&r.a.createElement(n.Fragment,null,r.a.createElement(nt.a,{"data-comment-id":k,onClick:this.hanldeEditCommentOnClick,className:"text-secondary"},"Edit"),r.a.createElement(nt.a,{"data-comment-id":k,onClick:function(){return C(Q,!0,G,E)},className:"text-secondary"},"Delete")),r.a.createElement(nt.a,{onClick:function(){return C(X+K,!1,null,null)},className:"text-secondary"},"Report")))),r.a.createElement("p",{className:"mx-3 my-1 px-2 py-1 rounded-10 bg-dark-75 text-left text-md"},O),r.a.createElement("div",{className:"mx-3 d-flex align-items-baseline"},r.a.createElement(N.a,{outline:!0,"data-is-reacted":L,"data-is-other-reacted":V,"data-type-definition":"dap","data-comment-id":k,onClick:y,className:"d-flex m-0 py-0 px-2 rounded-0 border-0 bg-transparent comment-reaction-button ".concat(L?"isReacted":"")},r.a.createElement(qe.a,{size:"sm",icon:L?Ve.y:rt.e,className:"align-self-center mx-auto"}),r.a.createElement("span",{className:"mx-1 text-xs"},D.length||"")),r.a.createElement(N.a,{outline:!0,"data-is-reacted":V,"data-is-other-reacted":L,"data-type-definition":"dis","data-comment-id":k,onClick:y,className:"d-flex m-0 py-0 px-2 rounded-0 border-0 bg-transparent comment-reaction-button ".concat(V?"isReacted":"")},r.a.createElement(qe.a,{size:"sm",icon:V?Ve.x:rt.d,className:"align-self-center mx-auto"}),r.a.createElement("span",{className:"mx-1 text-xs"},F.length||"")),r.a.createElement(N.a,{outline:!0,color:"success",onClick:this.handleToggleReplyInputOnClick,className:"d-flex align-items-baseline mx-2 p-0 border-0 bg-transparent text-decoration-none replies-toggle"},r.a.createElement(qe.a,{size:"sm",icon:rt.a,className:"align-self-center mx-auto"}),r.a.createElement("span",{className:"mx-2"},i?"cancel":"reply")),r.a.createElement("small",{className:"ml-auto mr-sm-3 text-muted text-truncate"},_)),i&&r.a.createElement(Qe.a,{isOpen:i,className:"mx-sm-3"},r.a.createElement(tn,{commentId:f,discussionId:f,foreignKeyField:"discussion_id",userPhoto:d,contestants:g||[],rounds:b||[],handleCancelComment:this.handleCancelComment,handleSubmitComment:v})),p.length>0&&r.a.createElement("div",{className:"text-left"},r.a.createElement(N.a,{block:!0,color:"link",onClick:this.handleToggleRepliesCollapseOnClick,className:"d-flex align-items-center p-1 text-sm text-decoration-none bg-darkest-90 rounded-0 replies-toggle"},r.a.createElement("i",{className:"mx-2 arrow ".concat(l?"up":"down")}),r.a.createElement("span",null,l?"Hide ".concat(p.length>1?"replies":"reply"):"View ".concat(p.length," ").concat(p.length>1?"replies":"reply"))),r.a.createElement(Qe.a,{isOpen:l,className:"mx-sm-3"},q))))}}]),t}(n.Component);Za.contextType=E,Za.defaultProps={};var Ka=ae.DEFAULT_PROFILE_PHOTO_URL,$a=ae.MESSAGE_INVALID_INPUT_CHARACTERS,en=_e.MAIN_HELPER,tn=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={isInputDirty:!("discussion_id"!==e.foreignKeyField&&!e.existingMessage),commentText:e.existingMessage||"",roundId:e.existingRoundId||null,contestantId:e.existingContestantId||null},a.handleInputOnChange=a.handleInputOnChange.bind(Object(f.a)(a)),a.handleInputOnFocus=a.handleInputOnFocus.bind(Object(f.a)(a)),a.handleCancelCommentOnClick=a.handleCancelCommentOnClick.bind(Object(f.a)(a)),a.handleSubmitOnClick=a.handleSubmitOnClick.bind(Object(f.a)(a)),a.handleRoundTagOnChange=a.handleRoundTagOnChange.bind(Object(f.a)(a)),a.handleContestantTagOnChange=a.handleContestantTagOnChange.bind(Object(f.a)(a)),a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"handleInputOnChange",value:function(e){var t=e.target;t.style.height="inherit",t.style.height=Math.min(t.scrollHeight)+"px";var a=t.value;this.setState(function(e){return e.commentText!==a?{commentText:a}:null})}},{key:"handleInputOnFocus",value:function(e){e.target.focus();var t=e.target.value;e.target.value="",e.target.value=t,this.setState(function(){return{isInputDirty:!0}})}},{key:"handleCancelCommentOnClick",value:function(){var e=document.getElementById("comment-input-repy");e||(e=document.getElementById("comment-input-parent")),e.style.height="initial";var t=this.props.foreignKeyField,a=this.props.handleCancelComment;a&&a(),this.setState(function(){return{isInputDirty:"discussion_id"===t,commentText:"",roundId:null,contestantId:null}})}},{key:"handleSubmitOnClick",value:function(){var e=this.state,t=e.commentText,a=e.roundId,n=e.contestantId,r=this.props,s=r.commentId,l=r.discussionId,i=r.existingMessage,o=r.foreignKeyField,c=r.handleSubmitComment,d=t.trim();if(!en.isTextValid(d))return(0,this.context.masterData.handleOpenAlert)($a);var u={message:d};u[o]=l,a&&(u.round_id=a),n&&(u.contestant_id=n),c(u,s,i),this.handleCancelCommentOnClick()}},{key:"handleRoundTagOnChange",value:function(e){var t=e.target.value;this.setState(function(){return{roundId:t}})}},{key:"handleContestantTagOnChange",value:function(e){var t=e.target.value;this.setState(function(){return{contestantId:t}})}},{key:"render",value:function(){var e=this.state,t=e.isInputDirty,a=e.commentText,s=e.roundId,l=e.contestantId,i=this.props,o=i.commentId,c=i.contestants,d=i.existingMessage,u=i.foreignKeyField,m=i.userPhoto,p=i.rounds,h=c.filter(function(e){return e});return r.a.createElement("div",{className:"d-flex my-3 ".concat(t?"border border-darker":"")},r.a.createElement("img",{src:m||Ka,alt:"user profile",className:"discussion_id"===u?"comment-image":"comment-image-lg"}),r.a.createElement("div",{className:"d-flex flex-column flex-fill"},r.a.createElement($e.a,{id:"comment-input-".concat("battle_id"!==u||d?"reply":"parent"),name:"comment-input",type:"textarea",placeholder:"Say something...",value:a,autoFocus:"battle_id"!==u||t,onChange:this.handleInputOnChange,onFocus:this.handleInputOnFocus,className:"flex-fill bg-darkest-75 py-0 rounded-0 border-0 resize-none comment-input scroll-box"}),t&&r.a.createElement("div",{className:"d-flex flex-fill justify-content-end align-items-end bg-darkest pt-2"},"battle_id"===u&&r.a.createElement("div",{className:"d-flex flex-column flex-sm-row flex-sm-fill"},p&&p.filter(function(e){return 0!==e.number}).length>0&&r.a.createElement(n.Fragment,null,r.a.createElement($e.a,{type:"select",value:s||0,onChange:this.handleRoundTagOnChange,className:"form-control-sm w-75 rounded-0 bg-darkest-50"},r.a.createElement("option",{value:0,className:"bg-darker"},"Tag Round"),p.map(function(e){return r.a.createElement("option",{key:e.id,value:e.id,className:"bg-darker"},"Round ".concat(e.number))})),r.a.createElement($e.a,{type:"select",value:l||0,onChange:this.handleContestantTagOnChange,className:"form-control-sm w-75 rounded-0 bg-darkest-50"},r.a.createElement("option",{value:0,className:"bg-darker"},"Tag Contestant"),h.map(function(e){return r.a.createElement("option",{key:e.user_id,value:e.user_id,className:"bg-darker"},e.nickname)})))),r.a.createElement("div",{className:"d-flex flex-fill align-items-end"},r.a.createElement(N.a,{outline:!0,color:"link",onClick:this.handleCancelCommentOnClick,className:"btn btn-sm mx-md-2 pb-0 rounded-0 text-secondary text-sm"},"Cancel"),r.a.createElement(N.a,{outline:!0,"data-comment-id":o,disabled:!a,onClick:this.handleSubmitOnClick,className:"flex-fill btn btn-sm btn-outline-primary w-25 rounded-0"},"Say It!")))))}}]),t}(n.Component);function an(e){var t=e.audienceUsers,a=Object(n.useContext)(E).masterData.goTo;return r.a.createElement("div",{className:"align-self-sm-start my-3 ml-sm-2 py-1 px-2 border border-darkest bg-darkest audience-members"},r.a.createElement("h6",{className:"text-sm"},"Audience"),r.a.createElement(Nt.a,null,t.map(function(e){return r.a.createElement(yt.a,{action:!0,key:e.userId,tag:"button",onClick:function(){return a("profile/".concat(e.userId))},className:"d-flex align-items-center p-0 mb-1 rounded-0 border-0 bg-transparent text-left outline-none"},r.a.createElement("img",{src:e.photo,alt:e.nickname,className:"audience-image"}),r.a.createElement("span",{className:"mx-1 text-xs"},e.nickname))})))}tn.contextType=E,tn.defaultProps={commentId:void 0,discussionId:void 0,userPhoto:void 0,handleSubmitComment:void 0};var nn=Ue.BATTLE_UTILS,rn=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={parentComments:[]},a.handleCreateComment=a.handleCreateComment.bind(Object(f.a)(a)),a.handleUpdateComment=a.handleUpdateComment.bind(Object(f.a)(a)),a.handleDeleteComment=a.handleDeleteComment.bind(Object(f.a)(a)),a.handleRefreshBattleComments=a.handleRefreshBattleComments.bind(Object(f.a)(a)),a.handleCommentReaction=a.handleCommentReaction.bind(Object(f.a)(a)),a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"handleCreateComment",value:function(e){var t=this,a=this.state.parentComments,n=this.props.battleId,r=this.context,s=r.masterData,l=s.getAxiosOptions,i=s.handleAsyncError,o=r.userContext.user,c=o.user_id,d=o.profile.photo,u=Object(h.a)({user_id:c,Replies:[],User:Object(h.a)({Profile:{photo:d}},o)},e),m=[].concat(a);Object.keys(u).includes("battle_id")&&m.push(u),this.setState(function(){return{parentComments:m}},function(){var e=l();nn.createBattleComment(n,u,e).then(t.handleRefreshBattleComments).catch(i)})}},{key:"handleUpdateComment",value:function(e,t){var a=this,n=this.state.parentComments,r=this.props.battleId,s=this.context,l=s.masterData,i=l.getAxiosOptions,o=l.handleAsyncError,c=s.userContext.user,d=c.user_id,u=c.profile.photo,m=Object(h.a)({user_id:d,Replies:[],User:Object(h.a)({Profile:{photo:u}},c)},e),p=n.filter(function(e){return e.id!==t});p.push(m),this.setState(function(){return{parentComments:p}},function(){var e=i();nn.updateBattleComment(r,t,m,e).then(a.handleRefreshBattleComments).catch(o)})}},{key:"handleDeleteComment",value:function(e){var t=this,a=this.state.parentComments,n=this.props.battleId,r=e.target.getAttribute("data-comment-id"),s=a.filter(function(e){return e.id!==r}),l=this.context.masterData.handleCloseAlert;this.setState(function(){return{parentComments:s}},function(){l();var e=t.context.masterData,a=e.getAxiosOptions,s=e.handleAsyncError,i=a();nn.deleteBattleComment(n,r,i).then(t.handleRefreshBattleComments).catch(s)},l)}},{key:"handleRefreshBattleComments",value:function(){var e=this,t=this.props.battleId,a=this.context.masterData,n=a.getAxiosOptions,r=a.handleAsyncError,s=n();nn.getBattleComments(t,s).then(function(t){var a=t.data||[];e.setState(function(){return{parentComments:a}})}).catch(r)}},{key:"handleCommentReaction",value:function(e){var t=this.props,a=t.battleId,n=t.reactionTypes,r=e.target;r.blur();var s=r.getAttribute("data-comment-id"),l=n[r.getAttribute("data-type-definition")],i=l.id,o=l.definition,c=function(){var e="true"===r.getAttribute("data-is-reacted"),t="true"===r.getAttribute("data-is-other-reacted");return e?"delete":t?"update":"create"}();"flip off"===o&&"delete"===c&&(c="create");var d=this.context,u=d.masterData,m=u.getAxiosOptions,p=u.handleAsyncError,h=d.userContext.user.user_id,f=m(),g={comment_id:s,user_id:h,type_id:i};nn["".concat(c,"CommentReaction")](a,g,f).then(this.handleRefreshBattleComments).catch(p)}},{key:"componentDidMount",value:function(){var e=this.props.battleId,t=this.context.userContext.user,a={userId:t.user_id,nickname:t.nickname,isBattleAudience:!0},n=this.context.masterData.ioSocket;n.emit("joinRoom","battle-audience-".concat(e),a),n.on("update",this.handleRefreshBattleComments)}},{key:"componentWillUnmount",value:function(){var e=this.props.battleId,t=this.context.masterData.ioSocket;t.emit("leaveRoom","battle-audience-".concat(e),{isBattleAudience:!0}),t.close()}},{key:"render",value:function(){var e=this,t=this.state.parentComments,a=this.props,n=a.battleId,s=a.contestants,l=a.rounds,i=a.audienceUsers,o=this.context.userContext.user,c=o.profile,d=o.user_id,u=c.photo;t.sort(function(e,t){return new Date(e.createdAt)-new Date(t.createdAt)});var m=t.map(function(t,a){var n=t.User,i=t.Replies,o=Object(Ya.a)(t,["User","Replies"]);return r.a.createElement(Za,{key:a,userId:d,userPhoto:u,comment:o,parentCommentId:o.id,commentUser:n,replies:i,contestants:s,rounds:l,isUserOwner:d===n.user_id,handleUpdateComment:e.handleUpdateComment,handleCreateComment:e.handleCreateComment,handleDeleteComment:e.handleDeleteComment,handleCommentReaction:e.handleCommentReaction})});return r.a.createElement("div",{className:"d-flex flex-column flex-sm-row my-sm-5 mx-md-3 mx-lg-5 pb-5 pb-sm-0 px-lg-5"},r.a.createElement("div",{className:"flex-fill"},r.a.createElement(tn,{discussionId:n,foreignKeyField:"battle_id",userPhoto:u,contestants:s,rounds:l,handleSubmitComment:this.handleCreateComment}),r.a.createElement("div",null,!t.length&&r.a.createElement("p",null,"No comments. Be the first to comment!"),m)),r.a.createElement(an,{audienceUsers:i}))}}]),t}(n.Component);function sn(e){var t=e.setIsEditing,a=Object(n.useContext)(E).userContext.user,s=a.authMethod,l=a.user_id,i=[r.a.createElement(dn,{key:"change-username-".concat(l)})];if("auth0"===s){var o=r.a.createElement(Cr,{key:"change-email-".concat(l),inputId:"email",labelText:"Email",inputType:"email"}),c=r.a.createElement(fn,{key:"change-password-".concat(l),userId:l});i.push(o,c)}return i.push("Coming Soon: Delete your account"),r.a.createElement(ze,{headerText:"Edit Profile",submitButtonText:"close",toggleButtonContent:"Edit",toggleButtonProps:{outline:!0,className:"dropdown-item text-secondary border-0 rounded-0 outline-none"},closeButtonClassName:"d-none",setIsEditing:t,handleSubmit:null},r.a.createElement(Nt.a,null,i.map(function(e,t){return r.a.createElement(yt.a,{key:t,className:"my-1 pb-0 py-1 rounded-0 bg-darkest text-left"},e)})))}rn.contextType=E;var ln=Ue.USER_UTILS,on=ae.MESSAGE_UNAVAILABLE_USERNAME,cn=_e.MAIN_HELPER,dn=function(e){function t(e,a){var n;Object(i.a)(this,t),n=Object(c.a)(this,Object(d.a)(t).call(this,e,a));var r=a.userContext.user,s=r.nickname,l=r.socialNickname;return n.state={username:s||l,isValid:!0,isAvailable:!1,validationMessage:"",isUpdateSuccessful:!1},n.validateUsernameInput=n.validateUsernameInput.bind(Object(f.a)(n)),n.validateUsernameAvailability=n.validateUsernameAvailability.bind(Object(f.a)(n)),n.handleUsernameOnChange=n.handleUsernameOnChange.bind(Object(f.a)(n)),n.handleUsernameOnBlur=n.handleUsernameOnBlur.bind(Object(f.a)(n)),n.handleUsernameOnSubmit=n.handleUsernameOnSubmit.bind(Object(f.a)(n)),n}return Object(u.a)(t,e),Object(o.a)(t,[{key:"handleUsernameOnChange",value:function(e){var t=e.target.value;this.setState(function(){return{username:t}})}},{key:"handleUsernameOnBlur",value:function(){this.validateUsernameInput(),this.validateUsernameAvailability()}},{key:"validateUsernameInput",value:function(){var e=this.state.username,t=cn.validateUsername(e),a=t.isValid,n=t.validationMessage;return this.setState(function(){return{username:e,isValid:a,validationMessage:n,isAvailable:!1}}),a}},{key:"validateUsernameAvailability",value:function(e){var t=this,a=this.state.username,n=this.context,r=n.masterData,s=r.getAxiosOptions,l=r.handleAsyncError,i=n.userContext.user,o=i.nickname,c=i.user_id,d=s(),u=a.trim(),m=o!==u;ln.isUsernameAvailable(c,u,d).then(function(a){var n=a.data.isUsernameAvailable;if(t.setState(function(){return{isValid:!m||n,validationMessage:m?on:"You haven't changed your username,",isAvailable:!!m&&n}}),e)return e(n)}).catch(l)}},{key:"handleUsernameOnSubmit",value:function(e){var t=this;if(e.preventDefault(),this.validateUsernameInput()){var a=this.state.username,n=this.context,r=n.masterData,s=r.getAxiosOptions,l=r.handleAsyncError,i=n.userContext,o=i.user.user_id,c=i.methodData.updateUser,d=a.trim();this.validateUsernameAvailability(function(e){if(e){var a={user_id:o,nickname:d},n=s();ln.update(a,n).then(function(){return t.setState(function(){return{isUpdateSuccessful:!0}},c)}).catch(l)}})}}},{key:"render",value:function(){var e=this.state,t=e.username,a=e.isValid,n=e.isAvailable,s=e.validationMessage,l=e.isUpdateSuccessful;return r.a.createElement("form",{onSubmit:this.handleUsernameOnSubmit},r.a.createElement("div",null,r.a.createElement(Ke.a,{for:"username",className:"m-0"},"Username"),r.a.createElement($e.a,{id:"username",valid:n,invalid:!a,value:t,onChange:this.handleUsernameOnChange,onBlur:this.handleUsernameOnBlur,className:"form-control-sm"}),r.a.createElement(et.a,null,s)),r.a.createElement("div",{className:"d-flex flex-wrap flex-sm-nowrap"},l&&r.a.createElement("small",{className:"flex-fill mx-3 form-text text-success"},"Successfully updated username."),r.a.createElement(N.a,{color:"link",type:"submit",className:"btn-sm d-block ml-auto text-decoration-none"},"continue")))}}]),t}(n.Component);dn.contextType=E;var un=a(187),mn=a.n(un),pn=Ue.USER_UTILS,hn=_e.MAIN_HELPER,fn=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={password:{value:"",isValid:!1,validationMessage:""},confirmPassword:{value:"",isValid:!1,validationMessage:""},isUpdateSuccessful:!1},a.handlePasswordOnChange=a.handlePasswordOnChange.bind(Object(f.a)(a)),a.handlePasswordOnBlur=a.handlePasswordOnBlur.bind(Object(f.a)(a)),a.handlePasswordOnSubmit=a.handlePasswordOnSubmit.bind(Object(f.a)(a)),a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"handlePasswordOnChange",value:function(e){var t=e.target,a=t.id,n=t.value,r=this.state,s=r.password,l={password:s,confirmPassword:r.confirmPassword},i=hn.validatePassword(n),o=i.isValid,c=i.validationMessage;"confirmPassword"===a&&o&&((o=s.value.trim()===n.trim())||(c="Passwords do not match.")),l[a]={value:n,isValid:o||!n.trim(),validationMessage:c},this.setState(function(){return l})}},{key:"handlePasswordOnBlur",value:function(e){var t=e.target.id,a=this.state,n=a.password,r={password:n,confirmPassword:a.confirmPassword},s=r[t].value,l=s.trim(),i=hn.validatePassword(l),o=i.isValid,c=i.validationMessage;"confirmPassword"===t&&o&&((o=n.value.trim()===s.trim())||(c="Passwords do not match.")),r[t]=Object(h.a)({},r[t],{isValid:o||!l,validationMessage:c}),this.setState(function(){return r})}},{key:"handlePasswordOnSubmit",value:function(e){var t=this;e.preventDefault();var a=this.state,n=a.password,r=a.confirmPassword,s=this.props.userId,l=this.context.masterData,i=l.getAxiosOptions,o=l.handleAsyncError,c=i();if(n.value.trim()!==r.value.trim())return this.setState(function(){return{confirmPassword:Object(h.a)({},r,{isValid:!1,validationMessage:"Passwords do not match."})}});n.value.trim()&&r.value.trim()&&mn.a.hash(n.value.trim(),null,null,function(e,a){if(e)throw e;t.setState(function(){return{isUpdateSuccessful:!1}},function(){var e={user_id:s,password:a};pn.update(e,c).then(function(){return t.setState(function(){return{isUpdateSuccessful:!0}})}).catch(o)})})}},{key:"render",value:function(){var e=this.state,t=e.isUpdateSuccessful,a=e.password,n=a.value,s=a.isValid,l=a.validationMessage,i=e.confirmPassword,o=i.value,c=i.isValid,d=i.validationMessage;return r.a.createElement("form",{onSubmit:this.handlePasswordOnSubmit},r.a.createElement("div",null,r.a.createElement(Ke.a,{for:"password",className:"m-0"},"New Password"),r.a.createElement($e.a,{id:"password",type:"password",valid:s&&""!==n,invalid:!s&&""!==n,value:n,onChange:this.handlePasswordOnChange,onBlur:this.handlePasswordOnBlur,className:"form-control-sm"}),r.a.createElement(et.a,null,l)),r.a.createElement("div",null,r.a.createElement(Ke.a,{for:"confirmPassword",className:"m-0"},"Confirm Password"),r.a.createElement($e.a,{id:"confirmPassword",type:"password",valid:c&&""!==o,invalid:!c&&""!==o,value:o,onChange:this.handlePasswordOnChange,onBlur:this.handlePasswordOnBlur,className:"form-control-sm"}),r.a.createElement(et.a,null,d)),r.a.createElement("div",{className:"d-flex align-items-center flex-wrap flex-sm-nowrap"},t&&r.a.createElement("small",{className:"flex-fill mx-3 form-text text-success"},"Successfully updated password."),r.a.createElement(N.a,{color:"link",type:"submit",className:"btn-sm d-block ml-auto text-decoration-none"},"continue")))}}]),t}(n.Component);fn.contextType=E;var gn=Ue.BATTLE_UTILS,bn=Ue.BATTLE_REQUEST_UTILS,vn=Ue.BATTLE_ROLE_UTILS,En=Ue.BATTLE_OPTION_UTILS,xn=Ue.BATTLE_CHALLENGE_UTILS,yn=Ue.TOURNAMENT_UTILS,Nn=_e.BATTLE_HELPER,Cn=_e.MAIN_HELPER,On=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={selectedBattle:{},currentBattles:[],pendingBattles:[],requestedBattles:[],historyBattles:[],battleRoles:{},selectedBattleType:null},a.getBattleRoles=a.getBattleRoles.bind(Object(f.a)(a)),a.getBattles=a.getBattles.bind(Object(f.a)(a)),a.updateBattle=a.updateBattle.bind(Object(f.a)(a)),a.handleJoinBattle=a.handleJoinBattle.bind(Object(f.a)(a)),a.handleSortBattleList=a.handleSortBattleList.bind(Object(f.a)(a)),a.handleBattleItemOnClick=a.handleBattleItemOnClick.bind(Object(f.a)(a)),a.handleAddRemoveBattleRequest=a.handleAddRemoveBattleRequest.bind(Object(f.a)(a)),a.handleBattleChallengeResponse=a.handleBattleChallengeResponse.bind(Object(f.a)(a)),a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"getBattleRoles",value:function(){var e=this,t=this.context.masterData,a=t.getAxiosOptions,n=t.handleAsyncError,r=a();vn.getAll(r).then(function(t){var a=t.data,n=Nn.getBattleRolesObject(a);e.getBattles(n)}).catch(n)}},{key:"getBattles",value:function(e){var t=this,a=this.context.masterData,n=a.getAxiosOptions,r=a.handleAsyncError,s=n(),l=[gn.getBattles(s),bn.getAll(s),yn.getAll(s)];Promise.all(l).then(function(a){var n=Object(Ne.a)(a,3),r=n[0],s=n[1],l=n[2];return t.setState(function(){var t=r.data,a=s.data,n=l.data;return{currentBattles:t.filter(function(e){var t=e.Status.definition;return"staging"!==t&&"closed"!==t}),pendingBattles:t.filter(function(e){return"staging"===e.Status.definition}),historyBattles:t.filter(function(e){return"closed"===e.Status.definition}),requestedBattles:a,tournaments:n,battleRoles:e}})}).catch(r)}},{key:"updateBattle",value:function(){var e=this,t=this.state,a=t.currentBattles,n=t.selectedBattle,r=this.context.masterData,s=r.getAxiosOptions,l=r.handleAsyncError,i=n.id,o=s();gn.getOneBattle(i,o).then(function(t){var n=t.data,r=a.map(function(e){return e.id===n.id&&(e=n),e});e.setState(function(){return{currentBattles:r,selectedBattle:n}})}).catch(l)}},{key:"handleJoinBattle",value:function(e){var t=this,a=this.state,n=a.selectedBattle,r=a.battleRoles,s=this.props.userId,l=this.context.masterData,i=l.getAxiosOptions,o=l.handleAsyncError,c=l.handleOpenAlert,d=l.handleCloseAlert,u=n.UserBattles,m=n.Rounds,p=n.Status.definition,h=Nn.getAllParticipants(u,m),f=h.contestants,g=h.judges,b=Nn.isUserParticipant(f,s),v=Nn.isUserParticipant(g,s),E=e.target,x=E.getAttribute("data-role"),y=E.getAttribute("data-seat-number"),N=r[x].id,C=h["".concat(x,"s")],O=C.filter(function(e){return e.id}).length===("contestant"===x?2:3);return"closed"===p?c("This battle has ended.\nWARNING: You cannot join a batttle that is over.",!1):"contestant"===x&&"staging"!==p?c("This battle has already started or has ended\nWARNING: You can only join a battle as a contestant during the staging round.",!1):O?c("All of the ".concat(x," seats are full. Consider joining another battle or joining this one as a ").concat("contestant"===x?"judge":"contestant"),!1):b||v?c("You are already a ".concat(b?"contestant":"judge"," in this battle. You need to leave that role before can join another one.\nWARNING: Leaving a battle after it has started will result in a penalty.")):void c("Are you sure that you want to join this battle as a ".concat(x,"?\nWARNING: Leaving a battle after it has started will result in a penalty."),!0,null,function(){d();var e=y||Nn.getSeatNumber(C),a=i(),r={userId:s,roleId:N,participantNumber:parseInt(e,10),isReady:"judge"===x},l=[n.id,r];gn.joinBattle(l,a).then(t.updateBattle).catch(o)})}},{key:"handleSortBattleList",value:function(e){if(-1!==e){var t=this.state.currentBattles,a=Cn.sortBattles(t,e);this.setState(function(){return{currentBattles:a}})}}},{key:"handleBattleItemOnClick",value:function(e){var t=this.state,a={currentBattles:t.currentBattles,pendingBattles:t.pendingBattles,tournaments:t.tournaments,requestedBattles:t.requestedBattles,historyBattles:t.historyBattles},n=e.target,r=n.getAttribute("data-battle-id"),s=n.getAttribute("data-state-property"),l=a[s].filter(function(e){return e.id===r})[0];this.setState(function(e){return e.selectedBattle.id&&e.selectedBattle.id===r?{selectedBattle:{},selectedBattleType:null}:{selectedBattle:l,selectedBattleType:s}})}},{key:"handleAddRemoveBattleRequest",value:function(e){var t=this,a=this.state,n=a.selectedBattle,r=a.requestedBattles,s=this.props.userId,l=this.context.masterData,i=l.getAxiosOptions,o=l.handleAsyncError,c=n.id,d=n.RequestedContestants,u=n.RequestingUsers,m=i(),p=u.filter(function(e){return e.user_id===s})[0],f=Object(Ne.a)(d,2),g=f[0],b=f[1],v=g.user_id,E=b.user_id,x=p?"delete":"create",y=v===s||E===s;y&&(x="updateRequestedStatus");var N=(y&&v===s?g:b).BattleRequestStatus.definition,C=e.target.getAttribute("data-status-definition");if(!y||N!==C){var O=[s];switch(x){case"create":O.push({requestor_user_id:s,user_one_id:v,user_two_id:E});break;case"delete":O.push(p.battle_request_id);break;case"updateRequestedStatus":O.push(c,C||N,{})}bn[x](O,m).then(function(e){var a=e.data,l=Object(h.a)({},n),i=r.concat([]),o=function(e){e?i=r.map(function(t){return t.id===n.id?l=e:t}):(l={},i=r.filter(function(e){return e.id!==n.id})),t.setState(function(){return{selectedBattle:l,requestedBattles:i}})},c=a.isFinalRequest,d=a.battle_request_id;if(d)bn.getOne(s,d,m).then(function(e){var t=e.data;o(t)});else{var p=u.filter(function(e){return e.user_id!==s});l=Object(h.a)({},n,{RequestingUsers:p}),c&&(l=null),o(l)}}).catch(o)}}},{key:"handleBattleChallengeResponse",value:function(e){var t=this,a=e.target.getAttribute("data-status-definition");if(a){var n=this.state,r=n.selectedBattle,s=n.pendingBattles,l=r.id,i=r.BattleChallenge,o=this.props,c=o.userId,d=o.updateUser,u=this.context.masterData,m=u.getAxiosOptions,p=u.handleAsyncError,f=m(),g=[],b=i.id,v=i.BattleChallengeRequests.filter(function(e){return e.user_id===c}).length>0,E={user_id:c,battle_challenge_id:b};switch(a){case"accepted":g.push(En.getRoleId("contestant",f),gn.updateBattleChallenge(l,a,f));break;case"rejected":g.push(gn.deleteBattle([l],f));break;case"request":v?g.push(xn.deleteRequest(c,b,f)):g.push(xn.createRequest(b,E,f));break;default:alert("An unexpected error occurred. Please refresh the page")}g.push(),Promise.all(g).then(function(e){var n=Object(Ne.a)(e,1)[0].data.id,i=Object(h.a)({},r),o=s.concat([]),u=function(e){e?o=s.map(function(t){return t.id===r.id?i=e:t}):(i={},o=s.filter(function(e){return e.id!==r.id})),t.setState(function(){return{selectedBattle:i,pendingBattles:o}},d)};if(n||"request"===a){var m={userId:c,roleId:n,participantNumber:2,isReady:!1},p=[];"accepted"===a&&p.push(gn.joinBattle([l,m],f)),Promise.all(p).then(function(){return gn.getOneBattle(l,f)}).then(function(e){var t=e.data;return u(t)})}else u(null)}).catch(p)}}},{key:"componentDidMount",value:function(){this.getBattleRoles()}},{key:"render",value:function(){var e=this.state,t=e.currentBattles,a=e.pendingBattles,n=e.requestedBattles,s=e.historyBattles,l=e.tournaments,i=e.battleRoles,o=e.selectedBattle,c=e.selectedBattleType,d=this.props.userId,u=o.id||0,m=[{labelText:"pending",order:0,battles:a,stateProperty:"pendingBattles"},{labelText:"current",order:1,battles:t,stateProperty:"currentBattles"},{labelText:"tournaments",order:2,battles:l||[],stateProperty:"tournaments"},{labelText:"requests",order:3,battles:n,stateProperty:"requestedBattles"},{labelText:"history",order:4,battles:s,stateProperty:"historyBattles"}];return r.a.createElement("div",{className:"d-flex flex-column flex-sm-row my-5"},r.a.createElement(br,{battlesData:m,selectedBattleId:u,handleSortBattleList:this.handleSortBattleList,handleBattleItemOnClick:this.handleBattleItemOnClick}),"tournaments"===c?r.a.createElement(Or,{key:u,selectedTournament:o}):r.a.createElement(Un,{key:u,userId:d,selectedBattle:o,isSelectedBattleRequested:!!o.RequestedContestants,isSelectedBattleChallenge:!!o.BattleChallenge,battleRoles:i,handleJoinBattleOnClick:this.handleJoinBattle,handleAddRemoveBattleRequest:this.handleAddRemoveBattleRequest,handleBattleChallengeResponse:this.handleBattleChallengeResponse}))}}]),t}(n.Component);function An(e){var t=e.userId,a=Object(n.useContext)(E).masterData.handleOpenAlert;return r.a.createElement("div",{className:"flex-fill d-flex justify-content-around"},r.a.createElement(dr,{userId:t}),r.a.createElement(N.a,{outline:!0,onClick:function(){return a("We want you to be able to quickly join a battle.\nWARNING: This feature is currently being developed. Please be patient while we get it just right for you.",!1)},className:"flex-fill d-flex flex-column align-items-center justify-content-center btn btn-outline-success ml-3 mx-sm-3 rounded-0 text-xxl font-weight-bolder"},r.a.createElement("span",null,"Battle"),r.a.createElement("span",null,"Now")))}On.contextType=E;var kn=a(403),Sn=Ue.BATTLE_UTILS,In=ae.DEFAULT_PROFILE_PHOTO_URL,Tn=ae.MESSAGE_ALL_PENDING_FEATURE,Rn=_e.BATTLE_HELPER,jn=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={featuredBattles:[],activeCarouselIndex:0,isCarouselAnimating:!1},a.handleSetActiveCarouselIndex=a.handleSetActiveCarouselIndex.bind(Object(f.a)(a)),a.handleSetIsCarouselAnimating=a.handleSetIsCarouselAnimating.bind(Object(f.a)(a)),a.handleShowNextCarouselSlide=a.handleShowNextCarouselSlide.bind(Object(f.a)(a)),a.handleShowPreviousCarouselSlide=a.handleShowPreviousCarouselSlide.bind(Object(f.a)(a)),a.handleTempClick=a.handleTempClick.bind(Object(f.a)(a)),a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"handleSetActiveCarouselIndex",value:function(e){this.setState(function(t){return t.activeCarouselIndex!==e?{activeCarouselIndex:e}:null})}},{key:"handleSetIsCarouselAnimating",value:function(e){this.setState(function(t){return t.isCarouselAnimating!==e?{isCarouselAnimating:e}:null})}},{key:"handleShowNextCarouselSlide",value:function(){var e=this.state,t=e.activeCarouselIndex,a=e.featuredBattles;if(!e.isCarouselAnimating){var n=t===a.length-1?0:t+1;this.handleSetActiveCarouselIndex(n)}}},{key:"handleShowPreviousCarouselSlide",value:function(){var e=this.state,t=e.activeCarouselIndex,a=e.featuredBattles;if(!e.isCarouselAnimating){var n=0===t?a.length-1:t-1;this.handleSetActiveCarouselIndex(n)}}},{key:"handleTempClick",value:function(){this.context.masterData.handleOpenAlert(Tn)}},{key:"componentDidMount",value:function(){var e=this,t=this.context.masterData,a=t.getAxiosOptions,n=t.handleAsyncError,r=a();Sn.getFeaturedBattles(r).then(function(t){var a=t.data.map(function(e){return e.Battle});e.setState(function(){return{featuredBattles:a}})}).catch(n)}},{key:"render",value:function(){var e=this,t=this.state,a=t.featuredBattles,n=t.activeCarouselIndex,s=a.map(function(t){var a=t.id,n=t.UserBattles,s=t.Rounds,l=t.RoundCount,i=t.RoundLength,o=t.Status,c=t.Type,d=t.JudgingType,u=l.definition,m=i.definition,p=o.definition,h=c.definition,f=d.definition,g=Rn.getAllParticipants(n||[],s).contestants,b=m>24?m/24:m,v=m>24?"day":"hour";b>1&&(v+="s");var E="".concat(u," ").concat(u>1?"rounds":"round"," @ ").concat(b," ").concat(v);return r.a.createElement(St.a,{key:a,onExiting:function(){return e.handleSetIsCarouselAnimating(!0)},onExited:function(){return e.handleSetIsCarouselAnimating(!1)},className:"h-100"},r.a.createElement(y,{key:a},function(t){var n=t.masterData.goTo;return r.a.createElement("div",{className:"d-flex flex-column h-100 py-2"},r.a.createElement("div",{className:"d-flex justify-content-center"},g.map(function(e,t){var n=e.User,s=void 0!==e.user_id&&null!==e.user_id,l=s&&e.id&&e.User.Profile.photo?e.User.Profile.photo:In;return r.a.createElement("div",{key:s?"".concat(n.id,"-").concat(t,"-").concat(a):a,className:"mx-3"},r.a.createElement("img",{src:l,alt:"contestant ".concat(s?n.nickname:t+1),style:{height:"96px",width:"128px"},className:""}),r.a.createElement("div",{className:""},r.a.createElement("p",{className:"m-0 px-1 font-weight-bolder text-truncate ".concat(s?"text-secondary":"text-success")},s?n.nickname:"Join")))})),r.a.createElement("div",{className:"flex-fill"},r.a.createElement("h3",{className:"mb-0 text-capitalize"},"standard"===h?"".concat(h," battle"):h),r.a.createElement("div",{className:"d-flex justify-content-around"},r.a.createElement("p",null,E),r.a.createElement("p",null,p)),r.a.createElement("div",{className:"d-flex justify-content-center justify-content-sm-around flex-sm-wrap mx-5"},"judges"===f&&r.a.createElement(N.a,{outline:!0,size:"sm","data-seat-number":1,onClick:e.handleTempClick,className:"flex-fill btn-outline-primary m-sm-1 rounded-0"},"Judge"),r.a.createElement(N.a,{outline:!0,size:"sm","data-seat-number":1,onClick:e.handleTempClick,className:"flex-fill mx-1 my-sm-1 rounded-0 ".concat("judges"===f?"btn-outline-secondary":"btn-outline-primary")},"Contestant"),r.a.createElement(N.a,{outline:!0,size:"sm",onClick:function(){return n("battles/".concat(a))},className:"flex-fill m-sm-1 rounded-0"},"GOTO"))))}))});return r.a.createElement("div",{className:"flex-fill mt-3 mt-sm-0 border border-primary featured-battles"},0===s.length?r.a.createElement("div",{className:"d-flex flex-column justify-content-center h-100"},r.a.createElement("span",{className:"text-xxl"},"No Featured Battles"),r.a.createElement("span",{className:"text-xl"},"Coming Soon!"),r.a.createElement("span",{className:"text-xl"},"Promoted Battles")):r.a.createElement(It.a,{activeIndex:n,next:this.handleShowNextCarouselSlide,previous:this.handleShowPreviousCarouselSlide,className:"d-flex h-100"},s,r.a.createElement("div",null,r.a.createElement(kn.a,{direction:"prev",directionText:"Previous",onClickHandler:this.handleShowPreviousCarouselSlide,className:"w-auto featured-battles-controls"}),r.a.createElement(kn.a,{direction:"next",directionText:"Next",onClickHandler:this.handleShowNextCarouselSlide,className:"w-auto featured-battles-controls"}))))}}]),t}(n.Component);jn.contextType=E;var wn=ae.DEFAULT_PROFILE_PHOTO_URL,Bn=_e.BATTLE_HELPER;function Un(e){var t=e.selectedBattle,a=e.isSelectedBattleRequested,s=e.isSelectedBattleChallenge,l=e.userId,i=e.battleRoles,o=e.handleJoinBattleOnClick,c=e.handleAddRemoveBattleRequest,d=e.handleBattleChallengeResponse,u=Object(n.useContext)(E).masterData.goTo,m=window.screen.width<576,p=Object(n.useState)(!m),h=Object(Ne.a)(p,2),f=h[0],g=h[1],b=t.id,v=t.Rounds,x=t.RoundCount,y=t.RoundLength,C=t.ScoringType,O=t.ScoringRound,A=t.StagingRound,k=t.Status,S=t.Type,I=t.UserBattles,T=t.JudgingType,R=t.VerseLength,j=S?S.definition:void 0,w=k?k.definition:void 0,B=x?x.definition:void 0,U=y?y.definition:void 0,P=R?R.definition:void 0,_=C?C.definition:void 0,D=T?T.definition:void 0,L=O?O.definition:void 0,M=A?A.definition:void 0,F=U>24?U/24:U,V=U>24?"day":"hour";F>1&&(V+="s");var q,G,z="".concat(B," ").concat(B>1?"rounds":"round"," @ ").concat(F," ").concat(V),H=("".concat(U," hrs"),"".concat(P>90?"".concat(P/60," min"):"".concat(P," sec")," "),"".concat(M," hrs"),"".concat(L," hrs"),Bn.getAllParticipants(I||[],v).contestants),W="pending",J="";if(t.id&&s){var Q=t.BattleChallenge,Y=t.called_out_user_id;J="accepted"===(W=Q.BattleChallengeStatus.definition)?"text-success":"text-info",q=Y,G=Q.challenger_user_id}var X,Z=H?H.map(function(e,i){var c=e.User,d=void 0!==e.user_id&&null!==e.user_id,u=d&&e.id&&e.User.Profile.photo?e.User.Profile.photo:wn,m="contestant-seat-".concat(d&&e.participant_number?e.participant_number:"available","-").concat(b,"-").concat(i),p=d?c.nickname:"Join",h="/profile/".concat(d&&e.user_id?e.user_id:"available"),f=d&&e.id?e.User.Profile:{},g=!1,v=!1,E="pending";if(t.id&&a){var x=t.RequestedContestants[i],y=x.user_id,C=x.User,O=x.BattleRequestStatus,A=C.nickname,k=C.Profile;g="accepted"===(E=O.definition),v="rejected"===E,u=k.photo,m="contestant-seat-".concat(y),p=A,h="/profile/".concat(y),f=k}var S=g?"text-success":"text-info";if(S=v?"text-danger":S,1===i&&t.id&&s){var I=t.BattleChallenge.ChallengedUser,T=I.user_id,R=I.nickname,j=I.Profile;u=j.photo,m="contestant-seat-".concat(T),p=R,h="/profile/".concat(T),f=j}return r.a.createElement("div",{key:d?"".concat(c.id,"-").concat(i):i,className:"d-flex flex-column align-items-center w-50 text-center battle-info-contestant"},r.a.createElement("img",{src:u,alt:d?"contestant ".concat(c.nickname):"Join this battle"}),e.id||a||s?r.a.createElement(n.Fragment,null,r.a.createElement(tr,{id:m,userId:l,labelText:p,profile:f,userProfileUrl:h,buttonClassName:"font-weight-bolder text-truncate ".concat(d||a?"text-secondary":"text-success")}),a&&r.a.createElement("small",{className:"text-sm ".concat(S)},E)):r.a.createElement(N.a,{color:"link","data-role":"contestant","data-seat-number":i+1,onClick:o,className:"d-inline-block p-0 font-weight-bold text-truncate text-decoration-none text-success"},"Join It!"))}):[],K=0,$=!1,ee="pending";if(a){var te=t.RequestingUsers,ae=t.RequestedContestants;if(K=te.length,$=te.filter(function(e){return e.user_id===l}).length>0,X=ae.filter(function(e){return e.user_id===l})[0])ee=X.BattleRequestStatus.definition}var ne=0,re=!1;if(s){var se=t.BattleChallenge.BattleChallengeRequests;ne=se.length,re=se.filter(function(e){return e.user_id===l}).length>0}var le=Bn.getBattleInfo(t);return r.a.createElement("div",{className:"d-flex flex-column bg-darkest border border-darkest battle-info-pane ".concat(m?"sticky-top":"")},t.id?r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"d-flex flex-column battle-info-contestants-actions"},r.a.createElement("div",{className:"d-flex justify-content-center"},Z),s&&r.a.createElement("p",{className:"m-0 text-uppercase font-weight-bold ".concat(J)},r.a.createElement("span",{className:"mx-2"},"CHALLENGE"),r.a.createElement("span",null,W)),r.a.createElement("div",{className:"d-flex flex-sm-column justify-content-center"},a&&r.a.createElement(vr,{responseStatus:ee,requestCount:K,isUserRequestor:$,isUserRespondent:X,isUserChallengeRequestor:!1,responseType:"battle-request",isBattleStaging:"staging"===w,handleUpdateStatus:c}),s&&r.a.createElement(vr,{responseStatus:W,requestCount:ne,isUserRequestor:l===G,isUserChallengeRequestor:re,isUserRespondent:l===q,responseType:"battle-challenge",isBattleStaging:"staging"===w,handleUpdateStatus:d}),!a&&r.a.createElement(n.Fragment,null,"judges"===D&&r.a.createElement(N.a,{outline:!0,size:"sm","data-role":i.judge.definition,"data-seat-number":1,onClick:o,className:"btn-outline-primary py-0 mb-sm-2 rounded-0"},"Judge"),!s&&r.a.createElement(N.a,{outline:!0,size:"sm","data-role":i.contestant.definition,"data-seat-number":1,onClick:o,className:"py-0 mx-2 mx-sm-0 mb-sm-2 rounded-0 ".concat("judges"===D?"btn-outline-secondary":"btn-outline-primary")},"Contestant"),r.a.createElement(N.a,{outline:!0,size:"sm",onClick:function(){return u("battles/".concat(b))},className:"py-0 rounded-0"},"GOTO")))),!a&&r.a.createElement("div",{className:"flex-fill mt-2"},r.a.createElement("div",{className:"border-bottom border-darker"},r.a.createElement("p",{className:"m-0 text-capitalize font-weight-bold battle-info-status"},"standard"===j?"".concat(j," battle"):j),r.a.createElement("div",{className:"d-flex justify-content-around px-1"},r.a.createElement("small",{className:"flex-fill font-italic text-capitalize"},z),r.a.createElement("small",{className:"flex-fill text-capitalize"},w),r.a.createElement(N.a,{onClick:function(){return g(!f)},className:"d-sm-none border-0 ml-auto p-0 text-primary text-right bg-transparent outline-none"},r.a.createElement(qe.a,{fixedWidth:!0,icon:f?Ve.h:Ve.f})))),r.a.createElement(Qe.a,{isOpen:f,className:""},r.a.createElement(Rr,{battleData:le,isHorizontal:!0,itemClassName:"w-50"})))):r.a.createElement("p",{className:"mx-3 my-auto my-sm-5 text-xl font-weight-bold"},"Select a battle from the list for more info."))}var Pn=a(404),_n=a(405);function Dn(e){var t=e.notification,a=e.editIndex,s=e.goTo,l=e.handleRemoveToast,i=Object(n.useState)(!0),o=Object(Ne.a)(i,2),c=o[0],d=o[1],u=function(){l(a),h&&clearTimeout(h),d(!1)},m=t.title,p=t.destinationUrl,h=setTimeout(u,7500);return r.a.createElement(Pn.a,{isOpen:c,className:"mb-1 rounded-0 bg-darkest-50"},r.a.createElement(_n.a,{icon:"darkest",tag:"button",onClick:function(){return s(p)},className:"p-1 bg-darker border-primary",tagClassName:"d-flex justify-content-between align-items-center btn-block bg-transparent border-0 text-left text-secondary font-weight-bold outline-none"},r.a.createElement("p",{className:"m-0"},m),r.a.createElement(N.a,{close:!0,onClick:u,className:"text-danger close"},r.a.createElement(qe.a,{icon:Ve.z,size:"xs"}))))}var Ln=a(406),Mn=a(407),Fn=a(408),Vn=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={isPopoverOpen:!1},a.togglesPopoverOpen=a.togglesPopoverOpen.bind(Object(f.a)(a)),a.handleListItemOnClick=a.handleListItemOnClick.bind(Object(f.a)(a)),a.acceptFriendRequest=a.acceptFriendRequest.bind(Object(f.a)(a)),a.acceptBattleChallenge=a.acceptBattleChallenge.bind(Object(f.a)(a)),a.acceptBattleRequest=a.acceptBattleRequest.bind(Object(f.a)(a)),a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"togglesPopoverOpen",value:function(){this.setState(function(e){return{isPopoverOpen:!e.isPopoverOpen}})}},{key:"handleListItemOnClick",value:function(e,t){var a=this.props,n=a.userId,r=a.updateUser,s=this.context.masterData,l=s.goTo,i=s.getAxiosOptions,o=s.handleAsyncError,c=i();Te.update(n,e,{is_read:!0},c).then(function(){r(),l(t)}).catch(o)}},{key:"acceptFriendRequest",value:function(e,t){var a=this.props,n=a.userId,r=a.updateUser,s=this.context.masterData,l=s.getAxiosOptions,i=s.handleAsyncError,o=l(),c=Re.update([n,e],o),d=Te.update(n,t,{is_request_accepted:!0,is_read:!0},o);Promise.all([c,d]).then(r).catch(i)}},{key:"acceptBattleChallenge",value:function(e,t){var a=this.props,n=a.userId,r=a.updateUser,s=this.context.masterData,l=s.getAxiosOptions,i=s.handleAsyncError,o=l(),c=[Se.getRoleId("contestant",o),Te.update(n,t,{is_request_accepted:!0,is_read:!0},o),Ce.updateBattleChallenge(e,"accepted",o)];Promise.all(c).then(function(t){var a=Object(Ne.a)(t,1)[0].data.id;return Ce.joinBattle([e,{userId:n,roleId:a,participantNumber:2,isReady:!1}],o)}).then(r).catch(i)}},{key:"acceptBattleRequest",value:function(e,t){var a=this.props,n=a.userId,r=a.updateUser,s=this.context.masterData,l=s.getAxiosOptions,i=s.handleAsyncError,o=l(),c=[Te.update(n,t,{is_request_accepted:!0,is_read:!0},o),we.updateRequestedStatus([n,e,"accepted",{}],o)];Promise.all(c).then(r).catch(i)}},{key:"render",value:function(){var e=this,t=this.state.isPopoverOpen,a=this.props,n=a.type,s=a.icon,l=a.notifications,i=a.handleSetNotificationsAsSeen,o=l.filter(function(e){return!e.is_seen}).length;l.sort(function(e,t){return e.createdAt<t.createdAt?1:-1});return r.a.createElement("div",null,r.a.createElement(N.a,{id:"".concat(n,"-popover"),type:"button","data-notification-type":n,onClick:o>0?i:null,className:"d-flex justify-content-center align-items-start p-0 rounded-circle bg-transparent border-0 text-dark notification-button"},r.a.createElement(qe.a,{fixedWidth:!0,icon:s,size:"lg",className:"no-pointer-events"}),r.a.createElement(Et.a,{color:"secondary",className:"py-0 bg-transparent text-primary no-pointer-events"},o>0&&o)),r.a.createElement(Ln.a,{hideArrow:!0,trigger:"legacy",delay:0,placement:"bottom",isOpen:t,target:"".concat(n,"-popover"),container:"notification-buttons",toggle:this.togglesPopoverOpen,innerClassName:"h-100 bg-darkest",popperClassName:"m-0 rounded-0 bg-darker overflow-auto notification-menu"},r.a.createElement(Mn.a,{className:"rounded-0 bg-darkest text-capitalize text-sm border-primary"},"".concat(n," notifications")),r.a.createElement(Fn.a,{className:"p-0"},(!l||0===l.length)&&r.a.createElement(nt.a,{className:"py-1 px-2 text-secondary text-sm text-wrap notification-item"},"No notifications available. Please check back later."),l.map(function(t){var a=t.id,n=t.Notification,s=t.is_read,l=t.is_request,i=t.is_request_accepted,o=n.category,c=n.description,d=n.destination_url,u=n.user_id,m=n.content_id,p=c.split(" - ");return r.a.createElement(nt.a,{key:"".concat(n.id,"-").concat(s),tag:"div",className:"py-0 px-1 bg-darkest border-bottom border-secondary notification-item"},r.a.createElement("div",{className:"d-flex"},r.a.createElement(N.a,{onClick:function(){return e.handleListItemOnClick(a,d)},className:"flex-fill p-1 text-left text-secondary text-sm text-wrap bg-transparent border-0 outline-none rounded-0"},r.a.createElement("p",{className:"m-0"},r.a.createElement("span",{className:"font-weight-bold"},p[0]),r.a.createElement("span",{className:"mx-1"},p[1])),r.a.createElement("div",{className:"d-flex"},r.a.createElement("p",{className:"mb-0"},r.a.createElement(qe.a,{icon:Ve.i,size:"sm",fixedWidth:!0,className:"mr-1"}),Dt()(n.createdAt).from(Dt()())),!s&&r.a.createElement("span",{className:"align-self-end mx-2 text-xs text-success"},"NEW!"))),l&&!i&&r.a.createElement(N.a,{color:"transparent",size:"sm",onClick:function(){return function(t,a,n){var r=null;switch(t){case"community":r=e.acceptFriendRequest;break;case"battle":r=e.acceptBattleChallenge;break;case"battle-request":r=e.acceptBattleRequest;break;default:r=null}r(a,n)}(o,o.includes("battle")?m:u,a)},className:"p-1 text-primary rounded-0"},r.a.createElement(qe.a,{icon:Ve.e,size:"sm",fixedWidth:!0,className:"text-success"}))))}))))}}]),t}(n.Component);Vn.contextType=E;var qn=a(1),Gn=a.n(qn),zn=a(409);function Hn(e){var t=e.children,a=e.targetId,s=e.placement,l=e.boundariesElement,i=e.container,o=Object(n.useState)(!1),c=Object(Ne.a)(o,2),d=c[0],u=c[1];return r.a.createElement(zn.a,{trigger:"legacy",placement:s,isOpen:d,target:a,toggle:function(){return u(!d)},boundariesElement:l,container:i},t)}Hn.defaultProps={children:"",targetId:void 0,placement:"left",boundariesElement:"viewport",container:"body"},Hn.propTyps={children:Gn.a.oneOfType([Gn.a.string,Gn.a.element]),targetId:Gn.a.string,placement:Gn.a.string,boundariesElement:Gn.a.string,container:Gn.a.string};var Wn=a(410),Jn=a(411),Qn=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={activeTab:0},a.setActiveTab=a.setActiveTab.bind(Object(f.a)(a)),a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"setActiveTab",value:function(e){this.setState(function(t){return e!==t.activeTab?{activeTab:e}:null})}},{key:"render",value:function(){for(var e=this,t=this.state.activeTab,a=this.props,n=a.roundCount,s=a.rounds,l=a.resultCards,i=a.judges,o=a.judgesListGroup,c=a.isJudgePanelOpen,d=s.map(function(e){return{roundId:e.id,number:e.number}}),u=Object.keys(l),m={},p=window.screen.width>=576,h=0;h<u.length;h++){var f=u[h],g=l[f].scorecards;m[f]=g}for(var b=[],v=function(a){b.push(r.a.createElement(vt.a,{key:"".concat(t===a,"-").concat(a),className:"flex-fill flex-sm-grow-0 cursor-pointer"},r.a.createElement(Ct.a,{onClick:function(){e.setActiveTab(a)},className:"p-0 px-sm-1 rounded-0 border-top-0 border-left-0 ".concat(t===a?"active bg-darkest-90 border-primary":"border-right-0 border-bottom-0"," ").concat(p?"border-bottom-0":"border-right-0")},a<n?"R".concat(a+1):p?"TS":"Total")))},E=0;E<n+1;E++)v(E);for(var x=[],y=function(e){var t=(d.filter(function(t){return t.number===e+1})[0]||{}).roundId,a=[m.contestant1?m.contestant1.filter(function(e){return e.round_id===t}):[],m.contestant2?m.contestant2.filter(function(e){return e.round_id===t}):[]];x.push(r.a.createElement(Wn.a,{key:"".concat(t,"-").concat(e),tabId:e,className:"h-100"},r.a.createElement("div",{className:"d-flex flex-column flex-sm-row justify-content-around h-100"},i.map(function(t,s){var l=e===n,i=m.contestant1?m.contestant1.filter(function(e){return e.user_id===t.user_id}):[],o=m.contestant2?m.contestant2.filter(function(e){return e.user_id===t.user_id}):[];return r.a.createElement("div",{key:"".concat(t.user_id,"-").concat(s,"-").concat(e)||s,className:"flex-fill px-3 py-1 ".concat(p?"border-right border-left border-darker":"")},r.a.createElement("div",{className:"d-flex justify-content-around"},a.map(function(a,n){var c=n+1,d=function(e,t){if(!e||!t)return"TBD";var a=t.filter(function(t){return t.user_id===e})[0];return a?a.score:"TBD"}(t.user_id,a),u=0;if(l){var m=(1===c?i:o).map(function(e){return e.score});u=m.reduce(function(e,t){return e+t},0),u/=m.length,u=Number(Math.round(u+"e2")+"e-2").toFixed(1),isNaN(u)&&(u="TBD")}return r.a.createElement("div",{key:"".concat(t.user_id,"-").concat(s,"-").concat(e,"-").concat(c),className:"flex-fill"},r.a.createElement("p",{className:"m-0 text-xs"},"contestant ".concat(c)),r.a.createElement("span",{className:"d-block ".concat(p?"text-xxl":"text-lg"," ").concat(1===c?"border-right border-dark":"")},l?u:d))})))}))))},N=0;N<n+1;N++)y(N);return r.a.createElement("div",{className:"d-flex flex-column flex-sm-row h-100"},r.a.createElement(bt.a,{tabs:!0,className:"flex-sm-column justify-content-around justify-content-sm-start border-bottom-0"},b),r.a.createElement("div",{className:"d-flex flex-sm-column flex-fill"},c&&o,r.a.createElement(Jn.a,{activeTab:t,className:"flex-fill"},x)))}}]),t}(n.Component),Yn=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={searchResults:[],selectedUser:null},a.handleInputOnChange=a.handleInputOnChange.bind(Object(f.a)(a)),a.handleSearchItemOnClick=a.handleSearchItemOnClick.bind(Object(f.a)(a)),a.handleRemoveSelctedUser=a.handleRemoveSelctedUser.bind(Object(f.a)(a)),a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"handleInputOnChange",value:function(e){var t=this,a=e.target.value;if(a.length<2)return this.setState(function(){return{searchResults:[]}});var n=this.props,r=n.userId,s=n.requestedRappers,l=this.context.masterData,i=l.getAxiosOptions,o=l.handleAsyncError,c=i();xe.search(r,a,c).then(function(e){var a=e.data.filter(function(e){return!s.includes(e.user_id)});t.setState(function(){return{searchResults:a}})}).then(function(e){return e?o(e):null})}},{key:"handleSearchItemOnClick",value:function(e){var t=this.state.searchResults,a=this.props,n=a.dataNumber,r=a.setChallengerUserId,s=e.target.getAttribute("data-user-id");if(s&&t&&!(!t.length>0)){var l=t.filter(function(e){return e.user_id===s})[0];l&&(document.getElementById("user-search").value=l.nickname,this.setState(function(e){var t=e.selectedUser;return!t||t.user_id!==s?{searchResults:[],selectedUser:l}:null},function(){return r(s,n)}))}}},{key:"handleRemoveSelctedUser",value:function(){var e=this.props,t=e.dataNumber,a=e.setChallengerUserId;this.setState(function(){return{selectedUser:null}},function(){return a(null,t)})}},{key:"render",value:function(){var e=this,t=this.state,a=t.searchResults,n=t.selectedUser,s=this.props,l=s.labelText,i=s.placeholderText,o=s.isOptional,c=s.isTooltipShown,d=s.inputClassName;return r.a.createElement(Ze.a,{className:"position-relative form-group-lg text-left mx-3 mx-lg-5"},r.a.createElement(Ke.a,{for:"user-search",className:"d-flex justify-content-between align-items-center mb-0"},r.a.createElement("span",{className:"d-flex align-items-center"},l,o&&r.a.createElement("small",{className:"mx-1 text-sm"},"(optional)")),c&&r.a.createElement(qe.a,{id:"user-search-info",icon:Ve.p,className:"text-info"})),n?r.a.createElement("div",{id:"user-search","data-selected-user-id":n.user_id},r.a.createElement("div",{className:"d-flex align-items-center form-control bg-darker-50 rounded-0"},r.a.createElement("p",{className:"flex-fill mb-0 font-weight-bold"},n.nickname),r.a.createElement(N.a,{close:!0,onClick:this.handleRemoveSelctedUser,className:"d-flex align-items-center p-0 m-1 text-danger close"},r.a.createElement("small",{className:"mx-1 text-sm text-shadow-none"},"remove"),r.a.createElement(qe.a,{icon:Ve.z})))):r.a.createElement($e.a,{type:"search",name:"search",id:"user-search",autoComplete:"off",placeholder:i,onChange:this.handleInputOnChange,className:"rounded-0 ".concat(d)}),c&&r.a.createElement(Hn,{targetId:"user-search-info",placement:"left"},r.a.createElement("span",{className:"d-block text-left"},"Challenge another rapper to battle against")),a.length>0&&r.a.createElement(Nt.a,{className:"position-absolute z-index-300 w-100 px-1 bg-darker"},a.map(function(t){return r.a.createElement(yt.a,{key:t.user_id,action:!0,tag:"button","data-user-id":t.user_id,onClick:e.handleSearchItemOnClick,className:"p-1 my-1 bg-transparent rounded-0 text-left outline-none"},r.a.createElement("div",{className:"d-flex align-items-center no-pointer-events"},r.a.createElement("img",{src:t.photo,alt:t.nickname,style:{width:"24px",height:"24px"}}),r.a.createElement("span",{className:"flex-fill mx-2"},t.nickname)))})))}}]),t}(n.Component);function Xn(e){var t=e.battleChallenge,a=e.handleAcceptBattleChallenge,n=e.handleRejectBattleChallenge,s=t.createdAt,l=t.ChallengerUser.nickname;return r.a.createElement("div",{className:"mx-5 p-2 bg-darkest"},r.a.createElement("h3",null,"BATTLE CHALLENGE"),r.a.createElement("div",{className:"d-flex flex-column"},r.a.createElement("p",{className:"text-xl"},"".concat(l," challenged you to a battle.")),r.a.createElement("p",{className:"mb-0 text-danger"},"This battle will be deleted ".concat(Dt()(s).utc().add(168,"hours").from(Dt()().utc())," if you do not respond.")),r.a.createElement("p",{className:"text-danger"},"This battle will be deleted if you reject the challenge.")),r.a.createElement("div",null,r.a.createElement(N.a,{outline:!0,size:"md",id:"reject",onClick:n,className:"btn-outline-secondary my-0 mx-1 px-5 rounded-0"},"Reject"),r.a.createElement(N.a,{outline:!0,size:"md",id:"confirm",onClick:a,className:"btn-outline-primary m-0 px-5 rounded-0"},"Accept")))}function Zn(e){var t=e.relationship,a=e.isUserOwner,s=e.relationshipType,l=e.handleRemoveFriend,i=t.photo,o=t.nickname,c=t.is_online,d=t.user_id,u=Object(n.useContext)(E).masterData.goTo;return r.a.createElement(yt.a,{className:"d-flex align-items-center px-0 py-1 bg-transparent rounded-0 border-left-0 border-top-0 border-right-0 border-secondary"},r.a.createElement(N.a,{onClick:function(){return u("profile/".concat(d))},className:"d-flex align-items-center w-100 p-0 text-secondary bg-darkest border-0 rounded-0 outline-none"},r.a.createElement("img",{src:i,alt:o,className:"relationship-image"}),r.a.createElement("span",{className:"flex-fill mx-2 text-left text-truncate"},o),a&&r.a.createElement("span",{className:"align-self-end mr-3 text-sm ".concat(c?"text-success":"text-danger")},c?"online":"offline")),a&&r.a.createElement(Kn,{userId:d,friendUserId:d,relationshipType:s,goTo:u,handleRemoveFriend:l}))}function Kn(e){var t=e.userId,a=e.friendUserId,s=e.relationshipType,l=e.goTo,i=e.handleRemoveFriend,o=Object(n.useState)(!1),c=Object(Ne.a)(o,2),d=c[0],u=c[1],m=[{labelText:"Profile",handleOnClick:function(){return l("profile/".concat(t))}},{labelText:"Message",handleOnClick:null}];return"friend"===s&&m.push({labelText:"Remove",handleOnClick:function(){return i(a)}}),r.a.createElement(Xa.a,{isOpen:d,toggle:function(){return u(!d)},direction:"left",className:"px-1"},r.a.createElement(Jt.a,{className:"p-0 text-secondary border-0 bg-transparent rounded-0"},r.a.createElement(qe.a,{icon:Ve.l})),r.a.createElement(Qt.a,{className:"rounded-0 bg-darker"},m.map(function(e,t){var a=e.labelText,n=e.handleOnClick;return r.a.createElement(nt.a,{key:"".concat(a,"-").concat(t),onClick:n,className:"text-secondary relationship-list-item"},a)})))}Yn.contextType=E;var $n=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={relationships:[]},a.updateFriends=a.updateFriends.bind(Object(f.a)(a)),a.handleRemoveFriend=a.handleRemoveFriend.bind(Object(f.a)(a)),a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"updateFriends",value:function(){var e=this,t=this.props,a=t.userId,n=t.relationshipType,r=this.context.masterData,s=r.getAxiosOptions,l=r.handleAsyncError,i=s();Re.getAllUser(a,n,i).then(function(t){var n=t.data.map(function(e){var t=e.UserOne,n=e.UserTwo,r=t.user_id,s=a===r?n:t;return{user_id:s.user_id,nickname:s.nickname,is_online:s.is_online,photo:s.Profile.photo}});e.setState(function(){return{relationships:n}})}).catch(l)}},{key:"handleRemoveFriend",value:function(e){var t=this.props.userId,a=this.context.masterData,n=a.getAxiosOptions,r=a.handleAsyncError,s=n();Re.delete([t,e],s).then(this.updateFriends).catch(r)}},{key:"componentDidMount",value:function(){this.updateFriends()}},{key:"render",value:function(){var e=this,t=this.state.relationships,a=this.props,n=a.isUserOwner,s=a.relationshipType;return r.a.createElement("div",{className:"d-flex flex-column flex-sm-row flex-md-column"},t.length>0?r.a.createElement(Nt.a,{className:"w-100 p-1"},t.map(function(t){return r.a.createElement(Zn,{key:t.user_id,relationship:t,isUserOwner:n,relationshipType:s,handleRemoveFriend:e.handleRemoveFriend})})):r.a.createElement("p",{className:"my-3 text-xxl"},"No ".concat(s,"s")))}}]),t}(n.Component);function er(e){var t=e.activeTab,a=e.isUserProfileOwner,s=e.profileUserId,l=Object(n.useState)(t||0),i=Object(Ne.a)(l,2),o=i[0],c=i[1];return r.a.createElement("div",null,r.a.createElement(bt.a,{tabs:!0,className:"flex-nowrap border-0"},te.map(function(e){var t=e.order,a=e.labelText;return r.a.createElement(vt.a,{key:"tab-".concat(a,"-").concat(t),className:"flex-fill cursor-pointer people-tab-item"},r.a.createElement(Ct.a,{onClick:function(){return c(t)},className:"py-1 px-2 bg-darkest rounded-0 border-top-0 border-right-0 border-left-0 ".concat(o===t?"border-bottom border-primary":"")},a))})),r.a.createElement(Jn.a,{activeTab:o},te.map(function(e){var t=e.order,n=e.labelText;return r.a.createElement(Wn.a,{key:"tab-pane-".concat(n,"-").concat(t),tabId:t},"Top 5"===n?r.a.createElement(or,{isUserProfileOwner:a,profileUserId:s}):r.a.createElement($n,{userId:s,isUserOwner:a,relationshipType:"Friends"===n?"friend":"rival"}))})))}$n.contextType=E;var tr=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={isPopoverOpen:!1,isFavoriteRapper:!1},a.toggleIsPopoverOpen=a.toggleIsPopoverOpen.bind(Object(f.a)(a)),a.handleAddFavoriteRapper=a.handleAddFavoriteRapper.bind(Object(f.a)(a)),a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"toggleIsPopoverOpen",value:function(){this.setState(function(e){return{isPopoverOpen:!e.isPopoverOpen}})}},{key:"handleAddFavoriteRapper",value:function(){var e=this,t=this.state.isFavoriteRapper,a=this.props,n=a.userId,r=a.profile,s=this.context.masterData,l=s.getAxiosOptions,i=s.handleAsyncError,o=s.handleOpenAlert,c=l(),d=r.user_id,u=t?"delete":"create",m=[n];"create"===u?m.push({user_id:n,rapper_id:d}):m.push(d),je[u](m,c).then(function(){return e.setState(function(e){return{isFavoriteRapper:!e.isFavoriteRapper}})}).catch(function(e){var t="".concat(e.response.data,"\nWARNING: You can only have 5 favorite rappers.");o(t,!1),i(e)})}},{key:"componentDidMount",value:function(){var e=this,t=this.props,a=t.userId,n=t.profile,r=this.context.masterData,s=r.getAxiosOptions,l=r.handleAsyncError,i=s(),o=n.user_id;je.getOne(a,o,i).then(function(t){return e.setState(function(){return{isFavoriteRapper:!!t.data}})}).catch(l)}},{key:"render",value:function(){var e,t=this.state,a=t.isPopoverOpen,n=t.isFavoriteRapper,s=this.props,l=s.id,i=s.userId,o=s.labelText,c=s.profile,d=s.userProfileUrl,u=s.buttonClassName,m=s.containerClassName,p=c.popularity,h=c.photo,f=c.battle_rating,g=c.battle_reputation,b=c.judge_reputation,v=c.win_count,E=c.loss_count,x=c.battle_count,y=c.draw_count,k="chartreuse";return p<20?k="red":p<40?k="orangered":p>=90?k="darkgoldenrod":p>=70&&(k="green"),e=0===x?0:y?(v+.5*y)/x:v/x,e=Number(Math.round(e+"e2")+"e-2").toFixed(2),r.a.createElement("div",{className:m||""},r.a.createElement(N.a,{id:l,color:"link",className:"d-inline-block p-0 text-truncate text-decoration-none text-secondary ".concat(u||"text-xxl")},o),r.a.createElement(Ln.a,{delay:250,trigger:"hover click",placement:"bottom",isOpen:a,target:l,toggle:this.toggleIsPopoverOpen,innerClassName:"",popperClassName:"bg-darker rounded-0"},r.a.createElement(Fn.a,{className:"p-0"},r.a.createElement(C.a,{fluid:!0,className:"p-0"},r.a.createElement(O.a,null,r.a.createElement(A.a,{xs:"4",className:"pr-0"},r.a.createElement("img",{src:h,alt:o,className:"w-100 user-popover-image"})),r.a.createElement(A.a,{className:"pl-0 text-center"},r.a.createElement("div",{className:"h-100 bg-darkest"},r.a.createElement("h3",{className:"m-0 text-secondary text-lg"},o),r.a.createElement("p",{className:"m-0 text-xl text-secondary"},f)))),r.a.createElement(O.a,null,r.a.createElement(A.a,{xs:"4",className:"pr-0"},r.a.createElement(Nt.a,{className:"h-100 bg-darkest"},r.a.createElement(yt.a,{className:"p-1 text-center rounded-0 bg-darkest"},r.a.createElement(st.a,{to:d,className:"d-inline-block w-100 text-decoration-none text-secondary"},"Profile")),r.a.createElement(yt.a,{className:"p-1 text-center text-secondary rounded-0 bg-darkest"},"Message"),i!==c.user_id&&r.a.createElement(yt.a,{className:"p-1 text-center text-secondary rounded-0 bg-darkest"},r.a.createElement(N.a,{color:"link",size:"sm",onClick:this.handleAddFavoriteRapper,className:"d-flex align-items-center w-100 px-2 py-0 text-decoration-none text-success"},r.a.createElement(qe.a,{fixedWidth:!0,size:"sm",icon:n?Ve.B:Ve.u}),r.a.createElement("span",{className:"flex-fill"},"Top 5"))))),r.a.createElement(A.a,{className:"pl-0 text-secondary"},r.a.createElement("div",{className:"d-flex flex-column pb-1 h-100 bg-darkest-75"},r.a.createElement("div",{className:"d-flex flex-column flex-fill"},r.a.createElement("div",{className:"position-relative my-auto mx-sm-3 mx-md-0"},r.a.createElement(lt.a,{value:p,className:"rounded-0 bg-darker popularity-progress ".concat(k)},r.a.createElement(Ke.a,{className:"m-auto"}))),r.a.createElement("div",{className:"d-flex flex-column justify-content-around flex-fill p-1"},r.a.createElement("div",{className:"d-flex align-items-center mb-2"},r.a.createElement(qe.a,{fixedWidth:!0,size:"lg",icon:Ve.q,className:"d-block mx-auto"}),r.a.createElement(it.a,{readonly:!0,size:"lg",emptySymbol:r.a.createElement(qe.a,{fixedWidth:!0,icon:rt.c}),fullSymbol:r.a.createElement(qe.a,{fixedWidth:!0,icon:Ve.w}),placeholderSymbol:r.a.createElement(qe.a,{fixedWidth:!0,icon:Ve.w}),placeholderRating:4.5,initialRating:g,className:"flex-fill mx-1 reputation-rating"})),r.a.createElement("div",{className:"d-flex align-items-center"},r.a.createElement(qe.a,{fixedWidth:!0,size:"lg",icon:Ve.m,className:"d-block mx-auto"}),r.a.createElement(it.a,{readonly:!0,size:"lg",emptySymbol:r.a.createElement(qe.a,{fixedWidth:!0,icon:rt.c}),fullSymbol:r.a.createElement(qe.a,{fixedWidth:!0,icon:Ve.w}),placeholderSymbol:r.a.createElement(qe.a,{fixedWidth:!0,icon:Ve.w}),placeholderRating:4.5,initialRating:b,className:"flex-fill mx-1 reputation-rating"})))),r.a.createElement("div",{className:"d-flex justify-content-around"},r.a.createElement("div",{className:"flex-fill text-center"},r.a.createElement(Ke.a,{className:"d-block mb-0 font-weight-bold"},"W/L"),r.a.createElement(Ke.a,{className:"d-block mb-0 text-sm"},"".concat(v," / ").concat(E))),r.a.createElement("div",{className:"flex-fill text-center border-left border-right border-darker"},r.a.createElement(Ke.a,{className:"d-block mb-0 font-weight-bold"},"Ratio"),r.a.createElement(Ke.a,{className:"d-block mb-0 text-sm"},e)),r.a.createElement("div",{className:"flex-fill text-center"},r.a.createElement(Ke.a,{className:"d-block mb-0 font-weight-bold"},"Total"),r.a.createElement(Ke.a,{className:"d-block mb-0 text-sm"},x))))))))))}}]),t}(n.Component);tr.contextType=E;var ar=a(188),nr=a.n(ar),rr=a(106);function sr(e){var t=e.rapperId,a=e.rapperPhotoUrl,n=e.nickname,s=e.isUserProfileOwner,l=e.rapperIndex,i=e.handleRemoveFavoriteRapper,o=0===l;return r.a.createElement("div",{key:t,className:"position-relative my-1 favorite-rapper ".concat(s?"favorite-rapper-owner":"")},r.a.createElement("div",{className:"text-truncate"},r.a.createElement("img",{src:a,alt:n,className:"rounded-circle favorite-rapper-image"}),r.a.createElement("p",{className:"m-0 text-sm"},n)),s&&r.a.createElement("div",{style:{top:-10,right:5},className:"d-none position-absolute favorite-rapper-overlay ".concat(o?"w-50":"")},r.a.createElement(N.a,{onClick:function(){return i(l)},className:"p-0 mx-1 bg-transparent border-0"},r.a.createElement(qe.a,{icon:Ve.z,className:"text-danger no-pointer-events"}))))}var lr=Object(rr.a)(function(e){var t=e.children;return r.a.createElement("div",{className:"d-flex justify-content-around justify-content-sm-between flex-sm-wrap"},t)}),ir=Object(rr.b)(function(e){return r.a.createElement(sr,e)}),or=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={favoriteRappers:[]},a.handleRemoveFavoriteRapper=a.handleRemoveFavoriteRapper.bind(Object(f.a)(a)),a.handleSetFavoriteRappersOrder=a.handleSetFavoriteRappersOrder.bind(Object(f.a)(a)),a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"handleRemoveFavoriteRapper",value:function(e){var t=this.state.favoriteRappers,a=t[e],n=t.filter(function(e){return e.id!==a.id});this.setState(function(){return{favoriteRappers:n}});var r=a.rapper_id,s=this.props.profileUserId,l=this.context.masterData,i=l.getAxiosOptions,o=l.handleAsyncError,c=i();je.delete([s,r],c).catch(o)}},{key:"handleSetFavoriteRappersOrder",value:function(e){var t=e.oldIndex,a=e.newIndex,n=this.state.favoriteRappers,r=nr()(n,t,a).map(function(e,t){return Object(h.a)({},e,{order:t})});this.setState(function(){return{favoriteRappers:r}});var s=r.map(function(e){return{id:e.id,order:e.order}}),l=this.props.profileUserId,i=this.context.masterData,o=i.getAxiosOptions,c=i.handleAsyncError,d=o();je.update(l,s,d).catch(c)}},{key:"componentDidMount",value:function(){var e=this,t=this.props.profileUserId,a=this.context.masterData,n=a.getAxiosOptions,r=a.handleAsyncError,s=n();je.getAllUser(t,s).then(function(t){var a=t.data;return e.setState(function(){return{favoriteRappers:a}})}).catch(r)}},{key:"render",value:function(){var e=this,t=this.state.favoriteRappers,a=this.props.isUserProfileOwner;return r.a.createElement("div",{className:"py-1"},0===t.length?r.a.createElement("p",{className:"my-3 text-xxl"},"No Top 5 Rappers"):r.a.createElement(lr,{axis:"xy",pressDelay:200,lockToContainerEdges:!0,onSortEnd:this.handleSetFavoriteRappersOrder},t.map(function(t,n){var s=t.Rapper,l=t.rapper_id,i=s.nickname,o=s.Profile.photo;return r.a.createElement(ir,{key:l,index:n,disabled:!a,isUserProfileOwner:a,nickname:i,rapperPhotoUrl:o,rapperIndex:n,handleRemoveFavoriteRapper:e.handleRemoveFavoriteRapper})})),t.length>0&&r.a.createElement("p",{className:"my-3 w-100 text-lg"},"DRAG TO REORDER"))}}]),t}(n.Component);function cr(e){var t=e.isUserProfileOwner,a=e.relationshipData,s=e.handleRelationshipOnClick,l=Object(n.useState)(!1),i=Object(Ne.a)(l,2),o=i[0],c=i[1],d=Object(n.useState)(!1),u=Object(Ne.a)(d,2),m=u[0],p=u[1],h=Object(n.useContext)(E).masterData.handleOpenAlert,f=a.isUserFriend,g=a.isPendingFriendRequest,b=a.isUserFriendRequestor,v=f?"Remove Friend":"Add Friend";g&&(v=b?"Cancel Request":"Accept Request");var x=[{order:0,labelText:v,onClick:s,icon:f||g&&g?Ve.G:Ve.F},{order:1,labelText:"Follow"},{order:2,labelText:"Message"}],y=function(e){return h(e+K,!1,null,null)};return r.a.createElement(Nt.a,{horizontal:!0,className:"bg-darkest"},!t&&x.map(function(e){var t=e.order,a=e.labelText,n=e.icon,s=e.onClick;return r.a.createElement(yt.a,{key:"".concat(a,"-").concat(t),className:"flex-fill p-2 bg-darkest rounded-0"},r.a.createElement(N.a,{outline:!0,color:"secondary",onClick:s||function(){return y(Z)},className:"p-0 bg-transparent border-0 text-sm rounded-0 outline-none"},n&&r.a.createElement(qe.a,{icon:n,className:"mr-2 no-pointer-events"}),r.a.createElement("span",{className:"no-pointer-events"},a)))}),r.a.createElement(yt.a,{className:"ml-auto p-2 bg-darkest rounded-0"},r.a.createElement(Xa.a,{direction:"left",isOpen:m||o,toggle:function(){return c(!o)}},r.a.createElement(Jt.a,{outline:!0,className:"p-0 bg-transparent border-0 rounded-0 outline-none"},r.a.createElement(qe.a,{icon:Ve.j})),r.a.createElement(Qt.a,{className:"bg-darkest rounded-0 more-profile-options"},t?r.a.createElement(sn,{setIsEditing:function(){return p(!m)}}):["Block","Report"].map(function(e){return r.a.createElement(nt.a,{key:e,onClick:function(){return y(X)},className:"text-secondary outline-none"},e)})))))}or.contextType=E;var dr=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={isDropdownOpen:!1,isEditing:!1,requestedRappers:[]},a.toggleIsDropdownOpen=a.toggleIsDropdownOpen.bind(Object(f.a)(a)),a.toggleisEditing=a.toggleisEditing.bind(Object(f.a)(a)),a.setChallengerUserId=a.setChallengerUserId.bind(Object(f.a)(a)),a.handleBattleRequestModalClose=a.handleBattleRequestModalClose.bind(Object(f.a)(a)),a.handleBattleRequestModalSubmit=a.handleBattleRequestModalSubmit.bind(Object(f.a)(a)),a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"toggleIsDropdownOpen",value:function(){this.setState(function(e){return{isDropdownOpen:!e.isDropdownOpen}})}},{key:"toggleisEditing",value:function(){this.setState(function(e){return{isEditing:!e.isEditing,isDropdownOpen:!e.isDropdownOpen}})}},{key:"setChallengerUserId",value:function(e,t){var a=this.state.requestedRappers,n=[].concat(a);e?n[t]=e:n.splice(t,1),this.setState(function(){return{requestedRappers:n}})}},{key:"handleBattleRequestModalClose",value:function(){this.setState(function(){return{requestedRappers:[]}})}},{key:"handleBattleRequestModalSubmit",value:function(){var e=this.state.requestedRappers;if(e&&2!==!e.length){var t=this.props.userId,a=this.context.masterData,n=a.getAxiosOptions,r=a.handleAsyncError,s=n(),l={requestor_user_id:t,user_one_id:e[0],user_two_id:e[1]};we.create([t,l],s).catch(r)}}},{key:"render",value:function(){var e=this.state,t=e.isDropdownOpen,a=e.isEditing,n=e.requestedRappers,s=this.props.userId,l=window.screen.width>=576?"text-xl":"text-md";return r.a.createElement(Xa.a,{isOpen:a||t,toggle:this.toggleIsDropdownOpen,direction:"up",className:"d-flex flex-column"},r.a.createElement(st.a,{to:"/battles/create",className:"btn btn-outline-primary btn-lg vertical-text py-sm-3 rounded-0 font-weight-bolder ".concat(l)},r.a.createElement("span",{className:"d-inline-block mb-4 mb-sm-0"},"CREATE")),r.a.createElement(Jt.a,{outline:!0,className:"btn btn-outline-primary mx-0 border-top-0 rounded-0"},r.a.createElement(qe.a,{icon:Ve.c,size:"lg"})),r.a.createElement(Qt.a,{className:"bg-darkest rounded-0"},r.a.createElement(ur,{userId:s,isSubmitDisabled:n.length<2,requestedRappers:n,setIsEditing:this.toggleisEditing,setChallengerUserId:this.setChallengerUserId,handleBattleRequestModalClose:this.handleBattleRequestModalClose,handleBattleRequestModalSubmit:this.handleBattleRequestModalSubmit})))}}]),t}(n.Component);function ur(e){var t=e.userId,a=e.isSubmitDisabled,n=e.requestedRappers,s=e.setIsEditing,l=e.setChallengerUserId,i=e.handleBattleRequestModalClose,o=e.handleBattleRequestModalSubmit;return r.a.createElement(ze,{headerText:"Request A Battle",toggleButtonContent:"Request A Battle",toggleButtonProps:{className:"dropdown-item w-100 text-secondary bg-transparent border-0 rounded-0 list-group-item-darker"},isSubmitDisabled:a,handleSubmit:o,handleClose:i,setIsEditing:s},r.a.createElement("div",null,r.a.createElement("p",null,"Select 2 rappers you want to see in a battle.",r.a.createElement("span",{className:"d-block text-sm text-warning"},"If you want to challenge a rapper, please create a battle and call them out.")),r.a.createElement(Yn,{userId:t,labelText:"Rapper One",placeholderText:"Select the first rapper",isOptional:!1,isTooltipShown:!1,dataNumber:0,requestedRappers:n,setChallengerUserId:l,inputClassName:"bg-darkest-75"}),r.a.createElement(Yn,{userId:t,labelText:"Rapper Two",placeholderText:"Select the second rapper",isOptional:!1,isTooltipShown:!1,dataNumber:1,requestedRappers:n,setChallengerUserId:l,inputClassName:"bg-darkest-75"})))}function mr(e){var t=e.battles,a=e.isRequestedBattles,s=e.isTournaments,l=e.selectedBattleId,i=e.battlesStateProperty,o=e.handleBattleItemOnClick,c=Object(n.useContext)(E).masterData.goTo;return r.a.createElement(Nt.a,{className:"mh-100 pt-1 pb-sm-5"},0===t.length&&r.a.createElement(yt.a,{className:"h-100 mb-2 px-2 py-0 rounded-0 bg-darkest"},r.a.createElement("div",null,r.a.createElement("h3",null,"No Battles Available"),r.a.createElement("p",null,"When battles are available they will appear here."))),t.map(function(e,t){var n=e.id,d=e.RequestingUsers,u=e.RequestedContestants,m="",p="",h="",f="";if(a){var g=Object(Ne.a)(u,2),b=g[0],v=g[1],E=b.id,x=b.BattleRequestStatus,y=v.id,N=v.BattleRequestStatus;m=E,p=y,h=x.definition,f=N.definition}var C=function(){return c("battles/".concat(n))};return a&&(C=null),s&&(C=function(){return c("tournaments/".concat(n))}),r.a.createElement(yt.a,{key:oe.getBattleCardKey(e.UserBattles,t),tag:"button","data-battle-id":n,"data-state-property":i,onClick:o,onDoubleClick:C,className:"mb-2 px-2 py-0 rounded-0 ".concat(n===l?"bg-darkest-50":"bg-darkest-90")},a&&r.a.createElement(pr,{key:"".concat(m,"-").concat(p,"-").concat(d.length,"-").concat(h,"-").concat(f),battle:e}),s&&r.a.createElement(fr,{key:n,tournament:e,battlesStateProperty:i}),!a&&!s&&r.a.createElement(hr,{battle:e,battlesStateProperty:i}))}))}function pr(e){var t=e.battle,a=t.RequestingUsers,n=t.RequestedContestants,s=window.screen.width>=576?"text-lg":"text-md",l=a.length;return r.a.createElement("div",{className:"d-flex justify-content-between no-pointer-events"},r.a.createElement("div",{className:"flex-fill d-flex flex-column text-left"},n.map(function(e,t){var a=e.user_id,n=e.BattleRequestStatus.definition,l=e.User.nickname,i="accepted"===n?"text-success":"text-info";return i="rejected"===n?"text-danger":i,r.a.createElement("p",{key:a||t,className:"m-0 font-weight-bolder text-truncate text-secondary ".concat(s)},r.a.createElement("span",null,l),r.a.createElement("small",{className:"mx-3 text-sm ".concat(i)},n))})),r.a.createElement("div",{className:"d-flex flex-column w-25 mx-3 my-auto text-secondary"},r.a.createElement("p",{className:"m-0 text-capitalize font-weight-bold ".concat(s)},r.a.createElement("span",null,l),r.a.createElement("span",{className:"mx-1"},"Request".concat(1===l?"s":"")))))}function hr(e){for(var t=e.battlesStateProperty,a=e.battle,s=a.id,l=a.Rounds,i=a.UserBattles,o=a.Status,c=a.Type,d=a.BattleChallenge,u=a.JudgingType,m=window.screen.width>=576,p=m?"text-lg":"text-md",h=m?"text-md":"text-sm",f=m?"text-sm":"text-xs",g=oe.getAllParticipants(i,l),b=g.contestants,v=g.judges,E=c.definition,x=o.definition,y=u.definition,N=v.filter(function(e){return e.id}).length,C=l[0],O=0;O<l.length;O++){var A=l[O];C=A.number>C.number?A:C}var k=d?d.BattleChallengeStatus.definition:"";return r.a.createElement("div",{className:"d-flex justify-content-between no-pointer-events"},r.a.createElement("div",{className:"flex-fill d-flex flex-column text-left"},b.map(function(e,t){var a=e.User,n=a?a.nickname:"Join This Battle",s=a?"text-secondary":"text-success";d&&!a&&(n=d.ChallengedUser.nickname,s="accepted"===k?"text-secondary":"text-danger");return r.a.createElement("p",{key:e.user_id||t,className:"m-0 font-weight-bolder text-truncate ".concat(p," ").concat(s)},n)})),r.a.createElement("div",{className:"d-flex flex-column justify-content-center text-sm font-weight-bold ".concat("accepted"===k?"text-success":"text-info")},d&&r.a.createElement(n.Fragment,null,r.a.createElement("span",null,"CHALLENGE"),r.a.createElement("span",{className:"text-uppercase"},k))),r.a.createElement("div",{className:"d-flex flex-column w-25 mx-3 text-secondary"},r.a.createElement("p",{className:"m-0 text-capitalize font-weight-bold ".concat(p)},E),"judging"===y&&N<3?r.a.createElement("span",{className:"font-weight-bold text-success ".concat(f)},"".concat(N,"/3 judges")):r.a.createElement("span",{className:f},"judging"===y?"Judges full":y)),r.a.createElement("div",{className:"d-flex flex-column"},r.a.createElement("p",{className:"m-0 text-capitalize text-secondary ".concat(h)},"round"===x?"round ".concat(C.number):x),r.a.createElement(st.a,{to:"/battles/".concat(s),"data-state-property":t,className:"btn btn-link p-0 text-sm text-primary pointer-events"},"GOTO")))}function fr(e){var t=e.tournament,a=e.battlesStateProperty,n=window.screen.width>=576,s=n?"text-lg":"text-md",l=n?"text-md":"text-sm",i=t.id,o=t.Status.definition,c=t.TournamentType.definition;t.TournamentContestantCount.definition,t.TournamentJudges;return r.a.createElement("div",{className:"d-flex justify-content-between no-pointer-events"},r.a.createElement("div",{className:"flex-fill d-flex flex-column text-left text-secondary"},r.a.createElement("p",{className:"m-0 font-weight-bolder text-capitalize text-truncate ".concat(s)},c),r.a.createElement("p",{className:"m-0 font-weight-bolder text-capitalize text-truncate ".concat(s)})),r.a.createElement("div",{className:"d-flex flex-column w-25 mx-3 text-secondary"}),r.a.createElement("div",{className:"d-flex flex-column"},r.a.createElement("p",{className:"m-0 text-capitalize text-secondary ".concat(l)},o),r.a.createElement(st.a,{to:"/tournaments/".concat(i),"data-state-property":a,className:"btn btn-link p-0 text-sm text-primary pointer-events"},"GOTO")))}dr.contextType=E;var gr=a(60);n.Component;function br(e){var t=e.battlesData,a=e.selectedBattleId,s=e.handleBattleItemOnClick,l=(e.handleSortBattleList,Object(n.useState)(2)),i=Object(Ne.a)(l,2),o=i[0],c=i[1];return r.a.createElement("div",{className:"flex-fill order-1 order-sm-0 h-100 my-3 mx-sm-2 my-sm-0 border border-darkest"},r.a.createElement(bt.a,{tabs:!0},t.map(function(e){var t=e.labelText,a=e.order;return r.a.createElement(vt.a,{key:"tab-header-".concat(a,"-").concat(t),className:"flex-fill text-capitalize cursor-pointer"},r.a.createElement(Ct.a,{onClick:function(){return c(a)},className:"py-1 px-2 bg-darkest rounded-0 border-top-0 border-right-0 border-left-0 ".concat(o===a?"border-bottom border-primary":"")},t))})),r.a.createElement(Jn.a,{activeTab:o},t.map(function(e){var t=e.labelText,n=e.order,l=e.battles,i=e.stateProperty;return r.a.createElement(Wn.a,{tabId:n,key:"tab-pane-".concat(n,"-").concat(t)},r.a.createElement(mr,{battles:l,isRequestedBattles:"requests"===t,isTournaments:"tournaments"===t,selectedBattleId:a,battlesStateProperty:i,handleBattleItemOnClick:s}))})))}function vr(e){var t=e.responseStatus,a=e.requestCount,n=e.isUserRequestor,s=e.isUserRespondent,l=e.isUserChallengeRequestor,i=e.responseType,o=e.isBattleStaging,c=e.handleUpdateStatus,d="battle-challenge"===i,u="pending"!==t,m=s&&!(d&&u),p=!(d&&(n||s&&u));p=!(p=p&&d?o:p)&&d?l:p;var h=n||l?Ve.r:Ve.u;return h=s?Ve.z:h,r.a.createElement("div",{className:"d-flex justify-content-around align-items-center w-100 mb-3 ".concat(s||"battle-request"===i?"my-3":"")},r.a.createElement("p",{className:"flex-sm-fill m-0 text-xl"},r.a.createElement("span",null,a),r.a.createElement("span",{className:"mx-1"},"Request".concat(1===a?"":"s"))),(m||p)&&r.a.createElement("div",{className:"d-flex justify-content-around mx-1"},m&&r.a.createElement(N.a,{outline:!("accepted"===t),size:"sm",color:"success","data-status-definition":"accepted",onClick:c,className:"btn-lg mx-2 rounded-circle text-decoration-none"},r.a.createElement(qe.a,{fixedWidth:!0,icon:Ve.e,className:"no-pointer-events"})),p&&r.a.createElement(N.a,{outline:s&&!("rejected"==t),size:"sm",color:s||n||l?"danger":"success","data-status-definition":s?"rejected":"request",onClick:c,className:"btn-lg mx-2 rounded-circle text-decoration-none"},r.a.createElement(qe.a,{fixedWidth:!0,icon:h,className:"no-pointer-events"}))))}var Er=Ue.USER_UTILS,xr=ae.MESSAGE_UNAVAILABLE_EMAIL,yr=ae.MESSAGE_UNCHANGED_EMAIL,Nr=_e.MAIN_HELPER,Cr=function(e){function t(e,a){var n;Object(i.a)(this,t),n=Object(c.a)(this,Object(d.a)(t).call(this,e,a));var r=a.userContext.user.profile.User.email;return n.state={inputValue:r,isValid:!0,isAvailable:!1,validationMessage:"",isUpdateSuccessful:!1},n.validateInput=n.validateInput.bind(Object(f.a)(n)),n.validateAvailability=n.validateAvailability.bind(Object(f.a)(n)),n.handleOnChange=n.handleOnChange.bind(Object(f.a)(n)),n.handleOnBlur=n.handleOnBlur.bind(Object(f.a)(n)),n.handleSubmitForm=n.handleSubmitForm.bind(Object(f.a)(n)),n}return Object(u.a)(t,e),Object(o.a)(t,[{key:"validateInput",value:function(){var e=this.state.inputValue,t=Nr.validateEmailFormat(e),a=t.isValid,n=t.validationMessage;return this.setState(function(){return{inputValue:e,isValid:a,validationMessage:n}}),a}},{key:"validateAvailability",value:function(e){var t=this,a=this.state.inputValue,n=this.context,r=n.masterData,s=r.getAxiosOptions,l=r.handleAsyncError,i=n.userContext.user,o=i.user_id,c=i.profile.User.email,d=s(),u=a.trim(),m=c!==u;if(!m)return this.setState(function(){return{isValid:!1,validationMessage:yr,isAvailable:!1}});Er.isEmailAvailable(o,u,d).then(function(a){var n=a.data.isAvailable;if(t.setState(function(){return{isValid:m&&n,validationMessage:m?xr:yr,isAvailable:m&&n}}),e)return e(n)}).catch(l)}},{key:"handleOnChange",value:function(e){var t=e.target.value;this.setState(function(){return{inputValue:t}})}},{key:"handleOnBlur",value:function(){this.validateInput(),this.validateAvailability()}},{key:"handleSubmitForm",value:function(e){var t=this;e.preventDefault(),this.setState(function(){return{isUpdateSuccessful:!1}},function(){if(t.validateInput()){var e=t.state.inputValue,a=t.context,n=a.masterData,r=n.getAxiosOptions,s=n.handleAsyncError,l=a.userContext,i=l.user.user_id,o=l.methodData.updateUser,c=e.trim();t.validateAvailability(function(e){if(e){var a={user_id:i,email:c},n=r();Er.update(a,n).then(function(){return t.setState(function(){return{isUpdateSuccessful:!0}},o)}).catch(s)}})}})}},{key:"render",value:function(){var e=this.state,t=e.inputValue,a=e.isValid,n=e.isAvailable,s=e.validationMessage,l=e.isUpdateSuccessful,i=this.props,o=i.inputId,c=i.labelText,d=i.inputType;return r.a.createElement("form",{onSubmit:this.handleSubmitForm,className:""},r.a.createElement("div",null,r.a.createElement(Ke.a,{for:o,className:"m-0"},c),r.a.createElement($e.a,{id:o,type:d,valid:n,invalid:!a,value:t,onChange:this.handleOnChange,onBlur:this.handleOnBlur,className:"form-control-sm"}),r.a.createElement(et.a,null,s)),r.a.createElement("div",{className:"d-flex flex-wrap flex-sm-nowrap"},l&&r.a.createElement("small",{className:"flex-fill mx-3 form-text text-success"},"Successfully updated ".concat(c,".")),r.a.createElement(N.a,{color:"link",type:"submit",className:"btn-sm d-block ml-auto text-decoration-none"},"continue")))}}]),t}(n.Component);function Or(e){var t=e.selectedTournament,a=window.screen.width<576,n=t.TournamentType.definition;return r.a.createElement("div",{className:"d-flex flex-column bg-darkest border border-darkest battle-info-pane ".concat(a?"sticky-top":"")},r.a.createElement("h3",null,"Tournament"),r.a.createElement("p",{className:"text-capitalize"},n),r.a.createElement("p",null,"COMING SOON!"),r.a.createElement("p",null,"MORE TOURNAMENT INFO"))}function Ar(e){var t=e.seatNumber,a=e.contestantUsername,n=e.score;return r.a.createElement("div",{className:"d-flex mx-3 my-2"},r.a.createElement("span",null,t),r.a.createElement("span",{className:"flex-fill mx-2 text-left"},a||"TBD"),r.a.createElement("span",null,n))}Cr.contextType=E;function kr(e){var t=e.match.number;return r.a.createElement("div",{className:"d-flex my-3"},r.a.createElement("div",{className:"align-self-center mx-2"},t),r.a.createElement("div",{className:"d-flex flex-column flex-fill bg-darker"},r.a.createElement(Ar,{seatNumber:void 0,contestantUsername:void 0,score:void 0}),r.a.createElement("hr",{className:"m-0 border-dark"}),r.a.createElement(Ar,{seatNumber:void 0,contestantUsername:void 0,score:void 0})))}function Sr(e){var t=e.round,a=t.TournamentRoundType.definition,n=t.TournamentMatches;return r.a.createElement("div",{className:"d-flex flex-column same-flex-width"},r.a.createElement("h3",{className:"text-capitalize"},a),r.a.createElement("div",{className:"d-flex flex-column justify-content-around flex-fill px-4"},n.map(function(e){return r.a.createElement(kr,{key:e.id,match:e})})))}function Ir(e){var t=e.isJudgedBattles,a=e.isUserJudge,n=e.isUserContestant,s=e.isUserFollowing,l=e.handleJoinLeaveOnClick,i=e.handleFollowOnClick,o=e.handleUnfollowOnClick;return r.a.createElement("div",{className:"flex-fill d-flex justify-content-center"},t&&r.a.createElement(N.a,{outline:!0,"data-role":"judge",onClick:l,className:"btn-outline-primary mx-2 rounded-0"},a?"Judging":"JUDGE IT!"),r.a.createElement("div",{className:"align-self-end ".concat(t?"":"flex-fill mx-3")},r.a.createElement(N.a,{outline:!0,size:"sm",onClick:l,"data-role":"contestant",className:"d-block mx-auto w-50 rounded-0 ".concat(t?"btn-outline-secondary":"btn-outline-primary")},n?"Leave":"Join"),r.a.createElement(N.a,{size:"sm",color:"link",onClick:s?o:i,className:"my-0 mx-2 mx-sm-0 p-0 rounded-0"},s?"Following":"Follow")))}function Tr(e){var t=e.participants,a=e.userId,n=e.maxParticipantsCount,s=e.isUserParticipant,l=e.participantsType,i=t.length,o=s?"Leave":"Join It";return s||"judges"!==l||(o="Judge It"),r.a.createElement(Nt.a,{flush:!0,className:"flex-row flex-wrap flex-fill h-100 px-2 border-right border-darker"},t.map(function(e,t){var n=e.User,s=n.nickname,l=n.user_id,i=n.Profile;return r.a.createElement(yt.a,{key:"tournament-".concat(s,"-contestant-").concat(t),className:"d-flex flex-column justify-content-center w-50 h-25 p-0 bg-transparent rounded-0 border-0"},r.a.createElement(tr,{id:"tournament-registrant-".concat(l),userId:a,labelText:s,profile:i,userProfileUrl:"/profile/".concat(l),containerClassName:"d-flex flex-column justify-content-center flex-fill",buttonClassName:"btn-block text-sm font-weight-bold"}))}),0===i&&r.a.createElement(yt.a,{className:"d-flex flex-column justify-content-center mx-auto p-0 bg-transparent rounded-0"},r.a.createElement("p",null,"There are no registered ".concat(l,"."))),i<n&&r.a.createElement(yt.a,{className:"d-flex flex-column justify-content-center p-0 bg-transparent rounded-0 ".concat(i>0?"w-50 h-25":"mx-auto")},r.a.createElement(N.a,{outline:!0,onClick:function(){return alert()},"data-role":"contestant",className:"mx-auto py-0 rounded-0 btn-outline-primary ".concat(i>0?"btn-sm w-75":"")},o)))}function Rr(e){var t=e.battleData,a=e.isHorizontal,n=e.itemClassName;return r.a.createElement(Nt.a,{flush:!0,className:"flex-wrap h-100 ".concat(a?"flex-row":"")},Object.keys(t).map(function(e,a){return r.a.createElement(yt.a,{key:"info-item-".concat(e,"-").concat(a),className:"d-flex flex-column justify-content-center p-0 text-sm bg-transparent rounded-0 ".concat(n)},r.a.createElement("div",{className:"d-flex flex-column text-capitalize"},r.a.createElement("span",{className:"font-weight-bold text-truncate"},e),r.a.createElement("span",{className:"text-truncate"},t[e])))}))}var jr=oe.getBattleInfo;function wr(e){var t=e.rounds,a=Object(n.useState)(0),s=Object(Ne.a)(a,2),l=s[0],i=s[1];return r.a.createElement("div",{className:"d-flex flex-column flex-fill"},r.a.createElement(bt.a,{tabs:!0},t.map(function(e,t){var a=e.TournamentRoundType.definition;return r.a.createElement(vt.a,{key:"".concat(a,"-tab-nav"),className:"same-flex-width cursor-pointer"},r.a.createElement(Ct.a,{onClick:function(){var e;l!==(e=t)&&i(e)},className:"py-1 rounded-0 text-capitalize ".concat(l===t?"bg-darker-50":"")},a))})),r.a.createElement(Jn.a,{activeTab:l,className:"flex-fill"},t.map(function(e,t){var a=jr(e);return r.a.createElement(Wn.a,{key:"tab-content-".concat(t),tabId:t,className:"h-100"},r.a.createElement(Rr,{battleData:a,isHorizontal:!0,itemClassName:"w-25"}))})))}function Br(e){var t=e.userId,a=e.isUserContestant,s=e.isUserJudge,l=e.contestants,i=e.judges,o=e.maxContestantsCount,c=e.maxJudgesCount,d=Object(n.useState)(0),u=Object(Ne.a)(d,2),m=u[0],p=u[1],h=function(e){m!==e&&p(e)};return r.a.createElement("div",{className:"d-flex flex-column flex-fill"},r.a.createElement(bt.a,{tabs:!0},r.a.createElement(vt.a,{className:"same-flex-width cursor-pointer"},r.a.createElement(Ct.a,{onClick:function(){return h(0)},className:"py-0 rounded-0 text-capitalize ".concat(0===m?"bg-darker-50":"")},"Contestants")),r.a.createElement(vt.a,{className:"same-flex-width cursor-pointer"},r.a.createElement(Ct.a,{onClick:function(){return h(1)},className:"py-0 rounded-0 text-capitalize ".concat(1===m?"bg-darker-50":"")},"Judges"))),r.a.createElement(Jn.a,{activeTab:m,className:"flex-fill"},r.a.createElement(Wn.a,{tabId:0,className:"h-100"},r.a.createElement(Tr,{userId:t,isUserParticipant:a,participants:l,maxParticipantsCount:o,participantsType:"contestants"})),r.a.createElement(Wn.a,{tabId:1,className:"h-100"},r.a.createElement(Tr,{userId:t,isUserParticipant:s,participants:i,maxParticipantsCount:c,participantsType:"judges"}))))}function Ur(e){var t=e.contestants,a=e.judges,n=e.userId,s=e.isUserJudge,l=e.isUserContestant,i=e.status,o=e.contestantCount,c=e.judgeCount,d=e.tournamentRounds;return r.a.createElement("div",{className:"d-flex bg-darkest px-2 pt-2 vh-30"},r.a.createElement("div",{className:"d-flex flex-column w-50"},r.a.createElement(Br,{userId:n,isUserContestant:l,isUserJudge:s,contestants:t,judges:a,maxContestantsCount:o,maxJudgesCount:c})),r.a.createElement("div",{className:"d-flex flex-column w-100 px-2"},r.a.createElement("div",null,r.a.createElement("h3",{className:"mb-1 text-capitalize"},i),"staging"===i&&r.a.createElement("p",{className:"mb-1"},"Starts when ".concat(o," contestants have registered"))),r.a.createElement(wr,{rounds:d})))}function Pr(e){var t=e.handleLogin;return r.a.createElement("div",null,r.a.createElement(Ye,{titleText:"Welcome",isContentCollapsible:!1,navbarProps:{fixed:"top"}},r.a.createElement(N.a,{color:"link",onClick:t},"Log In / Sign Up")),r.a.createElement(C.a,{fluid:!0,className:"py-5 my-3 content-container"},r.a.createElement("h1",{style:{letterSpacing:"0.35rem"}},"Welcome to Spitface Battles"),r.a.createElement(O.a,null,r.a.createElement(A.a,{size:"6"},r.a.createElement("p",{className:"p-2 text-justify text-xl"},"A brand new platform for the underground hip-hop community. Users can challenge other users to rap battles and have their verses liked, dissed, and even scored by their peers.")),r.a.createElement(A.a,{size:"6"},r.a.createElement("p",{className:"p-2 text-justify text-xl"},"Spitface Battles aims to connect people with features that support the structure, flow, and rules of a rap battle while encouraging engagement through a handful of tools built specifically for this niche community."))),r.a.createElement(N.a,{outline:!0,block:!0,onClick:t,style:{height:"25vh",fontSize:"xx-large",letterSpacing:"0.35rem"},className:"btn-outline-primary rounded-0"},"Get Started"),r.a.createElement("p",null,"* site under construction")))}var _r=a(189),Dr=a.n(_r),Lr=(a(359),Ue.NOTIFICATION_UTILS),Mr=Ue.PROFILE_UTILS,Fr=Ue.USER_UTILS,Vr=ae.SERVER_URL,qr=_e.HANDLE_ASYNC_ERROR,Gr=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={toasts:[],isJoinedSocketRooms:!1,ioSocket:null,alert:{isShown:!1,message:"",isConfirmModal:!0,confirmButtonProps:void 0,confirmCallback:void 0}},a.goTo=a.goTo.bind(Object(f.a)(a)),a.updateUser=a.updateUser.bind(Object(f.a)(a)),a.getAxiosOptions=a.getAxiosOptions.bind(Object(f.a)(a)),a.handleSetNotificationsAsSeen=a.handleSetNotificationsAsSeen.bind(Object(f.a)(a)),a.handleShowToast=a.handleShowToast.bind(Object(f.a)(a)),a.handleRemoveToast=a.handleRemoveToast.bind(Object(f.a)(a)),a.handleLogout=a.handleLogout.bind(Object(f.a)(a)),a.handleOpenAlert=a.handleOpenAlert.bind(Object(f.a)(a)),a.handleCloseAlert=a.handleCloseAlert.bind(Object(f.a)(a)),a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"goTo",value:function(e){var t=e.includes("home")?"":e;"/"===t[0]&&(t=t.substr(1)),t="string"===typeof t?"/".concat(t):"/";var a=this.props.history,n=a.location.state;n&&n.lastPathname===t?a.replace(t,{lastPathname:t}):a.push(t,{lastPathname:t})}},{key:"updateUser",value:function(){var e=this,t=this.state.isJoinedSocketRooms;this.props.auth.getProfile(function(a,n){if(a)throw a;var r=n.sub,s=n.nickname,l=r.split("|"),i=l[1],o=l[0],c={user_id:i,socialNickname:s},d=e.getAxiosOptions();Mr.getUserProfile(c.user_id,d).then(function(a){c.profile=a.data,c.nickname=c.profile.User.nickname,c.authMethod=o,c.subscriptions=c.profile.User.Subscriptions;var n=c.subscriptions,r=c.user_id,s=c.nickname;if(Lr.getAllUser(r,d).then(function(t){var a=t.data,n=e.context.userContext,r=n.setUser,s=n.addNotifications;r(c),s(a)}),!t){var l=Dr()("ws://".concat(Vr.split("://")[1]));l.on("connect",function(){var t={userId:r,nickname:s,isBattleAudience:!1};l.emit("joinRoom","user-".concat(r,"-updates"),t),n.forEach(function(e){var t=e.room_name,a={userId:e.user_id,nickname:s,isBattleAudience:t.includes("notifications")};l.emit("joinRoom",t,a)});var a=e.context,i=a.masterData;(0,a.setMasterData)(Object(h.a)({},i,{ioSocket:l})),e.setState(function(){return{ioSocket:l,isJoinedSocketRooms:!0}})}),l.on("notification",function(t){var a=e.context.userContext.user.nickname,n=t.fromUsername;(t.isPublic||n!==a)&&(e.updateUser(),e.handleShowToast(t))})}}).catch(qr)})}},{key:"getAxiosOptions",value:function(){return{headers:{Authorization:"Bearer ".concat(this.props.auth.getAccessToken())}}}},{key:"toggleSidebarMenu",value:function(){document.getElementById("content").classList.toggle("active"),document.getElementById("sidebarMenuCollapse").classList.toggle("show")}},{key:"handleSetNotificationsAsSeen",value:function(e){var t=e.target.getAttribute("data-notification-type"),a=this.context.userContext.user.user_id,n=this.getAxiosOptions();Lr.setAllSeen(a,t,n).then(this.updateUser).catch(qr)}},{key:"handleShowToast",value:function(e){var t=this.state.toasts;this.setState(function(){return{toasts:[e].concat(t)}})}},{key:"handleRemoveToast",value:function(e){var t=this.state.toasts;t.splice(e,1),this.setState(function(){return{toasts:t}})}},{key:"handleLogout",value:function(){var e=this.context.userContext,t=e.user,a=e.setUser,n=e.clearNotifications,r=this.props,s=r.auth,l=r.history,i=this.getAxiosOptions();s.logout(function(){Fr.update({user_id:t.user_id,is_online:!1},i).then(function(){a({}),n(),l.replace("/welcome")}).catch(qr)})}},{key:"handleOpenAlert",value:function(e,t,a,n){var r=this;this.setState(function(){return{alert:{message:e,isShown:!0,isConfirmModal:t||!1,confirmButtonProps:a,confirmCallback:n||r.handleCloseAlert}}})}},{key:"handleCloseAlert",value:function(){var e=this;this.setState(function(){return{alert:{isShown:!1,isConfirmModal:!1,message:"",confirmButtonProps:void 0,confirmCallback:e.handleCloseAlert}}})}},{key:"componentDidMount",value:function(){var e=this.context,t=e.setMasterData;(0,e.userContext.setMethodData)({updateUser:this.updateUser.bind(this)}),t({goTo:this.goTo.bind(this),getAxiosOptions:this.getAxiosOptions.bind(this),handleOpenAlert:this.handleOpenAlert.bind(this),handleCloseAlert:this.handleCloseAlert.bind(this),handleAsyncError:qr}),this.updateUser()}},{key:"render",value:function(){var e=this,t=this.state,a=t.toasts,n=t.alert,s=n.isShown,l=n.message,i=n.isConfirmModal,o=n.confirmButtonProps,c=n.confirmCallback,d=this.props.history;return r.a.createElement(v,null,function(t){var n=t.user,u=n.user_id,m=n.nickname;return u?r.a.createElement(C.a,{fluid:!0,className:"d-flex flex-column flex-md-row p-0"},s&&r.a.createElement(Ge,{message:l,isConfirmModal:i,confirmButtonProps:o,handleConfirmOnClick:c,handleCloseOnClick:e.handleCloseAlert}),a.length>0&&r.a.createElement("div",{className:"fixed-top d-flex flex-column toast-container"},a.map(function(t,a){return r.a.createElement(Dn,{key:a,editIndex:a,notification:t,goTo:e.goTo,handleRemoveToast:e.handleRemoveToast})})),r.a.createElement(kt,{goTo:e.goTo,toggleMenu:e.toggleSidebarMenu,handleLogout:e.handleLogout}),r.a.createElement(dt,{handleSetNotificationsAsSeen:e.handleSetNotificationsAsSeen}),r.a.createElement(C.a,{fluid:!0,id:"content",className:"flex-fill pr-0 page-content"},r.a.createElement(De,Object.assign({key:m,history:d,isNicknameSet:!!m,handleLogout:e.handleLogout},e.props)))):null})}}]),t}(n.Component);Gr.contextType=E;var zr=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(Ye,{titleText:"Battle Feed",isContentCollapsible:!1}),r.a.createElement(C.a,{fluid:!0,className:"py-5 content-container"},r.a.createElement("h1",null,"Dashboard"),r.a.createElement("h2",null,"Coming Soon"),r.a.createElement("p",null,"This page will resemble popular social media feeds. It will be designed to keep the users engaged inbetween battles. Users will see their own battles, their friends\u2019 and rivals\u2019 battles, popular battles, and user promoted battles in their Battle Feed. More work needs to be discover additional features specific for rap battling, but rest assured we are committed to delivering you the most unique battling experience on the internet.")))}}]),t}(n.Component),Hr=Ue.BATTLE_UTILS,Wr=Ue.BATTLE_ROLE_UTILS,Jr=Ue.BATTLE_OPTION_UTILS,Qr=Ue.SUBSCRIPTION_UTILS,Yr=ae.CREATE_BATTLE_REQUIRED_FIELDS,Xr=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={options:null,isAdvancedOptionsOpen:!1,challengerUserId:null},a.setChallengerUserId=a.setChallengerUserId.bind(Object(f.a)(a)),a.handleCreateBattle=a.handleCreateBattle.bind(Object(f.a)(a)),a.toggleAdvancedOptionsIsOpen=a.toggleAdvancedOptionsIsOpen.bind(Object(f.a)(a)),a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"setChallengerUserId",value:function(e){this.setState(function(){return{challengerUserId:e}})}},{key:"handleCreateBattle",value:function(e){e.preventDefault();for(var t=this.state.options,a=Object.keys(t),n={},r=0;r<a.length;r++){var s=a[r];if("status"!==s){var l=e.target[s].value;if(Yr.includes(s)&&"0"===l)return;var i=s.slice(0,-1);i=i.replace(/[A-Z]/g,function(e){return"_".concat(e.toLowerCase())}),n[i+="_id"]=l}}var o=this.context,c=o.masterData,d=c.ioSocket,u=c.goTo,m=c.getAxiosOptions,p=c.handleAsyncError,f=o.userContext,g=f.user,b=f.methodData.updateUser,v=g.user_id,E=g.nickname,x=t.status.id,y=document.getElementById("user-search").getAttribute("data-selected-user-id"),N=Object(h.a)({creator_id:v,status_id:x,called_out_user_id:y},n),C=m(),O=[Hr.createBattle(N,C),Wr.getOne("contestant",C)];pe.a.all(O,C).then(function(e){var t=Object(Ne.a)(e,2),a=t[0],n=t[1].data.id,r=a.data,s=r.id,l=r.called_out_user_id,i=[{user_id:v,room_name:"battle-stage-".concat(s,"-notifications"),content_id:s}];if(l){var o={room_name:"battle-".concat(s,"-challenge"),content_id:s};i.push(Object(h.a)({},o,{user_id:v})),i.push(Object(h.a)({},o,{user_id:l}))}Qr.create(v,i,C).then(b);var c=[s,{userId:v,roleId:n,participantNumber:1,isReady:!1}];return Hr.joinBattle(c,C)}).then(function(e){var t=e.data.battle_id,a={userId:v,nickname:E,isBattleAudience:!1};d.emit("joinRoom","battle-stage-".concat(t,"-notifications"),a),setTimeout(function(){return u("battles/".concat(t))},250)}).catch(p)}},{key:"toggleAdvancedOptionsIsOpen",value:function(){this.setState(function(e){return{isAdvancedOptionsOpen:!e.isAdvancedOptionsOpen}})}},{key:"componentDidMount",value:function(){var e=this,t=this.context.masterData,a=t.getAxiosOptions,n=t.handleAsyncError,r=a();Jr.getAll(r).then(function(t){var a=t.data;return e.setState({options:a})}).catch(n)}},{key:"render",value:function(){var e=this.state,t=e.options,a=e.isAdvancedOptionsOpen,n=this.context.userContext.user.user_id;return t?r.a.createElement("div",null,r.a.createElement(Ye,{titleText:"Create Battle",isContentCollapsible:!1}),r.a.createElement(C.a,{fluid:!0,className:"py-5 content-container"},r.a.createElement("h2",null,"Set it Up!"),r.a.createElement(at,{userId:n,options:t,isAdvancedOptionsOpen:a,setChallengerUserId:this.setChallengerUserId,handleCreateBattle:this.handleCreateBattle,toggleAdvancedOptionsIsOpen:this.toggleAdvancedOptionsIsOpen}))):null}}]),t}(n.Component);Xr.contextType=E;var Zr=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(Ye,{titleText:"Community",isContentCollapsible:!1}),r.a.createElement(C.a,{fluid:!0,className:"py-5 content-container"},r.a.createElement("h2",{className:"mx-sm-5 px-sm-5 text-justify",style:{fontSize:"large",letterSpacing:"0.1em"}},"View friends, foes, messages, shout-outs, and find other rappers to follow."),r.a.createElement("div",{className:"d-flex flex-column flex-md-row mt-3"},r.a.createElement("div",null,r.a.createElement("h3",null,"Activity"),r.a.createElement("ul",{className:"text-left"},r.a.createElement("li",null,"Show activity status"),r.a.createElement("li",null,"Show activity source"),r.a.createElement("li",null,"Hover for options"),r.a.createElement("li",null,"Click to go to the activity source"))),r.a.createElement("div",{className:"flex-grow-1 d-flex flex-column px-3 h-100 border-left border-right border-secondary"},r.a.createElement("div",null,r.a.createElement("h3",null,"Conversations"),r.a.createElement("div",{className:"d-flex justify-content-between"},r.a.createElement("ul",{className:"text-left"},r.a.createElement("li",null,"Show message status"),r.a.createElement("li",null,"Show message source"),r.a.createElement("li",null,"Show message brief")),r.a.createElement("ul",{className:"text-left"},r.a.createElement("li",null,"Show date and time info"),r.a.createElement("li",null,"Hover for options"),r.a.createElement("li",null,"Click to go to the full conversation")))),r.a.createElement("div",{className:"flex-grow-1 mt-3"},r.a.createElement("h3",null,"Popular Rappers"),r.a.createElement("ul",{className:"text-left"},r.a.createElement("li",null,"Search bar"),r.a.createElement("li",null,"Sort and filter"),r.a.createElement("li",null,"Show username"),r.a.createElement("li",null,"Button to follow other user"),r.a.createElement("li",null,"Hover for options")))),r.a.createElement("div",null,r.a.createElement("h3",null,"Friends & Foes"),r.a.createElement("ul",{className:"text-left"},r.a.createElement("li",null,"Show active status"),r.a.createElement("li",null,"Show username"),r.a.createElement("li",null,"Hover for options"),r.a.createElement("li",null,"Click to message another user"))))))}}]),t}(n.Component),Kr=(a(360),Ue.PROFILE_UTILS),$r=Ue.RELATIONSHIP_UTILS,es=_e.MAIN_HELPER,ts=ae.DEFAULT_PROFILE_PHOTO_URL,as=ae.MESSAGE_INVALID_IMAGE_TYPE,ns=w.PAGE_NAMES,rs=function(e){function t(e){var a;Object(i.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).profileUserId=a.props.match.params.id;for(var n=0;n<ns.length;n++){var r=ns[n];a[r]=a[r].bind(Object(f.a)(a))}return a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"updateProfileState",value:function(){var e=this.context,t=e.pageData,a=e.setPageData,n=e.masterData,r=n.getAxiosOptions,s=n.handleAsyncError,l=e.userContext,i=l.methodData.updateUser,o=l.user.user_id,c=r(),d=[Kr.getUserProfile(this.profileUserId,c)],u=o===this.profileUserId;u||d.push($r.getOneType(o,this.profileUserId,"friend",c)),Promise.all(d).then(function(e){var n=Object(Ne.a)(e,2),r=n[0].data,s=n[1],l={isUserFriend:!1,isPendingFriendRequest:!1,isUserFriendRequestor:!1};if(!u&&s.data){var c=s.data,d=c.Status,m=c.Type,p=c.user_one_id,f=d.definition;"friend"===m.definition&&(l={isUserFriend:"accepted"===f,isPendingFriendRequest:"pending"===f,isUserFriendRequestor:p===o})}a(Object(h.a)({},t,{profile:r,relationshipData:l})),i()}).catch(s)}},{key:"handleUpdateInfo",value:function(e){var t=this.context,a=t.masterData,n=a.getAxiosOptions,r=a.handleAsyncError,s=t.userContext.user.user_id,l=Object(h.a)({user_id:s},e);Kr.updateUserProfile(s,l,n()).then(this.updateProfileState).catch(r)}},{key:"handleUpdateSocialSites",value:function(e,t){var a=this.context,n=a.masterData,r=n.getAxiosOptions,s=n.handleAsyncError,l=a.userContext.user.profile.id,i=r(),o=[];e.length>0&&o.push(Kr.createProfileSocialSites(l,e,i)),t.length>0&&o.push(Kr.updateProfileSocialSites(l,t,i)),o.length>0&&Promise.all(o).then(this.updateProfileState).catch(s)}},{key:"handleRemoveSocialSite",value:function(e){var t=this.context,a=t.masterData,n=a.getAxiosOptions,r=a.handleAsyncError,s=t.userContext.user.profile.id,l=n();l.data={profileSiteIds:[e]},Kr.deleteProfileSocialSites(s,l).then(this.updateProfileState).catch(r)}},{key:"handleUploadPhoto",value:function(e){var t=this;if(e){var a=this.context,n=a.masterData,r=n.getAxiosOptions,s=n.handleAsyncError,l=n.handleOpenAlert,i=a.userContext,o=i.methodData.updateUser,c=i.user.profile.id;if(!es.isImageValid(e))return l(as,!1);var d=e.name,u=es.getPhotoFileData(c,d),m={headers:{"Content-Type":u.fileType}};Kr.getSignedRequest(c,u,r()).then(function(t){var a=t.data.signedRequest;return Kr.uploadProfilePhoto(a,e,m)}).then(function(){return setTimeout(function(){t.updateProfileState(),o()},250)}).catch(s)}}},{key:"handleRemovePhoto",value:function(){var e=this,t=this.context,a=t.masterData,n=a.getAxiosOptions,r=a.handleAsyncError,s=t.userContext,l=s.methodData.updateUser,i=s.user.profile,o=i.id,c=i.photo;if(c){var d=c.split("/"),u=d[d.length-1];Kr.removeProfilePhoto(o,u,n()).then(function(){return setTimeout(function(){e.updateProfileState(),l()},250)}).catch(r)}}},{key:"handleRelationshipButtonOnClick",value:function(){var e=this.context,t=e.userContext.user.user_id,a=e.masterData,n=a.getAxiosOptions,r=a.handleAsyncError,s=e.pageData,l=s.profile.user_id,i=s.relationshipData,o=i.isUserFriend,c=i.isPendingFriendRequest,d=i.isUserFriendRequestor,u=o||c?"delete":"create";c&&!d&&(u="update");var m=[t];"create"===u?m.push("friend",{user_one_id:t,user_two_id:l}):m.push(l),$r[u](m,n()).then(this.updateProfileState).catch(r)}},{key:"componentDidMount",value:function(){var e=this,t=this.context,a=t.setPageData,n=t.masterData,r=n.getAxiosOptions,s=n.handleAsyncError,l=t.userContext.user,i=l.profile,o=l.user_id;Kr.getApprovedSocialSites(r()).then(function(t){var n=t.data;if(a({approvedSocialSites:n,updateProfileState:e.updateProfileState.bind(e)}),o===e.profileUserId)return a(Object(h.a)({},e.context.pageData,{profile:i,relationshipData:{isUserFriend:!1,isPendingFriendRequest:!1,isUserFriendRequestor:!1}}));e.updateProfileState()}).catch(s)}},{key:"componentWillUnmount",value:function(){this.context.setPageData(null)}},{key:"render",value:function(){var e=this;return r.a.createElement(y,null,function(t){var a=t.masterData,n=a.getAxiosOptions,s=a.handleAsyncError,l=t.pageData,i=l.profile,o=l.relationshipData,c=t.userContext.user.user_id;if(!i)return null;var d=c===e.profileUserId,u=i.id,m=i.photo,p=i.ProfileSocialSites,h=i.User,f=h.user_id,g=h.nickname;return r.a.createElement("div",{key:f},r.a.createElement(Ye,{titleText:g,isContentCollapsible:!1}),r.a.createElement(C.a,{fluid:!0,className:"pb-5 pb-sm-0 content-container"},r.a.createElement(O.a,{className:"px-3 px-sm-1 px-md-0"},r.a.createElement(A.a,{xs:"12",md:"3",className:"order-md-1 d-flex flex-column flex-sm-row flex-md-column px-0 px-sm-3 px-md-0 border-left border-darker"},r.a.createElement("div",{className:"d-flex flex-sm-column order-sm-1 order-md-0 bg-darkest-75 profile-side-top"},r.a.createElement(Ma,{isUserProfileOwner:d,profilePhoto:m||ts,handleUploadPhoto:e.handleUploadPhoto,handleRemovePhoto:e.handleRemovePhoto}),(d||p.length>0)&&r.a.createElement(Wa,{isUserProfileOwner:d,profileId:u,handleUpdateSocialSites:e.handleUpdateSocialSites,handleRemoveSocialSite:e.handleRemoveSocialSite})),r.a.createElement(Nt.a,{flush:!0,className:"flex-grow-1 profile-info-list bg-darkest-75"},r.a.createElement(yt.a,{className:"p-0 rounded-0 bg-darkest-75 rounded-0"},r.a.createElement(Ja,{isUserProfileOwner:d,profile:i,handleUpdateInfo:e.handleUpdateInfo})),r.a.createElement(yt.a,{className:"flex-fill p-0 bg-darkest-75 rounded-0"},r.a.createElement(Qa,{profile:i})))),r.a.createElement(A.a,{xs:"12",md:"9",className:"d-flex flex-column px-0 px-sm-3 px-md-0 profile-content"},r.a.createElement(ka,{isUserProfileOwner:d,userId:c,profileId:u,getAxiosOptions:n,handleAsyncError:s}),r.a.createElement(Pa,{isUserProfileOwner:d,profileUserId:f,relationshipData:o,getAxiosOptions:n,handleAsyncError:s,handleRelationshipOnClick:e.handleRelationshipButtonOnClick})))))})}}]),t}(n.Component);rs.contextType=E;var ss=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(Ye,{titleText:"Help Zone",isContentCollapsible:!1}),r.a.createElement(C.a,{fluid:!0,className:"py-5 content-container"},r.a.createElement("p",{className:"mx-sm-5 text-justify"},"This is your go to for everything that a user will need to get started on the site, as well as future reference. common questions and answers for basic site usage. It also contains guides for participating in battles, scoring battles, and explains the various systems."),r.a.createElement("div",{className:"d-flex flex-column flex-sm-row justify-content-between"},r.a.createElement("div",{className:"flex-grow-1 mx-sm-5"},r.a.createElement("h3",{className:"mb-0"},"FAQ"),r.a.createElement("p",null,"A list a the most common beginner questions and answers"),r.a.createElement("ul",{className:"text-left mx-auto"},r.a.createElement("li",null,"List of questions"),r.a.createElement("li",null,"Click a question to expand and view its answer"))),r.a.createElement("div",{className:"mx-sm-5"},r.a.createElement("h3",{className:"mb-0"},"Guides"),r.a.createElement("p",null,"A list of guides that cover topics in detail"),r.a.createElement("ul",{className:"text-left mx-auto"},r.a.createElement("li",null,"Code of Ethics"),r.a.createElement("li",null,"Site Etiquette"),r.a.createElement("li",null,"Contestant Guides"),r.a.createElement("li",null,"Judge Guides"),r.a.createElement("li",null,"Spectator Guide"),r.a.createElement("li",null,"Battle Reputation"),r.a.createElement("li",null,"Judge Reputation"),r.a.createElement("li",null,"Battle Scoring"))))))}}]),t}(n.Component),ls=Ue.BATTLE_UTILS,is=Ue.BATTLE_RATING_UTILS,os=Ue.BATTLE_ROLE_UTILS,cs=Ue.VERSE_REACTION_UTILS,ds=Ue.SCORE_CARD_UTILS,us=Ue.PARTICIPANT_UTILS,ms=Ue.SUBSCRIPTION_UTILS,ps=Ue.AUDIENCE_UTILS,hs=_e.BATTLE_HELPER,fs=B.PAGE_NAMES,gs=function(e){function t(e){var a;Object(i.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={battle:null,participants:null,reactionTypes:null,battleRoles:null,resultCards:null,commentsCount:0,followersCount:0};for(var n=0;n<fs.length;n++){var r=fs[n];a[r]=a[r].bind(Object(f.a)(a))}return a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"updateBattle",value:function(){var e=this,t=this.state.battle,a=this.props.match,n=t?t.id:a.params.id,r=this.context.masterData,s=r.getAxiosOptions,l=r.handleAsyncError,i=s(),o=[ls.getOneBattle(n,i),os.getAll(i),cs.getTypes(i),ds.getStandardScorecardFields(i),ls.getBattleResults(n,i),ps.findAllBattle(n,i),ls.getBattleCommentsCount(n,i),ps.findAllBattleFollowersCount(n,i)];pe.a.all(o,i).then(function(t){var a=Object(Ne.a)(t,8),n=a[0],r=a[1],s=a[2],l=a[3],i=a[4],o=a[5],c=a[6],d=a[7],u=n.data,m=o.data,p=c.data,h=d.data,f=[];u.Rounds.forEach(function(e){var t="staging"===u.Status.definition?e.number:e.number-1;f[t]=e}),u.Rounds=f;var g=r.data.reduce(function(e,t){return e[t.definition]=t,e},{}),b=s.data.reduce(function(e,t){return e[t.definition]=t,e},{}),v=hs.getAllParticipants(u.UserBattles,u.Rounds),E=l.data.map(function(e){return e.definition}),x=i.data;e.setState(function(){return{battle:u,audienceUsers:m,participants:v,reactionTypes:b,battleRoles:g,standardScorecardFields:E,resultCards:x,commentsCount:p,followersCount:h}})}).catch(l)}},{key:"handleJoinLeaveBattle",value:function(e){var t=this,a=this.state,n=a.battle,r=a.participants,s=a.battleRoles,l=e.target,i=l.getAttribute("data-role"),o=l.getAttribute("data-seat-number"),c=s[i].id,d=r["".concat(i,"s")],u=this.context,m=u.masterData,p=m.getAxiosOptions,h=m.handleAsyncError,f=m.handleOpenAlert,g=m.handleCloseAlert,b=u.userContext,v=b.user.user_id,E=b.methodData.updateUser,x=hs.isUserParticipant(d,v),y=x?"leaveBattle":"joinBattle";if("joinBattle"===y){for(var N=!0,C=0;C<d.length;C++)if(!d[C].id){N=!1;break}if(N)return f("All of the ".concat(i," seats are full. Consider joining another battle or joining this one as a ").concat("contestant"===i?"judge":"contestant"),!1)}var O=o||hs.getSeatNumber(d),A=[n.id],k="judge"===i,S={userId:v,roleId:c,participantNumber:parseInt(O,10),isReady:k};A.push(x?v:S),g();var I=p();ls[y](A,I).then(function(){"joinBattle"===y?t.handleFollowBattle():t.handleUnfollowBattle(),E(),t.updateBattle()}).catch(h)}},{key:"handleBattleRatingOnChange",value:function(e){var t=this.state.battle,a=this.context,n=a.masterData,r=n.getAxiosOptions,s=n.handleAsyncError,l=a.userContext.user.user_id,i=hs.getUserBattleRating(t.BattleRatings,l)?"update":"create",o={user_id:l,battle_id:t.id,rating:e};"create"===i?t.BattleRatings.push(o):t.BattleRatings=t.BattleRatings.map(function(e){return e.user_id===l?o:e}),this.setState(function(){return{battle:t}},function(){var e=r();is[i](o,e).catch(s)})}},{key:"handleReadyOnClick",value:function(){var e,t=this,a=this.state.participants,n=this.context,r=n.masterData,s=r.getAxiosOptions,l=r.handleAsyncError,i=r.handleOpenAlert,o=n.userContext.user.user_id,c=a.contestants.filter(function(t,a){return t.user_id===o&&(e=a,!0)})[0];if(c&&!(e<0)){var d=c.is_ready,u=Object(Ya.a)(c,["is_ready"]),m=s(),p=Object(h.a)({is_ready:!d},u);a.contestants[e]=p,this.setState(function(){return{participants:a}},function(){us.updateParticipant(p,m).then(function(){p.is_ready&&(i("You are ready to start the battle. If your opponent indicates that they are ready too then the battle will begin early.",!1),t.updateBattle())}).catch(l)})}}},{key:"handleAcceptBattleChallenge",value:function(){var e=this,t=this.state,a=t.battle,n=t.battleRoles,r=a.id,s=this.context,l=s.masterData,i=l.getAxiosOptions,o=l.handleAsyncError,c=s.userContext,d=c.user.user_id,u=c.methodData.updateUser,m=i();ls.updateBattleChallenge(r,"accepted",m).then(function(){var t=n.contestant.id,a={userId:d,roleId:t,participantNumber:2,isReady:!1};ls.joinBattle([r,a],m).then(function(){e.handleFollowBattle(),u(),e.updateBattle()})}).catch(o)}},{key:"handleRejectBattleChallenge",value:function(){var e=this.state.battle,t=this.context.masterData,a=t.goTo,n=t.getAxiosOptions,r=t.handleAsyncError,s=e.id,l=n();ls.deleteBattle([s],l).then(function(){return a("battles/find")}).catch(r)}},{key:"handleFollowBattle",value:function(){var e=this,t=this.props.match.params.id,a=this.context,n=a.masterData,r=n.getAxiosOptions,s=n.handleAsyncError,l=a.userContext,i=l.user,o=i.user_id,c=i.nickname,d=l.methodData.updateUser,u=r(),m="battle-stage-".concat(t,"-notifications"),p={user_id:o,room_name:m,content_id:t};ms.create(o,[p],u).then(function(){var t={userId:o,nickname:c,isBattleAudience:!1};e.context.masterData.ioSocket.emit("joinRoom",m,t),d()}).catch(s)}},{key:"handleUnfollowBattle",value:function(){var e=this,t=this.props.match.params.id,a=this.context,n=a.masterData,r=n.getAxiosOptions,s=n.handleAsyncError,l=a.userContext,i=l.user.user_id,o=l.methodData.updateUser,c=r(),d="battle-stage-".concat(t,"-notifications");ms.delete(i,d,c).then(function(){e.context.masterData.ioSocket.emit("leaveRoom",d,{isBattleAudience:!1}),o()}).catch(s)}},{key:"connectToIoSocketRoom",value:function(){var e=this.props.match.params.id,t=this.context.userContext.user,a={userId:t.user_id,nickname:t.nickname,isBattleAudience:!1},n=this.context.masterData.ioSocket;n.emit("joinRoom","battle-stage-".concat(e),a),n.on("update",this.updateBattle)}},{key:"componentDidMount",value:function(){this.updateBattle(),this.connectToIoSocketRoom()}},{key:"componentWillUnmount",value:function(){var e=this.props.match.params.id,t=this.context.masterData.ioSocket;t.emit("leaveRoom","battle-stage-".concat(e),{isBattleAudience:!1}),t.close()}},{key:"render",value:function(){var e=this.state,t=e.battle,a=e.reactionTypes,n=e.participants,s=e.standardScorecardFields,l=e.resultCards,i=e.audienceUsers,o=e.commentsCount,c=e.followersCount,d=this.context.userContext.user,u=d.user_id,m=d.nickname,p=d.subscriptions;if(!t)return null;var h=hs.isUserParticipant(n.contestants,u),f=hs.isUserParticipant(n.judges,u),g=hs.getUserBattleRating(t.BattleRatings,u),b=hs.getAverageBattleRating(t.BattleRatings),v=t.id,E=t.BattleChallenge,x=t.Rounds,y=!1;if(E){var N=E.BattleChallengeStatus,O=E.challenged_user_id,A=N.definition;O===u&&"pending"===A&&(y=!0)}var k=p.filter(function(e){var t=e.room_name;return t.includes(v)&&t.includes("stage")}).length>0;return r.a.createElement("div",null,r.a.createElement(la,{userId:u,isUserFollowing:k,battleChallenge:t.BattleChallenge,rounds:x,resultCards:l,audienceCount:i.length,commentsCount:o,followersCount:c,battleStatus:t.Status.definition,battleType:t.Type.definition,roundCount:t.RoundCount.definition,roundLength:t.RoundLength.definition,judgingType:t.JudgingType.definition,judges:n.judges,isUserContestant:h,isUserJudge:f,userBattleRatingValue:g?g.rating:0,battleRatingCount:t.BattleRatings.length,averageBattleRating:b,handleJoinLeaveBattle:this.handleJoinLeaveBattle,handleBattleRatingOnChange:this.handleBattleRatingOnChange,handleFollowBattle:this.handleFollowBattle,handleUnfollowBattle:this.handleUnfollowBattle}),r.a.createElement(C.a,{fluid:!0,className:"py-3 content-container"},y&&r.a.createElement(Xn,{battleChallenge:E,handleAcceptBattleChallenge:this.handleAcceptBattleChallenge,handleRejectBattleChallenge:this.handleRejectBattleChallenge}),u&&t&&r.a.createElement(Pt,{userId:u,userNickname:m,battle:t,participants:n,isUserContestant:h,isUserJudge:f,reactionTypes:a,standardScorecardFields:s,resultCards:l,handleJoinLeaveBattle:this.handleJoinLeaveBattle,updateBattle:this.updateBattle,handleReadyOnClick:this.handleReadyOnClick}),r.a.createElement(rn,{battleId:t.id,audienceUsers:i,reactionTypes:a,rounds:x,contestants:n.contestants.map(function(e){return e.User})})))}}]),t}(n.Component);gs.contextType=E;var bs=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(y,null,function(t){var a=t.userContext,n=a.user.user_id,s=a.methodData.updateUser;return r.a.createElement("div",null,r.a.createElement(Ye,{titleText:"Battle Zone",isContentCollapsible:!1}),r.a.createElement(C.a,{fluid:!0,className:"mb-5 pt-1 pb-3 px-3 py-sm-3 content-container"},r.a.createElement("div",{className:"d-flex flex-column flex-sm-row p-2 bg-darkest"},r.a.createElement(An,{userId:n}),r.a.createElement(jn,null)),r.a.createElement(On,Object.assign({},e.props,{userId:n,updateUser:s}))))})}}]),t}(n.Component);function vs(e){var t=e.handleLogout;return r.a.createElement("div",null,r.a.createElement(Ye,{titleText:"Spitface Battles",isContentCollapsible:!1}),r.a.createElement(C.a,{fluid:!0,className:"py-3 content-container"},r.a.createElement("p",{className:"mx-sm-5 text-center"},"You signed up with a social connection. You can use that username by clicking continue, or you can change it first.",r.a.createElement("br",null),r.a.createElement("small",{className:"text-warning"},"WARNING: You must have a username to participate on Spitface Battles.")),r.a.createElement("div",{className:"w-50 mx-auto text-left"},r.a.createElement(dn,null),r.a.createElement(N.a,{outline:!0,color:"link",onClick:t,className:"btn-sm d-block mx-auto py-0 text-secondary outline-none"},"Logout"))))}a(361),a(362);var Es=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).tournamentId=a.props.match.params.id,a.state={tournament:{}},a.joinTournament=a.joinTournament.bind(Object(f.a)(a)),a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"joinTournament",value:function(){var e=this.context,t=e.masterData,a=t.getAxiosOptions,n=t.handleAsyncError,r=e.userContext.user.user_id,s=this.state.tournament.TournamentRounds,l=a(),i=s.filter(function(e){return"quarter-final"===e.TournamentRoundType.definition})[0].id;Be.createContestant(i,{user_id:r,tournament_round_id:i},l).then(function(e){console.log(e)}).catch(n)}},{key:"componentDidMount",value:function(){var e=this,t=this.context.masterData,a=t.getAxiosOptions,n=t.handleAsyncError;Be.getOne(this.tournamentId,a()).then(function(t){var a=t.data;return e.setState(function(){return{tournament:a}})}).catch(n)}},{key:"render",value:function(){var e=this.state.tournament;if(!e.id)return null;var t=e.id,a=e.current_round_id,n=e.Status.definition,s=e.TournamentType.definition,l=e.TournamentContestantCount.definition,i=e.TournamentJudges,o=e.TournamentRounds;console.log(e);[{id:1,round:1,match:1,players:[{id:1,name:"Player 1 name",seed:1},{id:2,name:"Player 2 name",seed:2}],score:[1,0]},{id:2,round:1,match:2,players:[{id:3,name:"Player 3 name",seed:3},{id:4,name:"Player 4 name",seed:4}],score:[1,0]},{id:3,round:1,match:3,players:[{id:5,name:"Player 5 name",seed:5},{id:6,name:"Player 6 name",seed:6}],score:[1,0]},{id:4,round:1,match:4,players:[{id:7,name:"Player 7 name",seed:7},{id:8,name:"Player 8 name",seed:8}],score:[1,0]}].concat([{id:5,round:2,match:1,players:[{id:1,name:"Player 1 name",seed:1},{id:3,name:"Player 3 name",seed:3}],score:[1,0]},{id:6,round:2,match:2,players:[{id:5,name:"Player 5 name",seed:5},{id:7,name:"Player 7 name",seed:7}],score:[1,0]}]).concat([{id:7,round:3,match:1,players:[{id:1,name:"Player 1 name",seed:1,score:0},{id:5,name:"Player 5 name",seed:5,score:0}],score:[0,0]}]);var c=l/2,d=o.filter(function(e){return e.id===a})[0].TournamentRoundType.definition,u=this.context.userContext.user,m=u.user_id,p=u.subscriptions,h=o.filter(function(e){return"quarter-final"===e.TournamentRoundType.definition})[0].RoundContestants,f=o.filter(function(e){return e.RoundContestants.filter(function(e){return e.user_id===m}).length>0}).length>0,g=!f&&i.filter(function(e){return e.user_id===m}).length>0,b=p.filter(function(e){var a=e.room_name;return a.includes(t)&&a.includes("tournament")}).length>0,v=o.filter(function(e){return"judges"===e.JudgingType.definition}).length>0;return r.a.createElement("div",null,r.a.createElement(Ye,{titleText:s,subheadingText:["".concat(h.length,"/").concat(l," contestants")],isContentCollapsible:!0},r.a.createElement("div",{className:"flex-fill d-flex align-items-center"},r.a.createElement("p",{className:"align-self-start flex-fill mb-0 font-weight-bold text-capitalize text-lg"},"round"===n?d:n),r.a.createElement(Ir,{isJudgedBattles:v,isUserJudge:g,isUserContestant:f,isUserFollowing:b,handleJoinLeaveOnClick:this.joinTournament,handleFollowOnClick:function(){return alert()},handleUnfollowOnClick:function(){return alert()}}),r.a.createElement("div",{className:"d-none d-sm-block"},"More"))),r.a.createElement(C.a,{fluid:!0,className:"pb-5 pb-sm-0 content-container"},r.a.createElement(Ur,{contestants:h,judges:i,tournamentId:t,userId:m,status:n,isJudgedBattles:v,isUserContestant:f,contestantCount:l,judgeCount:8,tournamentRounds:o}),r.a.createElement("div",{className:"d-flex"},o.map(function(e){return r.a.createElement(Sr,{key:e.id,round:e,firstRoundMatchesCount:c})}))))}}]),t}(n.Component);Es.contextType=E;var xs=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).auth=new ge,a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"handleAuthentication",value:function(e){var t=e.location;/access_token|id_token|error/.test(t.hash)&&this.auth.handleAuthentication()}},{key:"componentDidMount",value:function(){"/callback"!==ve.location.pathname&&"true"===localStorage.getItem("isLoggedIn")&&this.auth.renewSession()}},{key:"render",value:function(){var e=this,t=this.auth;return r.a.createElement(m.a,{history:ve},r.a.createElement(n.Fragment,null,r.a.createElement(p.a,{path:"/callback",render:function(t){return e.handleAuthentication(t),r.a.createElement(I,t)}}),r.a.createElement(p.a,{render:function(e){return r.a.createElement(b,null,t.isAuthenticated()?r.a.createElement(x,null,r.a.createElement(Gr,Object.assign({auth:t,history:ve},e))):r.a.createElement(Pr,Object.assign({handleLogin:t.login,history:ve},e)))}})))}}]),t}(n.Component);a(363),a(364);l.a.render(r.a.createElement(xs,null),document.getElementById("root"))}},[[191,1,2]]]);
//# sourceMappingURL=main.980e5da3.chunk.js.map